<?php
/**
 * ClipIt - JuxtaLearn Web Space
 * PHP version:     >= 5.2
 * Creation date:   2013-10-10
 * Last update:     $Date$
 * @author          Pablo Llin√°s Arnaiz <pebs74@gmail.com>, URJC JuxtaLearn Team
 * @version         $Version$
 * @link            http://www.juxtalearn.eu
 * @license         GNU Affero General Public License v3
 * @package         ClipIt
 * @subpackage      clipit_api
 */

function load_performance_palette($json_file){
    $jsonIterator = new RecursiveIteratorIterator(
        new RecursiveArrayIterator(json_decode($json_file, TRUE)),
        RecursiveIteratorIterator::SELF_FIRST);

    $performance_palette = ClipitPerformancePalette::get_performance_palette();
    $performance_items = array();
    foreach ($jsonIterator as $key_1 => $val_1) { // key_1 = performance_palette, val_1 = category_group
        if($key_1 != "performance_palette" || !is_array($val_1)) {
            return false;
        }
        foreach($val_1 as $key_2 => $val_2) { // category

            $performance_item = new ClipitPerformanceItem();
            $performance_item->category = $key_1;
            $performance_item->category_description
            foreach ($val_1 as $key_2 => $val_2) { //item
                $performance_item->$key2 = $val_2;
            }
            $performance_items[] = $performance_item;
        }
    }
    $performance_palette->add_performance_items($performance_items);
}

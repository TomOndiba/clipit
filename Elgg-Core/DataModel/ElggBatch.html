<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
		<head>
			<!-- template designed by Marco Von Ballmoos -->
			<title>Docs For Class ElggBatch</title>
			<link rel="stylesheet" href="../../media/stylesheet.css" />
			<meta http-equiv='Content-Type' content='text/html; charset=iso-8859-1'/>
		</head>
		<body>
			<div class="page-body">			
<h2 class="class-name">Class ElggBatch</h2>

<a name="sec-description"></a>
<div class="info-box">
	<div class="info-box-title">Description</div>
	<div class="nav-bar">
					<span class="disabled">Description</span> |
													<a href="#sec-var-summary">Vars</a> (<a href="#sec-vars">details</a>)
						|											<a href="#sec-method-summary">Methods</a> (<a href="#sec-methods">details</a>)
						
					</div>
	<div class="info-box-body">
                <p class="implements">
            Implements interfaces:
            <ul>
                <li>Iterator (internal interface)</li>            </ul>
        </p>
        		<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Efficiently run operations on batches of results for any function  that supports an options array.</p>
<p class="description"><p>This is usually used with elgg_get_entities() and friends,  elgg_get_annotations(), and elgg_get_metadata().</p><p>If you pass a valid PHP callback, all results will be run through that  callback. You can still foreach() through the result set after.  Valid  PHP callbacks can be a string, an array, or a closure.  <a href="http://php.net/manual/en/language.pseudo-types.php">http://php.net/manual/en/language.pseudo-types.php</a></p><p>The callback function must accept 3 arguments: an entity, the getter  used, and the options used.</p><p>Results from the callback are stored in callbackResult. If the callback  returns only booleans, callbackResults will be the combined result of  all calls. If no entities are processed, callbackResults will be null.</p><p>If the callback returns anything else, callbackresult will be an indexed  array of whatever the callback returns.  If returning error handling  information, you should include enough information to determine which  result you're referring to.</p><p>Don't combine returning bools and returning something else.</p><p>Note that returning false will not stop the foreach.</p></p>
	<ul class="tags">
				<li><span class="field">link:</span> <a href="http://docs.elgg.org/DataModel/ElggBatch">http://docs.elgg.org/DataModel/ElggBatch</a></li>
				<li><span class="field">since:</span> 1.8</li>
				<li><span class="field">example:</span> example not found</li>
			</ul>
		<p class="notes">
			Located in <a class="field" href="_engine---classes---ElggBatch.php.html">/engine/classes/ElggBatch.php</a> (line <span class="field">58</span>)
		</p>
		
				
		<pre></pre>
	
			</div>
</div>



	<a name="sec-var-summary"></a>
	<div class="info-box">
		<div class="info-box-title">Variable Summary</span></div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
						<span class="disabled">Vars</span> (<a href="#sec-vars">details</a>)
							| 
									<a href="#sec-method-summary">Methods</a> (<a href="#sec-methods">details</a>)
							
								</div>
		<div class="info-box-body">
			<div class="var-summary">
																								<div class="var-title">
					<span class="var-type">mixed</span>
					<a href="#$callbackResult" title="details" class="var-name">$callbackResult</a>
				</div>
											</div>
		</div>
	</div>

	<a name="sec-method-summary"></a>
	<div class="info-box">
		<div class="info-box-title">Method Summary</span></div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
																		<a href="#sec-var-summary">Vars</a> (<a href="#sec-vars">details</a>)
				 
				|
						<span class="disabled">Methods</span> (<a href="#sec-methods">details</a>)
		</div>
		<div class="info-box-body">			
			<div class="method-summary">
																																																																				
												<div class="method-definition">
											<span class="method-result">ElggBatch</span>
										<a href="#__construct" title="details" class="method-name">__construct</a>
											(<span class="var-type">string</span>&nbsp;<span class="var-name">$getter</span>, <span class="var-type">array</span>&nbsp;<span class="var-name">$options</span>, [<span class="var-type">mixed</span>&nbsp;<span class="var-name">$callback</span> = <span class="var-default">null</span>], [<span class="var-type">int</span>&nbsp;<span class="var-name">$chunk_size</span> = <span class="var-default">25</span>], [<span class="var-type">bool</span>&nbsp;<span class="var-name">$inc_offset</span> = <span class="var-default">true</span>])
									</div>
																<div class="method-definition">
											<span class="method-result">mixed</span>
										<a href="#current" title="details" class="method-name">current</a>
										()
									</div>
																<div class="method-definition">
											<span class="method-result">int</span>
										<a href="#key" title="details" class="method-name">key</a>
										()
									</div>
																<div class="method-definition">
											<span class="method-result">mixed</span>
										<a href="#next" title="details" class="method-name">next</a>
										()
									</div>
																<div class="method-definition">
											<span class="method-result">void</span>
										<a href="#reportIncompleteEntity" title="details" class="method-name">reportIncompleteEntity</a>
											(<span class="var-type">stdClass</span>&nbsp;<span class="var-name">$row</span>)
									</div>
																<div class="method-definition">
											<span class="method-result">void</span>
										<a href="#rewind" title="details" class="method-name">rewind</a>
										()
									</div>
																<div class="method-definition">
											<span class="method-result">void</span>
										<a href="#setIncrementOffset" title="details" class="method-name">setIncrementOffset</a>
											([<span class="var-type">bool</span>&nbsp;<span class="var-name">$increment</span> = <span class="var-default">true</span>])
									</div>
																<div class="method-definition">
											<span class="method-result">bool</span>
										<a href="#valid" title="details" class="method-name">valid</a>
										()
									</div>
								</div>
		</div>
	</div>		

	<a name="sec-vars"></a>
	<div class="info-box">
		<div class="info-box-title">Variables</div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
										<a href="#sec-var-summary">Vars</a> (<span class="disabled">details</span>)
						
			
										| 
									<a href="#sec-method-summary">Methods</a> (<a href="#sec-methods">details</a>)
							
					</div>
		<div class="info-box-body">
			<a name="var$callbackResult" id="$callbackResult"><!-- --></A>
<div class="oddrow">

	<div class="var-header">
		<span class="var-title">
			<span class="var-type">mixed</span>
			<span class="var-name">$callbackResult</span>
			 = <span class="var-default"> null</span>			(line <span class="line-number">143</span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">The result of running all entities through the callback function.</p>
	<ul class="tags">
				<li><span class="field">access:</span> public</li>
			</ul>
	
	
		
		

</div>
						
		</div>
	</div>
	
	<a name="sec-methods"></a>
	<div class="info-box">
		<div class="info-box-title">Methods</div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
															<a href="#sec-var-summary">Vars</a> (<a href="#sec-vars">details</a>)
																	<a href="#sec-method-summary">Methods</a> (<span class="disabled">details</span>)
						
		</div>
		<div class="info-box-body">
			<A NAME='method_detail'></A>

<a name="method__construct" id="__construct"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<span class="method-title">Constructor __construct</span> (line <span class="line-number">188</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Batches operations on any elgg_get_*() or compatible function that supports  an options array.</p>
<p class="description"><p>Instead of returning all objects in memory, it goes through $chunk_size  objects, then requests more from the server.  This avoids OOM errors.</p></p>
	<ul class="tags">
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">ElggBatch</span>
		<span class="method-name">
			__construct
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$getter</span>, <span class="var-type">array</span>&nbsp;<span class="var-name">$options</span>, [<span class="var-type">mixed</span>&nbsp;<span class="var-name">$callback</span> = <span class="var-default">null</span>], [<span class="var-type">int</span>&nbsp;<span class="var-name">$chunk_size</span> = <span class="var-default">25</span>], [<span class="var-type">bool</span>&nbsp;<span class="var-name">$inc_offset</span> = <span class="var-default">true</span>])
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$getter</span><span class="var-description">: The function used to get objects.  Usually                            an elgg_get_*() function, but can be any valid PHP callback.</span>			</li>
					<li>
				<span class="var-type">array</span>
				<span class="var-name">$options</span><span class="var-description">: The options array to pass to the getter function. If limit is                            not set, 10 is used as the default. In most cases that is not                            what you want.</span>			</li>
					<li>
				<span class="var-type">mixed</span>
				<span class="var-name">$callback</span><span class="var-description">: An optional callback function that all results will be passed                            to upon load.  The callback needs to accept $result, $getter,                            $options.</span>			</li>
					<li>
				<span class="var-type">int</span>
				<span class="var-name">$chunk_size</span><span class="var-description">: The number of entities to pull in before requesting more.                            You have to balance this between running out of memory in PHP                            and hitting the db server too often.</span>			</li>
					<li>
				<span class="var-type">bool</span>
				<span class="var-name">$inc_offset</span><span class="var-description">: Increment the offset on each fetch. This must be false for                            callbacks that delete rows. You can set this after the                            object is created with {@see ElggBatch::setIncrementOffset()}.</span>			</li>
				</ul>
		
			
	</div>
<a name="methodcurrent" id="current"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<span class="method-title">current</span> (line <span class="line-number">374</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">PHP Iterator Interface</p>
	<ul class="tags">
				<li><span class="field">see:</span> Iterator::current()</li>
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">mixed</span>
		<span class="method-name">
			current
		</span>
				()
			</div>
	
		
				<hr class="separator" />
		<div class="notes">Implementation of:</div>
			<dl>
			<dt>Iterator::current</dt>
					</dl>
			
	</div>
<a name="methodkey" id="key"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<span class="method-title">key</span> (line <span class="line-number">384</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">PHP Iterator Interface</p>
	<ul class="tags">
				<li><span class="field">see:</span> Iterator::key()</li>
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">int</span>
		<span class="method-name">
			key
		</span>
				()
			</div>
	
		
				<hr class="separator" />
		<div class="notes">Implementation of:</div>
			<dl>
			<dt>Iterator::key</dt>
					</dl>
			
	</div>
<a name="methodnext" id="next"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<span class="method-title">next</span> (line <span class="line-number">394</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">PHP Iterator Interface</p>
	<ul class="tags">
				<li><span class="field">see:</span> Iterator::next()</li>
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">mixed</span>
		<span class="method-name">
			next
		</span>
				()
			</div>
	
		
				<hr class="separator" />
		<div class="notes">Implementation of:</div>
			<dl>
			<dt>Iterator::next</dt>
					</dl>
			
	</div>
<a name="methodreportIncompleteEntity" id="reportIncompleteEntity"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<span class="method-title">reportIncompleteEntity</span> (line <span class="line-number">245</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Tell the process that an entity was incomplete during a fetch</p>
	<ul class="tags">
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			reportIncompleteEntity
		</span>
					(<span class="var-type">stdClass</span>&nbsp;<span class="var-name">$row</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">stdClass</span>
				<span class="var-name">$row</span>			</li>
				</ul>
		
			
	</div>
<a name="methodrewind" id="rewind"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<span class="method-title">rewind</span> (line <span class="line-number">356</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">PHP Iterator Interface</p>
	<ul class="tags">
				<li><span class="field">see:</span> Iterator::rewind()</li>
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			rewind
		</span>
				()
			</div>
	
		
				<hr class="separator" />
		<div class="notes">Implementation of:</div>
			<dl>
			<dt>Iterator::rewind</dt>
					</dl>
			
	</div>
<a name="methodsetIncrementOffset" id="setIncrementOffset"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<span class="method-title">setIncrementOffset</span> (line <span class="line-number">342</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Increment the offset from the original options array? Setting to  false is required for callbacks that delete rows.</p>
	<ul class="tags">
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			setIncrementOffset
		</span>
					([<span class="var-type">bool</span>&nbsp;<span class="var-name">$increment</span> = <span class="var-default">true</span>])
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">bool</span>
				<span class="var-name">$increment</span><span class="var-description">: Set to false when deleting data</span>			</li>
				</ul>
		
			
	</div>
<a name="methodvalid" id="valid"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<span class="method-title">valid</span> (line <span class="line-number">426</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">PHP Iterator Interface</p>
	<ul class="tags">
				<li><span class="field">see:</span> Iterator::valid()</li>
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">bool</span>
		<span class="method-name">
			valid
		</span>
				()
			</div>
	
		
				<hr class="separator" />
		<div class="notes">Implementation of:</div>
			<dl>
			<dt>Iterator::valid</dt>
					</dl>
			
	</div>
						
		</div>
	</div>


	<p class="notes" id="credit">
		Documentation generated on Tue, 13 May 2014 21:00:25 +0200 by <a href="http://www.phpdoc.org" target="_blank">phpDocumentor 1.4.4</a>
	</p>
	</div></body>
</html>
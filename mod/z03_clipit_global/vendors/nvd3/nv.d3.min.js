(function(){var c=window.nv||{};c.version="1.1.15b";c.dev=true;window.nv=c;c.tooltip=c.tooltip||{};c.utils=c.utils||{};c.models=c.models||{};c.charts={};c.graphs=[];c.logs={};c.dispatch=d3.dispatch("render_start","render_end");if(c.dev){c.dispatch.on("render_start",function(f){c.logs.startTime=+new Date()});c.dispatch.on("render_end",function(f){c.logs.endTime=+new Date();c.logs.totalTime=c.logs.endTime-c.logs.startTime;c.log("total",c.logs.totalTime)})}c.log=function(){if(c.dev&&console.log&&console.log.apply){console.log.apply(console,arguments)}else{if(c.dev&&typeof console.log=="function"&&Function.prototype.bind){var f=Function.prototype.bind.call(console.log,console);f.apply(console,arguments)}}return arguments[arguments.length-1]};c.render=function e(f){f=f||1;c.render.active=true;c.dispatch.render_start();setTimeout(function(){var h,j;for(var g=0;g<f&&(j=c.render.queue[g]);g++){h=j.generate();if(typeof j.callback==typeof(Function)){j.callback(h)}c.graphs.push(h)}c.render.queue.splice(0,g);if(c.render.queue.length){setTimeout(arguments.callee,0)}else{c.dispatch.render_end();c.render.active=false}},0)};c.render.active=false;c.render.queue=[];c.addGraph=function(f){if(typeof arguments[0]===typeof(Function)){f={generate:arguments[0],callback:arguments[1]}}c.render.queue.push(f);if(!c.render.active){c.render()}};c.identity=function(f){return f};c.strip=function(f){return f.replace(/(\s|&)/g,"")};function b(g,f){return(new Date(f,g+1,0)).getDate()}function a(h,g,f){return function(l,k,j){var m=h(l),n=[];if(m<l){g(m)}if(j>1){while(m<k){var i=new Date(+m);if((f(i)%j===0)){n.push(i)}g(m)}}else{while(m<k){n.push(new Date(+m));g(m)}}return n}}d3.time.monthEnd=function(f){return new Date(f.getFullYear(),f.getMonth(),0)};d3.time.monthEnds=a(d3.time.monthEnd,function(f){f.setUTCDate(f.getUTCDate()+1);f.setDate(b(f.getMonth()+1,f.getFullYear()))},function(f){return f.getMonth()});c.interactiveGuideline=function(){var p=c.models.tooltip();var f=null,o=null,h={left:0,top:0},n=d3.scale.linear(),g=d3.scale.linear(),k=d3.dispatch("elementMousemove","elementMouseout","elementDblclick"),l=true,j=null;var m=navigator.userAgent.indexOf("MSIE")!==-1;function i(q){q.each(function(u){var r=d3.select(this);var t=(f||960),w=(o||400);var s=r.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([u]);var x=s.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer");x.append("g").attr("class","nv-interactiveGuideLine");if(!j){return}function v(){var B=d3.mouse(this);var A=B[0];var z=B[1];var C=true;var D=false;if(m){A=d3.event.offsetX;z=d3.event.offsetY;if(d3.event.target.tagName!=="svg"){C=false}if(d3.event.target.className.baseVal.match("nv-legend")){D=true}}if(C){A-=h.left;z-=h.top}if(A<0||z<0||A>t||z>w||(d3.event.relatedTarget&&d3.event.relatedTarget.ownerSVGElement===undefined)||D){if(m){if(d3.event.relatedTarget&&d3.event.relatedTarget.ownerSVGElement===undefined&&d3.event.relatedTarget.className.match(p.nvPointerEventsClass)){return}}k.elementMouseout({mouseX:A,mouseY:z});i.renderGuideLine(null);return}var y=n.invert(A);k.elementMousemove({mouseX:A,mouseY:z,pointXValue:y});if(d3.event.type==="dblclick"){k.elementDblclick({mouseX:A,mouseY:z,pointXValue:y})}}j.on("mousemove",v,true).on("mouseout",v,true).on("dblclick",v);i.renderGuideLine=function(y){if(!l){return}var z=s.select(".nv-interactiveGuideLine").selectAll("line").data((y!=null)?[c.utils.NaNtoZero(y)]:[],String);z.enter().append("line").attr("class","nv-guideline").attr("x1",function(A){return A}).attr("x2",function(A){return A}).attr("y1",w).attr("y2",0);z.exit().remove()}})}i.dispatch=k;i.tooltip=p;i.margin=function(q){if(!arguments.length){return h}h.top=typeof q.top!="undefined"?q.top:h.top;h.left=typeof q.left!="undefined"?q.left:h.left;return i};i.width=function(q){if(!arguments.length){return f}f=q;return i};i.height=function(q){if(!arguments.length){return o}o=q;return i};i.xScale=function(q){if(!arguments.length){return n}n=q;return i};i.showGuideLine=function(q){if(!arguments.length){return l}l=q;return i};i.svgContainer=function(q){if(!arguments.length){return j}j=q;return i};return i};c.interactiveBisect=function(h,g,l){if(!h instanceof Array){return null}if(typeof l!=="function"){l=function(o,n){return o.x}}var m=d3.bisector(l).left;var i=d3.max([0,m(h,g)-1]);var k=l(h[i],i);if(typeof k==="undefined"){k=i}if(k===g){return i}var f=d3.min([i+1,h.length-1]);var j=l(h[f],f);if(typeof j==="undefined"){j=f}if(Math.abs(j-g)>=Math.abs(k-g)){return i}else{return f}};c.nearestValueIndex=function(h,g,f){var j=Infinity,i=null;h.forEach(function(l,k){var m=Math.abs(g-l);if(m<=j&&m<f){j=m;i=k}});return i};(function(){window.nv.tooltip={};window.nv.models.tooltip=function(){var t=null,y=null,j="w",i=50,q=25,g=null,v=null,u=null,o=null,x={left:null,top:null},n=true,r="nvtooltip-"+Math.floor(Math.random()*100000);var l="nv-pointer-events-none";var f=function(A,z){return A};var s=function(z){return z};var h=function(D){if(t!=null){return t}if(D==null){return""}var C=d3.select(document.createElement("table"));var z=C.selectAll("thead").data([D]).enter().append("thead");z.append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",true).html(s(D.value));var E=C.selectAll("tbody").data([D]).enter().append("tbody");var A=E.selectAll("tr").data(function(F){return F.series}).enter().append("tr").classed("highlight",function(F){return F.highlight});A.append("td").classed("legend-color-guide",true).append("div").style("background-color",function(F){return F.color});A.append("td").classed("key",true).html(function(F){return F.key});A.append("td").classed("value",true).html(function(G,F){return f(G.value,F)});A.selectAll("td").each(function(H){if(H.highlight){var G=d3.scale.linear().domain([0,1]).range(["#fff",H.color]);var F=0.6;d3.select(this).style("border-bottom-color",G(F)).style("border-top-color",G(F))}});var B=C.node().outerHTML;if(D.footer!==undefined){B+="<div class='footer'>"+D.footer+"</div>"}return B};var k=function(z){if(z&&z.series&&z.series.length>0){return true}return false};function m(){if(u){var z=d3.select(u);if(z.node().tagName!=="svg"){z=z.select("svg")}var B=(z.node())?z.attr("viewBox"):null;if(B){B=B.split(" ");var A=parseInt(z.style("width"))/B[2];x.left=x.left*A;x.top=x.top*A}}}function w(B){var z;if(u){z=d3.select(u)}else{z=d3.select("body")}var A=z.select(".nvtooltip");if(A.node()===null){A=z.append("div").attr("class","nvtooltip "+(v?v:"xy-tooltip")).attr("id",r)}A.node().innerHTML=B;A.style("top",0).style("left",0).style("opacity",0);A.selectAll("div, table, td, tr").classed(l,true);A.classed(l,true);return A.node()}function p(){if(!n){return}if(!k(y)){return}m();var C=x.left;var F=(g!=null)?g:x.top;var B=w(h(y));o=B;if(u){var E=u.getElementsByTagName("svg")[0];var z=(E)?E.getBoundingClientRect():u.getBoundingClientRect();var H={left:0,top:0};if(E){var A=E.getBoundingClientRect();var G=u.getBoundingClientRect();var D=A.top;if(D<0){var I=u.getBoundingClientRect();D=(Math.abs(D)>I.height)?0:D}H.top=Math.abs(D-G.top);H.left=Math.abs(A.left-G.left)}C+=u.offsetLeft+H.left-2*u.scrollLeft;F+=u.offsetTop+H.top-2*u.scrollTop}if(q&&q>0){F=Math.floor(F/q)*q}c.tooltip.calcTooltipPosition([C,F],j,i,B);return p}p.nvPointerEventsClass=l;p.content=function(z){if(!arguments.length){return t}t=z;return p};p.tooltipElem=function(){return o};p.contentGenerator=function(z){if(!arguments.length){return h}if(typeof z==="function"){h=z}return p};p.data=function(z){if(!arguments.length){return y}y=z;return p};p.gravity=function(z){if(!arguments.length){return j}j=z;return p};p.distance=function(z){if(!arguments.length){return i}i=z;return p};p.snapDistance=function(z){if(!arguments.length){return q}q=z;return p};p.classes=function(z){if(!arguments.length){return v}v=z;return p};p.chartContainer=function(z){if(!arguments.length){return u}u=z;return p};p.position=function(z){if(!arguments.length){return x}x.left=(typeof z.left!=="undefined")?z.left:x.left;x.top=(typeof z.top!=="undefined")?z.top:x.top;return p};p.fixedTop=function(z){if(!arguments.length){return g}g=z;return p};p.enabled=function(z){if(!arguments.length){return n}n=z;return p};p.valueFormatter=function(z){if(!arguments.length){return f}if(typeof z==="function"){f=z}return p};p.headerFormatter=function(z){if(!arguments.length){return s}if(typeof z==="function"){s=z}return p};p.id=function(){return r};return p};c.tooltip.show=function(m,i,l,k,j,h){var g=document.createElement("div");g.className="nvtooltip "+(h?h:"xy-tooltip");var f=j;if(!j||j.tagName.match(/g|svg/i)){f=document.getElementsByTagName("body")[0]}g.style.left=0;g.style.top=0;g.style.opacity=0;g.innerHTML=i;f.appendChild(g);if(j){m[0]=m[0]-j.scrollLeft;m[1]=m[1]-j.scrollTop}c.tooltip.calcTooltipPosition(m,l,k,g)};c.tooltip.findFirstNonSVGParent=function(f){while(f.tagName.match(/^g|svg$/i)!==null){f=f.parentNode}return f};c.tooltip.findTotalOffsetTop=function(f,h){var g=h;do{if(!isNaN(f.offsetTop)){g+=(f.offsetTop)}}while(f=f.offsetParent);return g};c.tooltip.findTotalOffsetLeft=function(g,f){var h=f;do{if(!isNaN(g.offsetLeft)){h+=(g.offsetLeft)}}while(g=g.offsetParent);return h};c.tooltip.calcTooltipPosition=function(r,u,p,g){var t=parseInt(g.offsetHeight),h=parseInt(g.offsetWidth),j=c.utils.windowSize().width,f=c.utils.windowSize().height,i=window.pageYOffset,l=window.pageXOffset,k,q;f=window.innerWidth>=document.body.scrollWidth?f:f-16;j=window.innerHeight>=document.body.scrollHeight?j:j-16;u=u||"s";p=p||20;var m=function(v){return c.tooltip.findTotalOffsetTop(v,q)};var s=function(v){return c.tooltip.findTotalOffsetLeft(v,k)};switch(u){case"e":k=r[0]-h-p;q=r[1]-(t/2);var o=s(g);var n=m(g);if(o<l){k=r[0]+p>l?r[0]+p:l-o+k}if(n<i){q=i-n+q}if(n+t>i+f){q=i+f-n+q-t}break;case"w":k=r[0]+p;q=r[1]-(t/2);var o=s(g);var n=m(g);if(o+h>j){k=r[0]-h-p}if(n<i){q=i+5}if(n+t>i+f){q=i+f-n+q-t}break;case"n":k=r[0]-(h/2)-5;q=r[1]+p;var o=s(g);var n=m(g);if(o<l){k=l+5}if(o+h>j){k=k-h/2+5}if(n+t>i+f){q=i+f-n+q-t}break;case"s":k=r[0]-(h/2);q=r[1]-t-p;var o=s(g);var n=m(g);if(o<l){k=l+5}if(o+h>j){k=k-h/2+5}if(i>n){q=i}break;case"none":k=r[0];q=r[1]-p;var o=s(g);var n=m(g);break}g.style.left=k+"px";g.style.top=q+"px";g.style.opacity=1;g.style.position="absolute";return g};c.tooltip.cleanup=function(){var f=document.getElementsByClassName("nvtooltip");var g=[];while(f.length){g.push(f[0]);f[0].style.transitionDelay="0 !important";f[0].style.opacity=0;f[0].className="nvtooltip-pending-removal"}setTimeout(function(){while(g.length){var h=g.pop();h.parentNode.removeChild(h)}},500)}})();c.utils.windowSize=function(){var f={width:640,height:480};if(document.body&&document.body.offsetWidth){f.width=document.body.offsetWidth;f.height=document.body.offsetHeight}if(document.compatMode=="CSS1Compat"&&document.documentElement&&document.documentElement.offsetWidth){f.width=document.documentElement.offsetWidth;f.height=document.documentElement.offsetHeight}if(window.innerWidth&&window.innerHeight){f.width=window.innerWidth;f.height=window.innerHeight}return(f)};c.utils.windowResize=function(f){if(f===undefined){return}var g=window.onresize;window.onresize=function(h){if(typeof g=="function"){g(h)}f(h)}};c.utils.getColor=function(f){if(!arguments.length){return c.utils.defaultColor()}if(Object.prototype.toString.call(f)==="[object Array]"){return function(h,g){return h.color||f[g%f.length]}}else{return f}};c.utils.defaultColor=function(){var f=d3.scale.category20().range();return function(h,g){return h.color||f[g%f.length]}};c.utils.customTheme=function(i,g,h){g=g||function(j){return j.key};h=h||d3.scale.category20().range();var f=h.length;return function(l,j){var k=g(l);if(!f){f=h.length}if(typeof i[k]!=="undefined"){return(typeof i[k]==="function")?i[k]():i[k]}else{return h[--f]}}};c.utils.pjax=function(f,g){d3.selectAll(f).on("click",function(){history.pushState(this.href,this.textContent,this.href);h(this.href);d3.event.preventDefault()});function h(i){d3.html(i,function(j){var k=d3.select(g).node();k.parentNode.replaceChild(d3.select(j).select(g).node(),k);c.utils.pjax(f,g)})}d3.select(window).on("popstate",function(){if(d3.event.state){h(d3.event.state)}})};c.utils.calcApproxTextWidth=function(f){if(typeof f.style==="function"&&typeof f.text==="function"){var h=parseInt(f.style("font-size").replace("px",""));var g=f.text().length;return g*h*0.5}return 0};c.utils.NaNtoZero=function(f){if(typeof f!=="number"||isNaN(f)||f===null||f===Infinity){return 0}return f};c.utils.optionsFunc=function(f){if(f){d3.map(f).forEach((function(g,h){if(typeof this[g]==="function"){this[g](h)}}).bind(this))}return this};c.models.axis=function(){var l=d3.svg.axis();var o={top:0,right:0,bottom:0,left:0},i=75,u=60,n=d3.scale.linear(),p=null,k=true,m=true,g=0,j=true,q=false,f=false,t=null,h=12;l.scale(n).orient("bottom").tickFormat(function(v){return v});var r;function s(v){v.each(function(H){var y=d3.select(this);var A=y.selectAll("g.nv-wrap.nv-axis").data([H]);var D=A.enter().append("g").attr("class","nvd3 nv-wrap nv-axis");var x=D.append("g");var J=A.select("g");if(t!==null){l.ticks(t)}else{if(l.orient()=="top"||l.orient()=="bottom"){l.ticks(Math.abs(n.range()[1]-n.range()[0])/100)}}J.transition().call(l);r=r||l.scale();var C=l.tickFormat();if(C==null){C=r.tickFormat()}var B=J.selectAll("text.nv-axislabel").data([p||null]);B.exit().remove();switch(l.orient()){case"top":B.enter().append("text").attr("class","nv-axislabel");var L=(n.range().length==2)?n.range()[1]:(n.range()[n.range().length-1]+(n.range()[1]-n.range()[0]));B.attr("text-anchor","middle").attr("y",0).attr("x",L/2);if(k){var I=A.selectAll("g.nv-axisMaxMin").data(n.domain());I.enter().append("g").attr("class","nv-axisMaxMin").append("text");I.exit().remove();I.attr("transform",function(M,w){return"translate("+n(M)+",0)"}).select("text").attr("dy","-0.5em").attr("y",-l.tickPadding()).attr("text-anchor","middle").text(function(N,M){var w=C(N);return(""+w).match("NaN")?"":w});I.transition().attr("transform",function(M,w){return"translate("+n.range()[w]+",0)"})}break;case"bottom":var G=36;var z=30;var E=J.selectAll("g").select("text");if(g%360){E.each(function(N,w){var M=this.getBBox().width;if(M>z){z=M}});var K=Math.abs(Math.sin(g*Math.PI/180));var G=(K?K*z:z)+30;E.attr("transform",function(N,M,w){return"rotate("+g+" 0,0)"}).style("text-anchor",g%360>0?"start":"end")}B.enter().append("text").attr("class","nv-axislabel");var L=(n.range().length==2)?n.range()[1]:(n.range()[n.range().length-1]+(n.range()[1]-n.range()[0]));B.attr("text-anchor","middle").attr("y",G).attr("x",L/2);if(k){var I=A.selectAll("g.nv-axisMaxMin").data([n.domain()[0],n.domain()[n.domain().length-1]]);I.enter().append("g").attr("class","nv-axisMaxMin").append("text");I.exit().remove();I.attr("transform",function(M,w){return"translate("+(n(M)+(f?n.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",l.tickPadding()).attr("transform",function(N,M,w){return"rotate("+g+" 0,0)"}).style("text-anchor",g?(g%360>0?"start":"end"):"middle").text(function(N,M){var w=C(N);return(""+w).match("NaN")?"":w});I.transition().attr("transform",function(M,w){return"translate("+(n(M)+(f?n.rangeBand()/2:0))+",0)"})}if(q){E.attr("transform",function(M,w){return"translate(0,"+(w%2==0?"0":"12")+")"})}break;case"right":B.enter().append("text").attr("class","nv-axislabel");B.style("text-anchor",j?"middle":"begin").attr("transform",j?"rotate(90)":"").attr("y",j?(-Math.max(o.right,i)+12):-10).attr("x",j?(n.range()[0]/2):l.tickPadding());if(k){var I=A.selectAll("g.nv-axisMaxMin").data(n.domain());I.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0);I.exit().remove();I.attr("transform",function(M,w){return"translate(0,"+n(M)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",l.tickPadding()).style("text-anchor","start").text(function(N,M){var w=C(N);return(""+w).match("NaN")?"":w});I.transition().attr("transform",function(M,w){return"translate(0,"+n.range()[w]+")"}).select("text").style("opacity",1)}break;case"left":B.enter().append("text").attr("class","nv-axislabel");B.style("text-anchor",j?"middle":"end").attr("transform",j?"rotate(-90)":"").attr("y",j?(-Math.max(o.left,i)+h):-10).attr("x",j?(-n.range()[0]/2):-l.tickPadding());if(k){var I=A.selectAll("g.nv-axisMaxMin").data(n.domain());I.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0);I.exit().remove();I.attr("transform",function(M,w){return"translate(0,"+r(M)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-l.tickPadding()).attr("text-anchor","end").text(function(N,M){var w=C(N);return(""+w).match("NaN")?"":w});I.transition().attr("transform",function(M,w){return"translate(0,"+n.range()[w]+")"}).select("text").style("opacity",1)}break}B.text(function(w){return w});if(k&&(l.orient()==="left"||l.orient()==="right")){J.selectAll("g").each(function(M,w){d3.select(this).select("text").attr("opacity",1);if(n(M)<n.range()[1]+10||n(M)>n.range()[0]-10){if(M>1e-10||M<-1e-10){d3.select(this).attr("opacity",0)}d3.select(this).select("text").attr("opacity",0)}});if(n.domain()[0]==n.domain()[1]&&n.domain()[0]==0){A.selectAll("g.nv-axisMaxMin").style("opacity",function(M,w){return !w?1:0})}}if(k&&(l.orient()==="top"||l.orient()==="bottom")){var F=[];A.selectAll("g.nv-axisMaxMin").each(function(N,w){try{if(w){F.push(n(N)-this.getBBox().width-4)}else{F.push(n(N)+this.getBBox().width+4)}}catch(M){if(w){F.push(n(N)-4)}else{F.push(n(N)+4)}}});J.selectAll("g").each(function(M,w){if(n(M)<F[0]||n(M)>F[1]){if(M>1e-10||M<-1e-10){d3.select(this).remove()}else{d3.select(this).select("text").remove()}}})}if(m){J.selectAll(".tick").filter(function(w){return !parseFloat(Math.round(w.__data__*100000)/1000000)&&(w.__data__!==undefined)}).classed("zero",true)}r=n.copy()});return s}s.axis=l;d3.rebind(s,l,"orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat");d3.rebind(s,n,"domain","range","rangeBand","rangeBands");s.options=c.utils.optionsFunc.bind(s);s.margin=function(v){if(!arguments.length){return o}o.top=typeof v.top!="undefined"?v.top:o.top;o.right=typeof v.right!="undefined"?v.right:o.right;o.bottom=typeof v.bottom!="undefined"?v.bottom:o.bottom;o.left=typeof v.left!="undefined"?v.left:o.left;return s};s.width=function(v){if(!arguments.length){return i}i=v;return s};s.ticks=function(v){if(!arguments.length){return t}t=v;return s};s.height=function(v){if(!arguments.length){return u}u=v;return s};s.axisLabel=function(v){if(!arguments.length){return p}p=v;return s};s.showMaxMin=function(v){if(!arguments.length){return k}k=v;return s};s.highlightZero=function(v){if(!arguments.length){return m}m=v;return s};s.scale=function(v){if(!arguments.length){return n}n=v;l.scale(n);f=typeof n.rangeBands==="function";d3.rebind(s,n,"domain","range","rangeBand","rangeBands");return s};s.rotateYLabel=function(v){if(!arguments.length){return j}j=v;return s};s.rotateLabels=function(v){if(!arguments.length){return g}g=v;return s};s.staggerLabels=function(v){if(!arguments.length){return q}q=v;return s};s.axisLabelDistance=function(v){if(!arguments.length){return h}h=v;return s};return s};c.models.historicalBar=function(){var l={top:0,right:0,bottom:0,left:0},p=960,n=500,o=Math.floor(Math.random()*10000),i=d3.scale.linear(),h=d3.scale.linear(),v=function(x){return x.x},u=function(x){return x.y},g=[],f=[0],j=false,z=true,t=c.utils.defaultColor(),r,q,m,s,A=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),w=true;function k(x){x.each(function(H){var K=p-l.left-l.right,D=n-l.top-l.bottom,B=d3.select(this);i.domain(r||d3.extent(H[0].values.map(v).concat(g)));if(j){i.range(m||[K*0.5/H[0].values.length,K*(H[0].values.length-0.5)/H[0].values.length])}else{i.range(m||[0,K])}h.domain(q||d3.extent(H[0].values.map(u).concat(f))).range(s||[D,0]);if(i.domain()[0]===i.domain()[1]){i.domain()[0]?i.domain([i.domain()[0]-i.domain()[0]*0.01,i.domain()[1]+i.domain()[1]*0.01]):i.domain([-1,1])}if(h.domain()[0]===h.domain()[1]){h.domain()[0]?h.domain([h.domain()[0]+h.domain()[0]*0.01,h.domain()[1]-h.domain()[1]*0.01]):h.domain([-1,1])}var C=B.selectAll("g.nv-wrap.nv-historicalBar-"+o).data([H[0].values]);var F=C.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+o);var E=F.append("defs");var y=F.append("g");var I=C.select("g");y.append("g").attr("class","nv-bars");C.attr("transform","translate("+l.left+","+l.top+")");B.on("click",function(M,L){A.chartClick({data:M,index:L,pos:d3.event,id:o})});E.append("clipPath").attr("id","nv-chart-clip-path-"+o).append("rect");C.select("#nv-chart-clip-path-"+o+" rect").attr("width",K).attr("height",D);I.attr("clip-path",z?"url(#nv-chart-clip-path-"+o+")":"");var J=C.select(".nv-bars").selectAll(".nv-bar").data(function(L){return L},function(M,L){return v(M,L)});J.exit().remove();var G=J.enter().append("rect").attr("x",0).attr("y",function(M,L){return c.utils.NaNtoZero(h(Math.max(0,u(M,L))))}).attr("height",function(M,L){return c.utils.NaNtoZero(Math.abs(h(u(M,L))-h(0)))}).attr("transform",function(M,L){return"translate("+(i(v(M,L))-K/H[0].values.length*0.45)+",0)"}).on("mouseover",function(M,L){if(!w){return}d3.select(this).classed("hover",true);A.elementMouseover({point:M,series:H[0],pos:[i(v(M,L)),h(u(M,L))],pointIndex:L,seriesIndex:0,e:d3.event})}).on("mouseout",function(M,L){if(!w){return}d3.select(this).classed("hover",false);A.elementMouseout({point:M,series:H[0],pointIndex:L,seriesIndex:0,e:d3.event})}).on("click",function(M,L){if(!w){return}A.elementClick({value:u(M,L),data:M,index:L,pos:[i(v(M,L)),h(u(M,L))],e:d3.event,id:o});d3.event.stopPropagation()}).on("dblclick",function(M,L){if(!w){return}A.elementDblClick({value:u(M,L),data:M,index:L,pos:[i(v(M,L)),h(u(M,L))],e:d3.event,id:o});d3.event.stopPropagation()});J.attr("fill",function(M,L){return t(M,L)}).attr("class",function(N,M,L){return(u(N,M)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+L+"-"+M}).transition().attr("transform",function(M,L){return"translate("+(i(v(M,L))-K/H[0].values.length*0.45)+",0)"}).attr("width",(K/H[0].values.length)*0.9);J.transition().attr("y",function(N,L){var M=u(N,L)<0?h(0):h(0)-h(u(N,L))<1?h(0)-1:h(u(N,L));return c.utils.NaNtoZero(M)}).attr("height",function(M,L){return c.utils.NaNtoZero(Math.max(Math.abs(h(u(M,L))-h(0)),1))})});return k}k.highlightPoint=function(y,x){d3.select(".nv-historicalBar-"+o).select(".nv-bars .nv-bar-0-"+y).classed("hover",x)};k.clearHighlights=function(){d3.select(".nv-historicalBar-"+o).select(".nv-bars .nv-bar.hover").classed("hover",false)};k.dispatch=A;k.options=c.utils.optionsFunc.bind(k);k.x=function(x){if(!arguments.length){return v}v=x;return k};k.y=function(x){if(!arguments.length){return u}u=x;return k};k.margin=function(x){if(!arguments.length){return l}l.top=typeof x.top!="undefined"?x.top:l.top;l.right=typeof x.right!="undefined"?x.right:l.right;l.bottom=typeof x.bottom!="undefined"?x.bottom:l.bottom;l.left=typeof x.left!="undefined"?x.left:l.left;return k};k.width=function(x){if(!arguments.length){return p}p=x;return k};k.height=function(x){if(!arguments.length){return n}n=x;return k};k.xScale=function(x){if(!arguments.length){return i}i=x;return k};k.yScale=function(x){if(!arguments.length){return h}h=x;return k};k.xDomain=function(x){if(!arguments.length){return r}r=x;return k};k.yDomain=function(x){if(!arguments.length){return q}q=x;return k};k.xRange=function(x){if(!arguments.length){return m}m=x;return k};k.yRange=function(x){if(!arguments.length){return s}s=x;return k};k.forceX=function(x){if(!arguments.length){return g}g=x;return k};k.forceY=function(x){if(!arguments.length){return f}f=x;return k};k.padData=function(x){if(!arguments.length){return j}j=x;return k};k.clipEdge=function(x){if(!arguments.length){return z}z=x;return k};k.color=function(x){if(!arguments.length){return t}t=c.utils.getColor(x);return k};k.id=function(x){if(!arguments.length){return o}o=x;return k};k.interactive=function(x){if(!arguments.length){return w}w=false;return k};return k};c.models.bullet=function(){var l={top:0,right:0,bottom:0,left:0},n="left",r=false,g=function(v){return v.ranges},m=function(v){return v.markers},f=function(v){return v.measures},p=function(v){return v.rangeLabels?v.rangeLabels:[]},t=function(v){return v.markerLabels?v.markerLabels:[]},i=function(v){return v.measureLabels?v.measureLabels:[]},o=[0],h=380,u=30,j=null,k=c.utils.getColor(["#1f77b4"]),q=d3.dispatch("elementMouseover","elementMouseout");function s(v){v.each(function(T,O){var w=h-l.left-l.right,x=u-l.top-l.bottom,L=d3.select(this);var U=g.call(this,T,O).slice().sort(d3.descending),M=m.call(this,T,O).slice().sort(d3.descending),J=f.call(this,T,O).slice().sort(d3.descending),K=p.call(this,T,O).slice(),B=t.call(this,T,O).slice(),R=i.call(this,T,O).slice();var Q=d3.scale.linear().domain(d3.extent(d3.merge([o,U]))).range(r?[w,0]:[0,w]);var S=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(Q.range());this.__chart__=Q;var z=d3.min(U),C=d3.max(U),y=U[1];var E=L.selectAll("g.nv-wrap.nv-bullet").data([T]);var A=E.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet");var N=A.append("g");var P=E.select("g");N.append("rect").attr("class","nv-range nv-rangeMax");N.append("rect").attr("class","nv-range nv-rangeAvg");N.append("rect").attr("class","nv-range nv-rangeMin");N.append("rect").attr("class","nv-measure");N.append("path").attr("class","nv-markerTriangle");E.attr("transform","translate("+l.left+","+l.top+")");var I=function(V){return Math.abs(S(V)-S(0))},G=function(V){return Math.abs(Q(V)-Q(0))};var H=function(V){return V<0?S(V):S(0)},F=function(V){return V<0?Q(V):Q(0)};P.select("rect.nv-rangeMax").attr("height",x).attr("width",G(C>0?C:z)).attr("x",F(C>0?C:z)).datum(C>0?C:z);P.select("rect.nv-rangeAvg").attr("height",x).attr("width",G(y)).attr("x",F(y)).datum(y);P.select("rect.nv-rangeMin").attr("height",x).attr("width",G(C)).attr("x",F(C)).attr("width",G(C>0?z:C)).attr("x",F(C>0?z:C)).datum(C>0?z:C);P.select("rect.nv-measure").style("fill",k).attr("height",x/3).attr("y",x/3).attr("width",J<0?Q(0)-Q(J[0]):Q(J[0])-Q(0)).attr("x",F(J)).on("mouseover",function(){q.elementMouseover({value:J[0],label:R[0]||"Current",pos:[Q(J[0]),x/2]})}).on("mouseout",function(){q.elementMouseout({value:J[0],label:R[0]||"Current"})});var D=x/6;if(M[0]){P.selectAll("path.nv-markerTriangle").attr("transform",function(V){return"translate("+Q(M[0])+","+(x/2)+")"}).attr("d","M0,"+D+"L"+D+","+(-D)+" "+(-D)+","+(-D)+"Z").on("mouseover",function(){q.elementMouseover({value:M[0],label:B[0]||"Previous",pos:[Q(M[0]),x/2]})}).on("mouseout",function(){q.elementMouseout({value:M[0],label:B[0]||"Previous"})})}else{P.selectAll("path.nv-markerTriangle").remove()}E.selectAll(".nv-range").on("mouseover",function(X,W){var V=K[W]||(!W?"Maximum":W==1?"Mean":"Minimum");q.elementMouseover({value:X,label:V,pos:[Q(X),x/2]})}).on("mouseout",function(X,W){var V=K[W]||(!W?"Maximum":W==1?"Mean":"Minimum");q.elementMouseout({value:X,label:V})})});return s}s.dispatch=q;s.options=c.utils.optionsFunc.bind(s);s.orient=function(v){if(!arguments.length){return n}n=v;r=n=="right"||n=="bottom";return s};s.ranges=function(v){if(!arguments.length){return g}g=v;return s};s.markers=function(v){if(!arguments.length){return m}m=v;return s};s.measures=function(v){if(!arguments.length){return f}f=v;return s};s.forceX=function(v){if(!arguments.length){return o}o=v;return s};s.width=function(v){if(!arguments.length){return h}h=v;return s};s.height=function(v){if(!arguments.length){return u}u=v;return s};s.margin=function(v){if(!arguments.length){return l}l.top=typeof v.top!="undefined"?v.top:l.top;l.right=typeof v.right!="undefined"?v.right:l.right;l.bottom=typeof v.bottom!="undefined"?v.bottom:l.bottom;l.left=typeof v.left!="undefined"?v.left:l.left;return s};s.tickFormat=function(v){if(!arguments.length){return j}j=v;return s};s.color=function(v){if(!arguments.length){return k}k=c.utils.getColor(v);return s};return s};c.models.bulletChart=function(){var f=c.models.bullet();var m="left",o=false,k={top:5,right:40,bottom:20,left:120},h=function(v){return v.ranges},l=function(v){return v.markers},g=function(v){return v.measures},i=null,t=55,j=null,q=true,u=function(w,v,B,A,z){return"<h3>"+v+"</h3><p>"+B+"</p>"},s="No Data Available.",n=d3.dispatch("tooltipShow","tooltipHide");var r=function(z,v){var y=z.pos[0]+(v.offsetLeft||0)+k.left,x=z.pos[1]+(v.offsetTop||0)+k.top,w=u(z.key,z.label,z.value,z,p);c.tooltip.show([y,x],w,z.value<0?"e":"w",null,v)};function p(v){v.each(function(Q,K){var G=d3.select(this);var w=(i||parseInt(G.style("width"))||960)-k.left-k.right,x=t-k.top-k.bottom,A=this;p.update=function(){p(v)};p.container=this;if(!Q||!h.call(this,Q,K)){var C=G.selectAll(".nv-noData").data([s]);C.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");C.attr("x",k.left+w/2).attr("y",18+k.top+x/2).text(function(U){return U});return p}else{G.selectAll(".nv-noData").remove()}var T=h.call(this,Q,K).slice().sort(d3.descending),I=l.call(this,Q,K).slice().sort(d3.descending),E=g.call(this,Q,K).slice().sort(d3.descending);var B=G.selectAll("g.nv-wrap.nv-bulletChart").data([Q]);var y=B.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart");var J=y.append("g");var N=B.select("g");J.append("g").attr("class","nv-bulletWrap");J.append("g").attr("class","nv-titles");B.attr("transform","translate("+k.left+","+k.top+")");var O=d3.scale.linear().domain([0,Math.max(T[0],I[0],E[0])]).range(o?[w,0]:[0,w]);var P=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(O.range());this.__chart__=O;var F=function(U){return Math.abs(P(U)-P(0))},D=function(U){return Math.abs(O(U)-O(0))};var S=J.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(t-k.top-k.bottom)/2+")");S.append("text").attr("class","nv-title").text(function(U){return U.title});S.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(U){return U.subtitle});f.width(w).height(x);var R=N.select(".nv-bulletWrap");d3.transition(R).call(f);var M=j||O.tickFormat(w/100);var L=N.selectAll("g.nv-tick").data(O.ticks(w/50),function(U){return this.textContent||M(U)});var H=L.enter().append("g").attr("class","nv-tick").attr("transform",function(U){return"translate("+P(U)+",0)"}).style("opacity",0.000001);H.append("line").attr("y1",x).attr("y2",x*7/6);H.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",x*7/6).text(M);var z=d3.transition(L).attr("transform",function(U){return"translate("+O(U)+",0)"}).style("opacity",1);z.select("line").attr("y1",x).attr("y2",x*7/6);z.select("text").attr("y",x*7/6);d3.transition(L.exit()).attr("transform",function(U){return"translate("+O(U)+",0)"}).style("opacity",0.000001).remove();n.on("tooltipShow",function(U){U.key=Q.title;if(q){r(U,A.parentNode)}})});d3.timer.flush();return p}f.dispatch.on("elementMouseover.tooltip",function(v){n.tooltipShow(v)});f.dispatch.on("elementMouseout.tooltip",function(v){n.tooltipHide(v)});n.on("tooltipHide",function(){if(q){c.tooltip.cleanup()}});p.dispatch=n;p.bullet=f;d3.rebind(p,f,"color");p.options=c.utils.optionsFunc.bind(p);p.orient=function(v){if(!arguments.length){return m}m=v;o=m=="right"||m=="bottom";return p};p.ranges=function(v){if(!arguments.length){return h}h=v;return p};p.markers=function(v){if(!arguments.length){return l}l=v;return p};p.measures=function(v){if(!arguments.length){return g}g=v;return p};p.width=function(v){if(!arguments.length){return i}i=v;return p};p.height=function(v){if(!arguments.length){return t}t=v;return p};p.margin=function(v){if(!arguments.length){return k}k.top=typeof v.top!="undefined"?v.top:k.top;k.right=typeof v.right!="undefined"?v.right:k.right;k.bottom=typeof v.bottom!="undefined"?v.bottom:k.bottom;k.left=typeof v.left!="undefined"?v.left:k.left;return p};p.tickFormat=function(v){if(!arguments.length){return j}j=v;return p};p.tooltips=function(v){if(!arguments.length){return q}q=v;return p};p.tooltipContent=function(v){if(!arguments.length){return u}u=v;return p};p.noData=function(v){if(!arguments.length){return s}s=v;return p};return p};c.models.cumulativeLineChart=function(){var g=c.models.line(),t=c.models.axis(),f=c.models.axis(),i=c.models.legend(),C=c.models.legend(),H=c.interactiveGuideline();var E={top:30,right:30,bottom:50,left:60},J=c.utils.defaultColor(),I=null,F=null,K=true,L=true,z=true,s=false,h=true,M=true,w=false,r=true,o=function(Q,P,T,S,R){return"<h3>"+Q+"</h3><p>"+T+" at "+P+"</p>"},v,u,G=g.id(),n={index:0,rescaleY:r},p=null,m="No Data Available.",k=function(x){return x.average},O=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),B=250,j=false;t.orient("bottom").tickPadding(7);f.orient((s)?"right":"left");C.updateState(false);var A=d3.scale.linear(),q={i:0,x:0};var l=function(U,Q){var T=U.pos[0]+(Q.offsetLeft||0),S=U.pos[1]+(Q.offsetTop||0),P=t.tickFormat()(g.x()(U.point,U.pointIndex)),V=f.tickFormat()(g.y()(U.point,U.pointIndex)),R=o(U.series.key,P,V,U,D);c.tooltip.show([T,S],R,null,null,Q)};function D(x){x.each(function(al){var Y=d3.select(this).classed("nv-chart-"+G,true),V=this;var P=(I||parseInt(Y.style("width"))||960)-E.left-E.right,R=(F||parseInt(Y.style("height"))||400)-E.top-E.bottom;D.update=function(){Y.transition().duration(B).call(D)};D.container=this;n.disabled=al.map(function(an){return !!an.disabled});if(!p){var am;p={};for(am in n){if(n[am] instanceof Array){p[am]=n[am].slice(0)}else{p[am]=n[am]}}}var ak=d3.behavior.drag().on("dragstart",ai).on("drag",aj).on("dragend",ad);function ai(ao,an){d3.select(D.container).style("cursor","ew-resize")}function aj(ao,an){q.x=d3.event.x;q.i=Math.round(A.invert(q.x));ab()}function ad(ao,an){d3.select(D.container).style("cursor","auto");n.index=q.i;O.stateChange(n)}if(!al||!al.length||!al.filter(function(an){return an.values.length}).length){var X=Y.selectAll(".nv-noData").data([m]);X.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");X.attr("x",E.left+P/2).attr("y",E.top+R/2).text(function(an){return an});return D}else{Y.selectAll(".nv-noData").remove()}v=g.xScale();u=g.yScale();if(!r){var Q=al.filter(function(an){return !an.disabled}).map(function(ap,ao){var an=d3.extent(ap.values,g.y());if(an[0]<-0.95){an[0]=-0.95}return[(an[0]-an[1])/(1+an[1]),(an[1]-an[0])/(1+an[0])]});var S=[d3.min(Q,function(an){return an[0]}),d3.max(Q,function(an){return an[1]})];g.yDomain(S)}else{g.yDomain(null)}A.domain([0,al[0].values.length-1]).range([0,P]).clamp(true);var al=N(q.i,al);var ag=(w)?"none":"all";var W=Y.selectAll("g.nv-wrap.nv-cumulativeLine").data([al]);var aa=W.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g");var ah=W.select("g");aa.append("g").attr("class","nv-interactive");aa.append("g").attr("class","nv-x nv-axis").style("pointer-events","none");aa.append("g").attr("class","nv-y nv-axis");aa.append("g").attr("class","nv-background");aa.append("g").attr("class","nv-linesWrap").style("pointer-events",ag);aa.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none");aa.append("g").attr("class","nv-legendWrap");aa.append("g").attr("class","nv-controlsWrap");if(K){i.width(P);ah.select(".nv-legendWrap").datum(al).call(i);if(E.top!=i.height()){E.top=i.height();R=(F||parseInt(Y.style("height"))||400)-E.top-E.bottom}ah.select(".nv-legendWrap").attr("transform","translate(0,"+(-E.top)+")")}if(M){var U=[{key:"Re-scale y-axis",disabled:!r}];C.width(140).color(["#444","#444","#444"]).rightAlign(false).margin({top:5,right:0,bottom:5,left:20});ah.select(".nv-controlsWrap").datum(U).attr("transform","translate(0,"+(-E.top)+")").call(C)}W.attr("transform","translate("+E.left+","+E.top+")");if(s){ah.select(".nv-y.nv-axis").attr("transform","translate("+P+",0)")}var y=al.filter(function(an){return an.tempDisabled});W.select(".tempDisabled").remove();if(y.length){W.append("text").attr("class","tempDisabled").attr("x",P/2).attr("y","-.71em").style("text-anchor","end").text(y.map(function(an){return an.key}).join(", ")+" values cannot be calculated for this time period.")}if(w){H.width(P).height(R).margin({left:E.left,top:E.top}).svgContainer(Y).xScale(v);W.select(".nv-interactive").call(H)}aa.select(".nv-background").append("rect");ah.select(".nv-background rect").attr("width",P).attr("height",R);g.y(function(an){return an.display.y}).width(P).height(R).color(al.map(function(ao,an){return ao.color||J(ao,an)}).filter(function(ao,an){return !al[an].disabled&&!al[an].tempDisabled}));var ac=ah.select(".nv-linesWrap").datum(al.filter(function(an){return !an.disabled&&!an.tempDisabled}));ac.call(g);al.forEach(function(ao,an){ao.seriesIndex=an});var af=al.filter(function(an){return !an.disabled&&!!k(an)});var ae=ah.select(".nv-avgLinesWrap").selectAll("line").data(af,function(an){return an.key});var T=function(ao){var an=u(k(ao));if(an<0){return 0}if(an>R){return R}return an};ae.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(ao,an){return g.color()(ao,ao.seriesIndex)}).attr("x1",0).attr("x2",P).attr("y1",T).attr("y2",T);ae.style("stroke-opacity",function(ao){var an=u(k(ao));if(an<0||an>R){return 0}return 1}).attr("x1",0).attr("x2",P).attr("y1",T).attr("y2",T);ae.exit().remove();var Z=ac.selectAll(".nv-indexLine").data([q]);Z.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",0.5).style("pointer-events","all").call(ak);Z.attr("transform",function(an){return"translate("+A(an.i)+",0)"}).attr("height",R);if(L){t.scale(v).ticks(Math.min(al[0].values.length,P/70)).tickSize(-R,0);ah.select(".nv-x.nv-axis").attr("transform","translate(0,"+u.range()[0]+")");d3.transition(ah.select(".nv-x.nv-axis")).call(t)}if(z){f.scale(u).ticks(R/36).tickSize(-P,0);d3.transition(ah.select(".nv-y.nv-axis")).call(f)}function ab(){Z.data([q]);var an=D.transitionDuration();D.transitionDuration(0);D.update();D.transitionDuration(an)}ah.select(".nv-background rect").on("click",function(){q.x=d3.mouse(this)[0];q.i=Math.round(A.invert(q.x));n.index=q.i;O.stateChange(n);ab()});g.dispatch.on("elementClick",function(an){q.i=an.pointIndex;q.x=A(q.i);n.index=q.i;O.stateChange(n);ab()});C.dispatch.on("legendClick",function(ao,an){ao.disabled=!ao.disabled;r=!ao.disabled;n.rescaleY=r;O.stateChange(n);D.update()});i.dispatch.on("stateChange",function(an){n.disabled=an.disabled;O.stateChange(n);D.update()});H.dispatch.on("elementMousemove",function(au){g.clearHighlights();var ar,ax,ap,an=[];al.filter(function(az,ay){az.seriesIndex=ay;return !az.disabled}).forEach(function(aA,az){ax=c.interactiveBisect(aA.values,au.pointXValue,D.x());g.highlightPoint(az,ax,true);var ay=aA.values[ax];if(typeof ay==="undefined"){return}if(typeof ar==="undefined"){ar=ay}if(typeof ap==="undefined"){ap=D.xScale()(D.x()(ay,ax))}an.push({key:aA.key,value:D.y()(ay,ax),color:J(aA,aA.seriesIndex)})});if(an.length>2){var aw=D.yScale().invert(au.mouseY);var ao=Math.abs(D.yScale().domain()[0]-D.yScale().domain()[1]);var at=0.03*ao;var av=c.nearestValueIndex(an.map(function(ay){return ay.value}),aw,at);if(av!==null){an[av].highlight=true}}var aq=t.tickFormat()(D.x()(ar,ax),ax);H.tooltip.position({left:ap+E.left,top:au.mouseY+E.top}).chartContainer(V.parentNode).enabled(h).valueFormatter(function(az,ay){return f.tickFormat()(az)}).data({value:aq,series:an})();H.renderGuideLine(ap)});H.dispatch.on("elementMouseout",function(an){O.tooltipHide();g.clearHighlights()});O.on("tooltipShow",function(an){if(h){l(an,V.parentNode)}});O.on("changeState",function(an){if(typeof an.disabled!=="undefined"){al.forEach(function(ap,ao){ap.disabled=an.disabled[ao]});n.disabled=an.disabled}if(typeof an.index!=="undefined"){q.i=an.index;q.x=A(q.i);n.index=an.index;Z.data([q])}if(typeof an.rescaleY!=="undefined"){r=an.rescaleY}D.update()})});return D}g.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+E.left,x.pos[1]+E.top];O.tooltipShow(x)});g.dispatch.on("elementMouseout.tooltip",function(x){O.tooltipHide(x)});O.on("tooltipHide",function(){if(h){c.tooltip.cleanup()}});D.dispatch=O;D.lines=g;D.legend=i;D.xAxis=t;D.yAxis=f;D.interactiveLayer=H;d3.rebind(D,g,"defined","isArea","x","y","xScale","yScale","size","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","useVoronoi","id");D.options=c.utils.optionsFunc.bind(D);D.margin=function(x){if(!arguments.length){return E}E.top=typeof x.top!="undefined"?x.top:E.top;E.right=typeof x.right!="undefined"?x.right:E.right;E.bottom=typeof x.bottom!="undefined"?x.bottom:E.bottom;E.left=typeof x.left!="undefined"?x.left:E.left;return D};D.width=function(x){if(!arguments.length){return I}I=x;return D};D.height=function(x){if(!arguments.length){return F}F=x;return D};D.color=function(x){if(!arguments.length){return J}J=c.utils.getColor(x);i.color(J);return D};D.rescaleY=function(x){if(!arguments.length){return r}r=x;return D};D.showControls=function(x){if(!arguments.length){return M}M=x;return D};D.useInteractiveGuideline=function(x){if(!arguments.length){return w}w=x;if(x===true){D.interactive(false);D.useVoronoi(false)}return D};D.showLegend=function(x){if(!arguments.length){return K}K=x;return D};D.showXAxis=function(x){if(!arguments.length){return L}L=x;return D};D.showYAxis=function(x){if(!arguments.length){return z}z=x;return D};D.rightAlignYAxis=function(x){if(!arguments.length){return s}s=x;f.orient((x)?"right":"left");return D};D.tooltips=function(x){if(!arguments.length){return h}h=x;return D};D.tooltipContent=function(x){if(!arguments.length){return o}o=x;return D};D.state=function(x){if(!arguments.length){return n}n=x;return D};D.defaultState=function(x){if(!arguments.length){return p}p=x;return D};D.noData=function(x){if(!arguments.length){return m}m=x;return D};D.average=function(x){if(!arguments.length){return k}k=x;return D};D.transitionDuration=function(x){if(!arguments.length){return B}B=x;return D};D.noErrorCheck=function(x){if(!arguments.length){return j}j=x;return D};function N(x,y){return y.map(function(Q,S){if(!Q.values){return Q}var P=Q.values[x];if(P==null){return Q}var R=g.y()(P,x);if(R<-0.95&&!j){Q.tempDisabled=true;return Q}Q.tempDisabled=false;Q.values=Q.values.map(function(T,U){T.display={y:(g.y()(T,U)-R)/(1+R)};return T});return Q})}return D};c.models.discreteBar=function(){var l={top:0,right:0,bottom:0,left:0},p=960,n=500,o=Math.floor(Math.random()*10000),j=d3.scale.ordinal(),i=d3.scale.linear(),w=function(x){return x.x},u=function(x){return x.y},g=[0],t=c.utils.defaultColor(),z=false,h=d3.format(",.2f"),r,q,m,s,B=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),A="discreteBar";var v,f;function k(x){x.each(function(J){var M=p-l.left-l.right,F=n-l.top-l.bottom,C=d3.select(this);J.forEach(function(O,N){O.values.forEach(function(P){P.series=N})});var E=(r&&q)?[]:J.map(function(N){return N.values.map(function(P,O){return{x:w(P,O),y:u(P,O),y0:P.y0}})});j.domain(r||d3.merge(E).map(function(N){return N.x})).rangeBands(m||[0,M],0.1);i.domain(q||d3.extent(d3.merge(E).map(function(N){return N.y}).concat(g)));if(z){i.range(s||[F-(i.domain()[0]<0?12:0),i.domain()[1]>0?12:0])}else{i.range(s||[F,0])}v=v||j;f=f||i.copy().range([i(0),i(0)]);var D=C.selectAll("g.nv-wrap.nv-discretebar").data([J]);var H=D.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar");var y=H.append("g");var K=D.select("g");y.append("g").attr("class","nv-groups");D.attr("transform","translate("+l.left+","+l.top+")");var G=D.select(".nv-groups").selectAll(".nv-group").data(function(N){return N},function(N){return N.key});G.enter().append("g").style("stroke-opacity",0.000001).style("fill-opacity",0.000001);G.exit().transition().style("stroke-opacity",0.000001).style("fill-opacity",0.000001).remove();G.attr("class",function(O,N){return"nv-group nv-series-"+N}).classed("hover",function(N){return N.hover});G.transition().style("stroke-opacity",1).style("fill-opacity",0.75);var L=G.selectAll("g.nv-bar").data(function(N){return N.values});L.exit().remove();var I=L.enter().append("g").attr("transform",function(P,O,N){return"translate("+(j(w(P,O))+j.rangeBand()*0.05)+", "+i(0)+")"}).on("mouseover",function(O,N){d3.select(this).classed("hover",true);B.elementMouseover({value:u(O,N),point:O,series:J[O.series],pos:[j(w(O,N))+(j.rangeBand()*(O.series+0.5)/J.length),i(u(O,N))],pointIndex:N,seriesIndex:O.series,e:d3.event})}).on("mouseout",function(O,N){d3.select(this).classed("hover",false);B.elementMouseout({value:u(O,N),point:O,series:J[O.series],pointIndex:N,seriesIndex:O.series,e:d3.event})}).on("click",function(O,N){B.elementClick({value:u(O,N),point:O,series:J[O.series],pos:[j(w(O,N))+(j.rangeBand()*(O.series+0.5)/J.length),i(u(O,N))],pointIndex:N,seriesIndex:O.series,e:d3.event});d3.event.stopPropagation()}).on("dblclick",function(O,N){B.elementDblClick({value:u(O,N),point:O,series:J[O.series],pos:[j(w(O,N))+(j.rangeBand()*(O.series+0.5)/J.length),i(u(O,N))],pointIndex:N,seriesIndex:O.series,e:d3.event});d3.event.stopPropagation()});I.append("rect").attr("height",0).attr("width",j.rangeBand()*0.9/J.length);if(z){I.append("text").attr("text-anchor","middle");L.select("text").text(function(O,N){return h(u(O,N))}).transition().attr("x",j.rangeBand()*0.9/2).attr("y",function(O,N){return u(O,N)<0?i(u(O,N))-i(0)+12:-4})}else{L.selectAll("text").remove()}L.attr("class",function(O,N){return u(O,N)<0?"nv-bar negative":"nv-bar positive"}).style("fill",function(O,N){return O.color||t(O,N)}).style("stroke",function(O,N){return O.color||t(O,N)}).select("rect").attr("class",A).transition().attr("width",j.rangeBand()*0.9/J.length);L.transition().attr("transform",function(Q,N){var P=j(w(Q,N))+j.rangeBand()*0.05,O=u(Q,N)<0?i(0):i(0)-i(u(Q,N))<1?i(0)-1:i(u(Q,N));return"translate("+P+", "+O+")"}).select("rect").attr("height",function(O,N){return Math.max(Math.abs(i(u(O,N))-i((q&&q[0])||0))||1)});v=j.copy();f=i.copy()});return k}k.dispatch=B;k.options=c.utils.optionsFunc.bind(k);k.x=function(x){if(!arguments.length){return w}w=x;return k};k.y=function(x){if(!arguments.length){return u}u=x;return k};k.margin=function(x){if(!arguments.length){return l}l.top=typeof x.top!="undefined"?x.top:l.top;l.right=typeof x.right!="undefined"?x.right:l.right;l.bottom=typeof x.bottom!="undefined"?x.bottom:l.bottom;l.left=typeof x.left!="undefined"?x.left:l.left;return k};k.width=function(x){if(!arguments.length){return p}p=x;return k};k.height=function(x){if(!arguments.length){return n}n=x;return k};k.xScale=function(x){if(!arguments.length){return j}j=x;return k};k.yScale=function(x){if(!arguments.length){return i}i=x;return k};k.xDomain=function(x){if(!arguments.length){return r}r=x;return k};k.yDomain=function(x){if(!arguments.length){return q}q=x;return k};k.xRange=function(x){if(!arguments.length){return m}m=x;return k};k.yRange=function(x){if(!arguments.length){return s}s=x;return k};k.forceY=function(x){if(!arguments.length){return g}g=x;return k};k.color=function(x){if(!arguments.length){return t}t=c.utils.getColor(x);return k};k.id=function(x){if(!arguments.length){return o}o=x;return k};k.showValues=function(x){if(!arguments.length){return z}z=x;return k};k.valueFormat=function(x){if(!arguments.length){return h}h=x;return k};k.rectClass=function(x){if(!arguments.length){return A}A=x;return k};return k};c.models.discreteBarChart=function(){var z=c.models.discreteBar(),m=c.models.axis(),f=c.models.axis();var s={top:15,right:10,bottom:50,left:60},u=null,t=null,v=c.utils.getColor(),w=true,p=true,l=false,h=false,g=true,k=function(C,B,F,E,D){return"<h3>"+B+"</h3><p>"+F+"</p>"},o,n,j="No Data Available.",A=d3.dispatch("tooltipShow","tooltipHide","beforeUpdate"),q=250;m.orient("bottom").highlightZero(false).showMaxMin(false).tickFormat(function(x){return x});f.orient((l)?"right":"left").tickFormat(d3.format(",.1f"));var i=function(G,C){var F=G.pos[0]+(C.offsetLeft||0),E=G.pos[1]+(C.offsetTop||0),B=m.tickFormat()(z.x()(G.point,G.pointIndex)),H=f.tickFormat()(z.y()(G.point,G.pointIndex)),D=k(G.series.key,B,H,G,r);c.tooltip.show([F,E],D,G.value<0?"n":"s",null,C)};function r(x){x.each(function(H){var B=d3.select(this),K=this;var L=(u||parseInt(B.style("width"))||960)-s.left-s.right,F=(t||parseInt(B.style("height"))||400)-s.top-s.bottom;r.update=function(){A.beforeUpdate();B.transition().duration(q).call(r)};r.container=this;if(!H||!H.length||!H.filter(function(M){return M.values.length}).length){var C=B.selectAll(".nv-noData").data([j]);C.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");C.attr("x",s.left+L/2).attr("y",s.top+F/2).text(function(M){return M});return r}else{B.selectAll(".nv-noData").remove()}o=z.xScale();n=z.yScale().clamp(true);var D=B.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([H]);var y=D.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g");var E=y.append("defs");var I=D.select("g");y.append("g").attr("class","nv-x nv-axis");y.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");y.append("g").attr("class","nv-barsWrap");I.attr("transform","translate("+s.left+","+s.top+")");if(l){I.select(".nv-y.nv-axis").attr("transform","translate("+L+",0)")}z.width(L).height(F);var J=I.select(".nv-barsWrap").datum(H.filter(function(M){return !M.disabled}));J.transition().call(z);E.append("clipPath").attr("id","nv-x-label-clip-"+z.id()).append("rect");I.select("#nv-x-label-clip-"+z.id()+" rect").attr("width",o.rangeBand()*(h?2:1)).attr("height",16).attr("x",-o.rangeBand()/(h?1:2));if(w){m.scale(o).ticks(L/100).tickSize(-F,0);I.select(".nv-x.nv-axis").attr("transform","translate(0,"+(n.range()[0]+((z.showValues()&&n.domain()[0]<0)?16:0))+")");I.select(".nv-x.nv-axis").transition().call(m);var G=I.select(".nv-x.nv-axis").selectAll("g");if(h){G.selectAll("text").attr("transform",function(O,N,M){return"translate(0,"+(M%2==0?"5":"17")+")"})}}if(p){f.scale(n).ticks(F/36).tickSize(-L,0);I.select(".nv-y.nv-axis").transition().call(f)}I.select(".nv-zeroLine line").attr("x1",0).attr("x2",L).attr("y1",n(0)).attr("y2",n(0));A.on("tooltipShow",function(M){if(g){i(M,K.parentNode)}})});return r}z.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+s.left,x.pos[1]+s.top];A.tooltipShow(x)});z.dispatch.on("elementMouseout.tooltip",function(x){A.tooltipHide(x)});A.on("tooltipHide",function(){if(g){c.tooltip.cleanup()}});r.dispatch=A;r.discretebar=z;r.xAxis=m;r.yAxis=f;d3.rebind(r,z,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","id","showValues","valueFormat");r.options=c.utils.optionsFunc.bind(r);r.margin=function(x){if(!arguments.length){return s}s.top=typeof x.top!="undefined"?x.top:s.top;s.right=typeof x.right!="undefined"?x.right:s.right;s.bottom=typeof x.bottom!="undefined"?x.bottom:s.bottom;s.left=typeof x.left!="undefined"?x.left:s.left;return r};r.width=function(x){if(!arguments.length){return u}u=x;return r};r.height=function(x){if(!arguments.length){return t}t=x;return r};r.color=function(x){if(!arguments.length){return v}v=c.utils.getColor(x);z.color(v);return r};r.showXAxis=function(x){if(!arguments.length){return w}w=x;return r};r.showYAxis=function(x){if(!arguments.length){return p}p=x;return r};r.rightAlignYAxis=function(x){if(!arguments.length){return l}l=x;f.orient((x)?"right":"left");return r};r.staggerLabels=function(x){if(!arguments.length){return h}h=x;return r};r.tooltips=function(x){if(!arguments.length){return g}g=x;return r};r.tooltipContent=function(x){if(!arguments.length){return k}k=x;return r};r.noData=function(x){if(!arguments.length){return j}j=x;return r};r.transitionDuration=function(x){if(!arguments.length){return q}q=x;return r};return r};c.models.distribution=function(){var i={top:0,right:0,bottom:0,left:0},f=400,o=8,g="x",l=function(p){return p[g]},j=c.utils.defaultColor(),h=d3.scale.linear(),k;var m;function n(p){p.each(function(u){var v=f-(g==="x"?i.left+i.right:i.top+i.bottom),y=g=="x"?"y":"x",r=d3.select(this);m=m||h;var s=r.selectAll("g.nv-distribution").data([u]);var t=s.enter().append("g").attr("class","nvd3 nv-distribution");var q=t.append("g");var w=s.select("g");s.attr("transform","translate("+i.left+","+i.top+")");var z=w.selectAll("g.nv-dist").data(function(A){return A},function(A){return A.key});z.enter().append("g");z.attr("class",function(B,A){return"nv-dist nv-series-"+A}).style("stroke",function(B,A){return j(B,A)});var x=z.selectAll("line.nv-dist"+g).data(function(A){return A.values});x.enter().append("line").attr(g+"1",function(B,A){return m(l(B,A))}).attr(g+"2",function(B,A){return m(l(B,A))});z.exit().selectAll("line.nv-dist"+g).transition().attr(g+"1",function(B,A){return h(l(B,A))}).attr(g+"2",function(B,A){return h(l(B,A))}).style("stroke-opacity",0).remove();x.attr("class",function(B,A){return"nv-dist"+g+" nv-dist"+g+"-"+A}).attr(y+"1",0).attr(y+"2",o);x.transition().attr(g+"1",function(B,A){return h(l(B,A))}).attr(g+"2",function(B,A){return h(l(B,A))});m=h.copy()});return n}n.options=c.utils.optionsFunc.bind(n);n.margin=function(p){if(!arguments.length){return i}i.top=typeof p.top!="undefined"?p.top:i.top;i.right=typeof p.right!="undefined"?p.right:i.right;i.bottom=typeof p.bottom!="undefined"?p.bottom:i.bottom;i.left=typeof p.left!="undefined"?p.left:i.left;return n};n.width=function(p){if(!arguments.length){return f}f=p;return n};n.axis=function(p){if(!arguments.length){return g}g=p;return n};n.size=function(p){if(!arguments.length){return o}o=p;return n};n.getData=function(p){if(!arguments.length){return l}l=d3.functor(p);return n};n.scale=function(p){if(!arguments.length){return h}h=p;return n};n.color=function(p){if(!arguments.length){return j}j=c.utils.getColor(p);return n};return n};c.models.historicalBarChart=function(){var w=c.models.historicalBar(),o=c.models.axis(),f=c.models.axis(),h=c.models.legend();var u={top:30,right:90,bottom:50,left:90},A=c.utils.defaultColor(),z=null,v=null,B=false,C=true,r=true,n=false,g=true,k=function(F,E,I,H,G){return"<h3>"+F+"</h3><p>"+I+" at "+E+"</p>"},q,p,l={},m=null,j="No Data Available.",D=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),s=250;o.orient("bottom").tickPadding(7);f.orient((n)?"right":"left");var i=function(H,M){if(M){var F=d3.select(M).select("svg");var N=(F.node())?F.attr("viewBox"):null;if(N){N=N.split(" ");var I=parseInt(F.style("width"))/N[2];H.pos[0]=H.pos[0]*I;H.pos[1]=H.pos[1]*I}}var E=H.pos[0]+(M.offsetLeft||0),K=H.pos[1]+(M.offsetTop||0),L=o.tickFormat()(w.x()(H.point,H.pointIndex)),J=f.tickFormat()(w.y()(H.point,H.pointIndex)),G=k(H.series.key,L,J,H,t);c.tooltip.show([E,K],G,null,null,M)};function t(x){x.each(function(I){var E=d3.select(this),L=this;var N=(z||parseInt(E.style("width"))||960)-u.left-u.right,H=(v||parseInt(E.style("height"))||400)-u.top-u.bottom;t.update=function(){E.transition().duration(s).call(t)};t.container=this;l.disabled=I.map(function(O){return !!O.disabled});if(!m){var M;m={};for(M in l){if(l[M] instanceof Array){m[M]=l[M].slice(0)}else{m[M]=l[M]}}}if(!I||!I.length||!I.filter(function(O){return O.values.length}).length){var F=E.selectAll(".nv-noData").data([j]);F.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");F.attr("x",u.left+N/2).attr("y",u.top+H/2).text(function(O){return O});return t}else{E.selectAll(".nv-noData").remove()}q=w.xScale();p=w.yScale();var G=E.selectAll("g.nv-wrap.nv-historicalBarChart").data([I]);var y=G.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g");var J=G.select("g");y.append("g").attr("class","nv-x nv-axis");y.append("g").attr("class","nv-y nv-axis");y.append("g").attr("class","nv-barsWrap");y.append("g").attr("class","nv-legendWrap");if(B){h.width(N);J.select(".nv-legendWrap").datum(I).call(h);if(u.top!=h.height()){u.top=h.height();H=(v||parseInt(E.style("height"))||400)-u.top-u.bottom}G.select(".nv-legendWrap").attr("transform","translate(0,"+(-u.top)+")")}G.attr("transform","translate("+u.left+","+u.top+")");if(n){J.select(".nv-y.nv-axis").attr("transform","translate("+N+",0)")}w.width(N).height(H).color(I.map(function(P,O){return P.color||A(P,O)}).filter(function(P,O){return !I[O].disabled}));var K=J.select(".nv-barsWrap").datum(I.filter(function(O){return !O.disabled}));K.transition().call(w);if(C){o.scale(q).tickSize(-H,0);J.select(".nv-x.nv-axis").attr("transform","translate(0,"+p.range()[0]+")");J.select(".nv-x.nv-axis").transition().call(o)}if(r){f.scale(p).ticks(H/36).tickSize(-N,0);J.select(".nv-y.nv-axis").transition().call(f)}h.dispatch.on("legendClick",function(P,O){P.disabled=!P.disabled;if(!I.filter(function(Q){return !Q.disabled}).length){I.map(function(Q){Q.disabled=false;G.selectAll(".nv-series").classed("disabled",false);return Q})}l.disabled=I.map(function(Q){return !!Q.disabled});D.stateChange(l);x.transition().call(t)});h.dispatch.on("legendDblclick",function(O){I.forEach(function(P){P.disabled=true});O.disabled=false;l.disabled=I.map(function(P){return !!P.disabled});D.stateChange(l);t.update()});D.on("tooltipShow",function(O){if(g){i(O,L.parentNode)}});D.on("changeState",function(O){if(typeof O.disabled!=="undefined"){I.forEach(function(Q,P){Q.disabled=O.disabled[P]});l.disabled=O.disabled}t.update()})});return t}w.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+u.left,x.pos[1]+u.top];D.tooltipShow(x)});w.dispatch.on("elementMouseout.tooltip",function(x){D.tooltipHide(x)});D.on("tooltipHide",function(){if(g){c.tooltip.cleanup()}});t.dispatch=D;t.bars=w;t.legend=h;t.xAxis=o;t.yAxis=f;d3.rebind(t,w,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id","interpolate","highlightPoint","clearHighlights","interactive");t.options=c.utils.optionsFunc.bind(t);t.margin=function(x){if(!arguments.length){return u}u.top=typeof x.top!="undefined"?x.top:u.top;u.right=typeof x.right!="undefined"?x.right:u.right;u.bottom=typeof x.bottom!="undefined"?x.bottom:u.bottom;u.left=typeof x.left!="undefined"?x.left:u.left;return t};t.width=function(x){if(!arguments.length){return z}z=x;return t};t.height=function(x){if(!arguments.length){return v}v=x;return t};t.color=function(x){if(!arguments.length){return A}A=c.utils.getColor(x);h.color(A);return t};t.showLegend=function(x){if(!arguments.length){return B}B=x;return t};t.showXAxis=function(x){if(!arguments.length){return C}C=x;return t};t.showYAxis=function(x){if(!arguments.length){return r}r=x;return t};t.rightAlignYAxis=function(x){if(!arguments.length){return n}n=x;f.orient((x)?"right":"left");return t};t.tooltips=function(x){if(!arguments.length){return g}g=x;return t};t.tooltipContent=function(x){if(!arguments.length){return k}k=x;return t};t.state=function(x){if(!arguments.length){return l}l=x;return t};t.defaultState=function(x){if(!arguments.length){return m}m=x;return t};t.noData=function(x){if(!arguments.length){return j}j=x;return t};t.transitionDuration=function(x){if(!arguments.length){return s}s=x;return t};return t};c.models.indentedTree=function(){var j={top:0,right:0,bottom:0,left:0},h=960,u=500,k=c.utils.defaultColor(),g=Math.floor(Math.random()*10000),m=true,v=false,t="No Data Available.",n=20,i=[{key:"key",label:"Name",type:"text"}],r=null,f="images/grey-plus.png",l="images/grey-minus.png",o=d3.dispatch("elementClick","elementDblclick","elementMouseover","elementMouseout"),q=function(w){return w.url};var s=0;function p(w){w.each(function(M){var N=1,B=d3.select(this);var C=d3.layout.tree().children(function(P){return P.values}).size([u,n]);p.update=function(){B.transition().duration(600).call(p)};if(!M[0]){M[0]={key:t}}var E=C.nodes(M[0]);var A=d3.select(this).selectAll("div").data([[E]]);var y=A.enter().append("div").attr("class","nvd3 nv-wrap nv-indentedtree");var O=y.append("table");var J=A.select("table").attr("width","100%").attr("class",r);if(m){var I=O.append("thead");var L=I.append("tr");i.forEach(function(P){L.append("th").attr("width",P.width?P.width:"10%").style("text-align",P.type=="numeric"?"right":"left").append("span").text(P.label)})}var x=J.selectAll("tbody").data(function(P){return P});x.enter().append("tbody");N=d3.max(E,function(P){return P.depth});C.size([u,N*n]);var G=x.selectAll("tr").data(function(P){return P.filter(function(Q){return(v&&!Q.children)?v(Q):true})},function(Q,P){return Q.id||(Q.id||++s)});G.exit().remove();G.select("img.nv-treeicon").attr("src",K).classed("folded",D);var z=G.enter().append("tr");i.forEach(function(Q,P){var R=z.append("td").style("padding-left",function(S){return(P?0:S.depth*n+12+(K(S)?0:16))+"px"},"important").style("text-align",Q.type=="numeric"?"right":"left");if(P==0){R.append("img").classed("nv-treeicon",true).classed("nv-folded",D).attr("src",K).style("width","14px").style("height","14px").style("padding","0 1px").style("display",function(S){return K(S)?"inline-block":"none"}).on("click",F)}R.each(function(S){if(!P&&q(S)){d3.select(this).append("a").attr("href",q).attr("class",d3.functor(Q.classes)).append("span")}else{d3.select(this).append("span")}d3.select(this).select("span").attr("class",d3.functor(Q.classes)).text(function(T){return Q.format?Q.format(T):(T[Q.key]||"-")})});if(Q.showCount){R.append("span").attr("class","nv-childrenCount");G.selectAll("span.nv-childrenCount").text(function(S){return((S.values&&S.values.length)||(S._values&&S._values.length))?"("+((S.values&&(S.values.filter(function(T){return v?v(T):true}).length))||(S._values&&S._values.filter(function(T){return v?v(T):true}).length)||0)+")":""})}});G.order().on("click",function(P){o.elementClick({row:this,data:P,pos:[P.x,P.y]})}).on("dblclick",function(P){o.elementDblclick({row:this,data:P,pos:[P.x,P.y]})}).on("mouseover",function(P){o.elementMouseover({row:this,data:P,pos:[P.x,P.y]})}).on("mouseout",function(P){o.elementMouseout({row:this,data:P,pos:[P.x,P.y]})});function F(R,Q,P){d3.event.stopPropagation();if(d3.event.shiftKey&&!P){d3.event.shiftKey=false;R.values&&R.values.forEach(function(S){if(S.values||S._values){F(S,0,true)}});return true}if(!H(R)){return true}if(R.values){R._values=R.values;R.values=null}else{R.values=R._values;R._values=null}p.update()}function K(P){return(P._values&&P._values.length)?f:(P.values&&P.values.length)?l:""}function D(P){return(P._values&&P._values.length)}function H(Q){var P=Q.values||Q._values;return(P&&P.length)}});return p}p.options=c.utils.optionsFunc.bind(p);p.margin=function(w){if(!arguments.length){return j}j.top=typeof w.top!="undefined"?w.top:j.top;j.right=typeof w.right!="undefined"?w.right:j.right;j.bottom=typeof w.bottom!="undefined"?w.bottom:j.bottom;j.left=typeof w.left!="undefined"?w.left:j.left;return p};p.width=function(w){if(!arguments.length){return h}h=w;return p};p.height=function(w){if(!arguments.length){return u}u=w;return p};p.color=function(w){if(!arguments.length){return k}k=c.utils.getColor(w);scatter.color(k);return p};p.id=function(w){if(!arguments.length){return g}g=w;return p};p.header=function(w){if(!arguments.length){return m}m=w;return p};p.noData=function(w){if(!arguments.length){return t}t=w;return p};p.filterZero=function(w){if(!arguments.length){return v}v=w;return p};p.columns=function(w){if(!arguments.length){return i}i=w;return p};p.tableClass=function(w){if(!arguments.length){return r}r=w;return p};p.iconOpen=function(w){if(!arguments.length){return f}f=w;return p};p.iconClose=function(w){if(!arguments.length){return l}l=w;return p};p.getUrl=function(w){if(!arguments.length){return q}q=w;return p};return p};c.models.legend=function(){var i={top:5,right:0,bottom:5,left:0},g=400,o=20,k=function(q){return q.key},j=c.utils.defaultColor(),m=true,h=true,p=true,f=false,l=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange");function n(q){q.each(function(K){var r=g-i.left-i.right,C=d3.select(this);var A=C.selectAll("g.nv-legend").data([K]);var G=A.enter().append("g").attr("class","nvd3 nv-legend").append("g");var J=A.select("g");A.attr("transform","translate("+i.left+","+i.top+")");var B=J.selectAll(".nv-series").data(function(L){return L});var v=B.enter().append("g").attr("class","nv-series").on("mouseover",function(M,L){l.legendMouseover(M,L)}).on("mouseout",function(M,L){l.legendMouseout(M,L)}).on("click",function(M,L){l.legendClick(M,L);if(p){if(f){K.forEach(function(N){N.disabled=true});M.disabled=false}else{M.disabled=!M.disabled;if(K.every(function(N){return N.disabled})){K.forEach(function(N){N.disabled=false})}}l.stateChange({disabled:K.map(function(N){return !!N.disabled})})}}).on("dblclick",function(M,L){l.legendDblclick(M,L);if(p){K.forEach(function(N){N.disabled=true});M.disabled=false;l.stateChange({disabled:K.map(function(N){return !!N.disabled})})}});v.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5);v.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");B.classed("disabled",function(L){return L.disabled});B.exit().remove();B.select("circle").style("fill",function(M,L){return M.color||j(M,L)}).style("stroke",function(M,L){return M.color||j(M,L)});B.select("text").text(k);if(m){var u=[];B.each(function(P,N){var M=d3.select(this).select("text");var L;try{L=M.getComputedTextLength();if(L<=0){throw Error()}}catch(O){L=c.utils.calcApproxTextWidth(M)}u.push(L+28)});var y=0;var F=0;var D=[];while(F<r&&y<u.length){D[y]=u[y];F+=u[y++]}if(y===0){y=1}while(F>r&&y>1){D=[];y--;for(var H=0;H<u.length;H++){if(u[H]>(D[H%y]||0)){D[H%y]=u[H]}}F=D.reduce(function(M,N,L,O){return M+N})}var s=[];for(var I=0,z=0;I<y;I++){s[I]=z;z+=D[I]}B.attr("transform",function(M,L){return"translate("+s[L%y]+","+(5+Math.floor(L/y)*20)+")"});if(h){J.attr("transform","translate("+(g-i.right-F)+","+i.top+")")}else{J.attr("transform","translate(0,"+i.top+")")}o=i.top+i.bottom+(Math.ceil(u.length/y)*20)}else{var w=5,x=5,E=0,t;B.attr("transform",function(N,L){var M=d3.select(this).select("text").node().getComputedTextLength()+28;t=x;if(g<i.left+i.right+t+M){x=t=5;w+=20}x+=M;if(x>E){E=x}return"translate("+t+","+w+")"});J.attr("transform","translate("+(g-i.right-E)+","+i.top+")");o=i.top+i.bottom+w+15}});return n}n.dispatch=l;n.options=c.utils.optionsFunc.bind(n);n.margin=function(q){if(!arguments.length){return i}i.top=typeof q.top!="undefined"?q.top:i.top;i.right=typeof q.right!="undefined"?q.right:i.right;i.bottom=typeof q.bottom!="undefined"?q.bottom:i.bottom;i.left=typeof q.left!="undefined"?q.left:i.left;return n};n.width=function(q){if(!arguments.length){return g}g=q;return n};n.height=function(q){if(!arguments.length){return o}o=q;return n};n.key=function(q){if(!arguments.length){return k}k=q;return n};n.color=function(q){if(!arguments.length){return j}j=c.utils.getColor(q);return n};n.align=function(q){if(!arguments.length){return m}m=q;return n};n.rightAlign=function(q){if(!arguments.length){return h}h=q;return n};n.updateState=function(q){if(!arguments.length){return p}p=q;return n};n.radioButtonMode=function(q){if(!arguments.length){return f}f=q;return n};return n};c.models.line=function(){var f=c.models.scatter();var j={top:0,right:0,bottom:0,left:0},g=960,u=500,k=c.utils.defaultColor(),t=function(v){return v.x},s=function(v){return v.y},i=function(w,v){return !isNaN(s(w,v))&&s(w,v)!==null},n=function(v){return v.area},r=false,p,o,l="linear";f.size(16).sizeDomain([16,256]);var h,q;function m(v){v.each(function(F){var I=g-j.left-j.right,A=u-j.top-j.bottom,x=d3.select(this);p=f.xScale();o=f.yScale();h=h||p;q=q||o;var y=x.selectAll("g.nv-wrap.nv-line").data([F]);var D=y.enter().append("g").attr("class","nvd3 nv-wrap nv-line");var B=D.append("defs");var w=D.append("g");var G=y.select("g");w.append("g").attr("class","nv-groups");w.append("g").attr("class","nv-scatterWrap");y.attr("transform","translate("+j.left+","+j.top+")");f.width(I).height(A);var z=y.select(".nv-scatterWrap");z.transition().call(f);B.append("clipPath").attr("id","nv-edge-clip-"+f.id()).append("rect");y.select("#nv-edge-clip-"+f.id()+" rect").attr("width",I).attr("height",(A>0)?A:0);G.attr("clip-path",r?"url(#nv-edge-clip-"+f.id()+")":"");z.attr("clip-path",r?"url(#nv-edge-clip-"+f.id()+")":"");var C=y.select(".nv-groups").selectAll(".nv-group").data(function(J){return J},function(J){return J.key});C.enter().append("g").style("stroke-opacity",0.000001).style("fill-opacity",0.000001);C.exit().remove();C.attr("class",function(K,J){return"nv-group nv-series-"+J}).classed("hover",function(J){return J.hover}).style("fill",function(K,J){return k(K,J)}).style("stroke",function(K,J){return k(K,J)});C.transition().style("stroke-opacity",1).style("fill-opacity",0.5);var H=C.selectAll("path.nv-area").data(function(J){return n(J)?[J]:[]});H.enter().append("path").attr("class","nv-area").attr("d",function(J){return d3.svg.area().interpolate(l).defined(i).x(function(L,K){return c.utils.NaNtoZero(h(t(L,K)))}).y0(function(L,K){return c.utils.NaNtoZero(q(s(L,K)))}).y1(function(L,K){return q(o.domain()[0]<=0?o.domain()[1]>=0?0:o.domain()[1]:o.domain()[0])}).apply(this,[J.values])});C.exit().selectAll("path.nv-area").remove();H.transition().attr("d",function(J){return d3.svg.area().interpolate(l).defined(i).x(function(L,K){return c.utils.NaNtoZero(p(t(L,K)))}).y0(function(L,K){return c.utils.NaNtoZero(o(s(L,K)))}).y1(function(L,K){return o(o.domain()[0]<=0?o.domain()[1]>=0?0:o.domain()[1]:o.domain()[0])}).apply(this,[J.values])});var E=C.selectAll("path.nv-line").data(function(J){return[J.values]});E.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(l).defined(i).x(function(K,J){return c.utils.NaNtoZero(h(t(K,J)))}).y(function(K,J){return c.utils.NaNtoZero(q(s(K,J)))}));E.transition().attr("d",d3.svg.line().interpolate(l).defined(i).x(function(K,J){return c.utils.NaNtoZero(p(t(K,J)))}).y(function(K,J){return c.utils.NaNtoZero(o(s(K,J)))}));h=p.copy();q=o.copy()});return m}m.dispatch=f.dispatch;m.scatter=f;d3.rebind(m,f,"id","interactive","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","forceX","forceY","forceSize","clipVoronoi","useVoronoi","clipRadius","padData","highlightPoint","clearHighlights");m.options=c.utils.optionsFunc.bind(m);m.margin=function(v){if(!arguments.length){return j}j.top=typeof v.top!="undefined"?v.top:j.top;j.right=typeof v.right!="undefined"?v.right:j.right;j.bottom=typeof v.bottom!="undefined"?v.bottom:j.bottom;j.left=typeof v.left!="undefined"?v.left:j.left;return m};m.width=function(v){if(!arguments.length){return g}g=v;return m};m.height=function(v){if(!arguments.length){return u}u=v;return m};m.x=function(v){if(!arguments.length){return t}t=v;f.x(v);return m};m.y=function(v){if(!arguments.length){return s}s=v;f.y(v);return m};m.clipEdge=function(v){if(!arguments.length){return r}r=v;return m};m.color=function(v){if(!arguments.length){return k}k=c.utils.getColor(v);f.color(k);return m};m.interpolate=function(v){if(!arguments.length){return l}l=v;return m};m.defined=function(v){if(!arguments.length){return i}i=v;return m};m.isArea=function(v){if(!arguments.length){return n}n=d3.functor(v);return m};return m};c.models.lineChart=function(){var g=c.models.line(),p=c.models.axis(),f=c.models.axis(),i=c.models.legend(),A=c.interactiveGuideline();var w={top:30,right:20,bottom:50,left:60},C=c.utils.defaultColor(),B=null,z=null,D=true,E=true,t=true,o=false,s=false,h=true,m=function(H,G,K,J,I){return"<h3>"+H+"</h3><p>"+K+" at "+G+"</p>"},r,q,l={},n=null,k="No Data Available.",F=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),u=250;p.orient("bottom").tickPadding(7);f.orient((o)?"right":"left");var j=function(L,H){var K=L.pos[0]+(H.offsetLeft||0),J=L.pos[1]+(H.offsetTop||0),G=p.tickFormat()(g.x()(L.point,L.pointIndex)),M=f.tickFormat()(g.y()(L.point,L.pointIndex)),I=m(L.series.key,G,M,L,v);c.tooltip.show([K,J],I,null,null,H)};function v(x){x.each(function(L){var H=d3.select(this),N=this;var P=(B||parseInt(H.style("width"))||960)-w.left-w.right,K=(z||parseInt(H.style("height"))||400)-w.top-w.bottom;v.update=function(){H.transition().duration(u).call(v)};v.container=this;l.disabled=L.map(function(Q){return !!Q.disabled});if(!n){var O;n={};for(O in l){if(l[O] instanceof Array){n[O]=l[O].slice(0)}else{n[O]=l[O]}}}if(!L||!L.length||!L.filter(function(Q){return Q.values.length}).length){var I=H.selectAll(".nv-noData").data([k]);I.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");I.attr("x",w.left+P/2).attr("y",w.top+K/2).text(function(Q){return Q});return v}else{H.selectAll(".nv-noData").remove()}r=g.xScale();q=g.yScale();var J=H.selectAll("g.nv-wrap.nv-lineChart").data([L]);var y=J.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g");var M=J.select("g");y.append("rect").style("opacity",0);y.append("g").attr("class","nv-x nv-axis");y.append("g").attr("class","nv-y nv-axis");y.append("g").attr("class","nv-linesWrap");y.append("g").attr("class","nv-legendWrap");y.append("g").attr("class","nv-interactive");M.select("rect").attr("width",P).attr("height",(K>0)?K:0);if(D){i.width(P);M.select(".nv-legendWrap").datum(L).call(i);if(w.top!=i.height()){w.top=i.height();K=(z||parseInt(H.style("height"))||400)-w.top-w.bottom}J.select(".nv-legendWrap").attr("transform","translate(0,"+(-w.top)+")")}J.attr("transform","translate("+w.left+","+w.top+")");if(o){M.select(".nv-y.nv-axis").attr("transform","translate("+P+",0)")}if(s){A.width(P).height(K).margin({left:w.left,top:w.top}).svgContainer(H).xScale(r);J.select(".nv-interactive").call(A)}g.width(P).height(K).color(L.map(function(R,Q){return R.color||C(R,Q)}).filter(function(R,Q){return !L[Q].disabled}));var G=M.select(".nv-linesWrap").datum(L.filter(function(Q){return !Q.disabled}));G.transition().call(g);if(E){p.scale(r).ticks(P/100).tickSize(-K,0);M.select(".nv-x.nv-axis").attr("transform","translate(0,"+q.range()[0]+")");M.select(".nv-x.nv-axis").transition().call(p)}if(t){f.scale(q).ticks(K/36).tickSize(-P,0);M.select(".nv-y.nv-axis").transition().call(f)}i.dispatch.on("stateChange",function(Q){l=Q;F.stateChange(l);v.update()});A.dispatch.on("elementMousemove",function(W){g.clearHighlights();var U,Z,S,Q=[];L.filter(function(ab,aa){ab.seriesIndex=aa;return !ab.disabled}).forEach(function(ac,ab){Z=c.interactiveBisect(ac.values,W.pointXValue,v.x());g.highlightPoint(ab,Z,true);var aa=ac.values[Z];if(typeof aa==="undefined"){return}if(typeof U==="undefined"){U=aa}if(typeof S==="undefined"){S=v.xScale()(v.x()(aa,Z))}Q.push({key:ac.key,value:v.y()(aa,Z),color:C(ac,ac.seriesIndex)})});if(Q.length>2){var Y=v.yScale().invert(W.mouseY);var R=Math.abs(v.yScale().domain()[0]-v.yScale().domain()[1]);var V=0.03*R;var X=c.nearestValueIndex(Q.map(function(aa){return aa.value}),Y,V);if(X!==null){Q[X].highlight=true}}var T=p.tickFormat()(v.x()(U,Z));A.tooltip.position({left:S+w.left,top:W.mouseY+w.top}).chartContainer(N.parentNode).enabled(h).valueFormatter(function(ab,aa){return f.tickFormat()(ab)}).data({value:T,series:Q})();A.renderGuideLine(S)});A.dispatch.on("elementMouseout",function(Q){F.tooltipHide();g.clearHighlights()});F.on("tooltipShow",function(Q){if(h){j(Q,N.parentNode)}});F.on("changeState",function(Q){if(typeof Q.disabled!=="undefined"&&L.length===Q.disabled.length){L.forEach(function(S,R){S.disabled=Q.disabled[R]});l.disabled=Q.disabled}v.update()})});return v}g.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+w.left,x.pos[1]+w.top];F.tooltipShow(x)});g.dispatch.on("elementMouseout.tooltip",function(x){F.tooltipHide(x)});F.on("tooltipHide",function(){if(h){c.tooltip.cleanup()}});v.dispatch=F;v.lines=g;v.legend=i;v.xAxis=p;v.yAxis=f;v.interactiveLayer=A;d3.rebind(v,g,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","useVoronoi","id","interpolate");v.options=c.utils.optionsFunc.bind(v);v.margin=function(x){if(!arguments.length){return w}w.top=typeof x.top!="undefined"?x.top:w.top;w.right=typeof x.right!="undefined"?x.right:w.right;w.bottom=typeof x.bottom!="undefined"?x.bottom:w.bottom;w.left=typeof x.left!="undefined"?x.left:w.left;return v};v.width=function(x){if(!arguments.length){return B}B=x;return v};v.height=function(x){if(!arguments.length){return z}z=x;return v};v.color=function(x){if(!arguments.length){return C}C=c.utils.getColor(x);i.color(C);return v};v.showLegend=function(x){if(!arguments.length){return D}D=x;return v};v.showXAxis=function(x){if(!arguments.length){return E}E=x;return v};v.showYAxis=function(x){if(!arguments.length){return t}t=x;return v};v.rightAlignYAxis=function(x){if(!arguments.length){return o}o=x;f.orient((x)?"right":"left");return v};v.useInteractiveGuideline=function(x){if(!arguments.length){return s}s=x;if(x===true){v.interactive(false);v.useVoronoi(false)}return v};v.tooltips=function(x){if(!arguments.length){return h}h=x;return v};v.tooltipContent=function(x){if(!arguments.length){return m}m=x;return v};v.state=function(x){if(!arguments.length){return l}l=x;return v};v.defaultState=function(x){if(!arguments.length){return n}n=x;return v};v.noData=function(x){if(!arguments.length){return k}k=x;return v};v.transitionDuration=function(x){if(!arguments.length){return u}u=x;return v};return v};c.models.linePlusBarChart=function(){var f=c.models.line(),w=c.models.historicalBar(),q=c.models.axis(),s=c.models.axis(),i=c.models.axis(),h=c.models.legend();var u={top:30,right:60,bottom:50,left:60},y=null,v=null,B=function(x){return x.x},A=function(x){return x.y},z=c.utils.defaultColor(),C=true,g=true,o=function(F,E,I,H,G){return"<h3>"+F+"</h3><p>"+I+" at "+E+"</p>"},r,k,j,n={},p=null,m="No Data Available.",D=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState");w.padData(true);f.clipEdge(false).padData(true);q.orient("bottom").tickPadding(7).highlightZero(false);s.orient("left");i.orient("right");var l=function(J,F){var I=J.pos[0]+(F.offsetLeft||0),H=J.pos[1]+(F.offsetTop||0),E=q.tickFormat()(f.x()(J.point,J.pointIndex)),K=(J.series.bar?s:i).tickFormat()(f.y()(J.point,J.pointIndex)),G=o(J.series.key,E,K,J,t);c.tooltip.show([I,H],G,J.value<0?"n":"s",null,F)};function t(x){x.each(function(L){var G=d3.select(this),O=this;var Q=(y||parseInt(G.style("width"))||960)-u.left-u.right,J=(v||parseInt(G.style("height"))||400)-u.top-u.bottom;t.update=function(){G.transition().call(t)};n.disabled=L.map(function(S){return !!S.disabled});if(!p){var P;p={};for(P in n){if(n[P] instanceof Array){p[P]=n[P].slice(0)}else{p[P]=n[P]}}}if(!L||!L.length||!L.filter(function(S){return S.values.length}).length){var H=G.selectAll(".nv-noData").data([m]);H.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");H.attr("x",u.left+Q/2).attr("y",u.top+J/2).text(function(S){return S});return t}else{G.selectAll(".nv-noData").remove()}var R=L.filter(function(S){return !S.disabled&&S.bar});var K=L.filter(function(S){return !S.bar});r=K.filter(function(S){return !S.disabled}).length&&K.filter(function(S){return !S.disabled})[0].values.length?f.xScale():w.xScale();k=w.yScale();j=f.yScale();var I=d3.select(this).selectAll("g.nv-wrap.nv-linePlusBar").data([L]);var E=I.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g");var M=I.select("g");E.append("g").attr("class","nv-x nv-axis");E.append("g").attr("class","nv-y1 nv-axis");E.append("g").attr("class","nv-y2 nv-axis");E.append("g").attr("class","nv-barsWrap");E.append("g").attr("class","nv-linesWrap");E.append("g").attr("class","nv-legendWrap");if(C){h.width(Q/2);M.select(".nv-legendWrap").datum(L.map(function(S){S.originalKey=S.originalKey===undefined?S.key:S.originalKey;S.key=S.originalKey+(S.bar?" (left axis)":" (right axis)");return S})).call(h);if(u.top!=h.height()){u.top=h.height();J=(v||parseInt(G.style("height"))||400)-u.top-u.bottom}M.select(".nv-legendWrap").attr("transform","translate("+(Q/2)+","+(-u.top)+")")}I.attr("transform","translate("+u.left+","+u.top+")");f.width(Q).height(J).color(L.map(function(T,S){return T.color||z(T,S)}).filter(function(T,S){return !L[S].disabled&&!L[S].bar}));w.width(Q).height(J).color(L.map(function(T,S){return T.color||z(T,S)}).filter(function(T,S){return !L[S].disabled&&L[S].bar}));var N=M.select(".nv-barsWrap").datum(R.length?R:[{values:[]}]);var F=M.select(".nv-linesWrap").datum(K[0]&&!K[0].disabled?K:[{values:[]}]);d3.transition(N).call(w);d3.transition(F).call(f);q.scale(r).ticks(Q/100).tickSize(-J,0);M.select(".nv-x.nv-axis").attr("transform","translate(0,"+k.range()[0]+")");d3.transition(M.select(".nv-x.nv-axis")).call(q);s.scale(k).ticks(J/36).tickSize(-Q,0);d3.transition(M.select(".nv-y1.nv-axis")).style("opacity",R.length?1:0).call(s);i.scale(j).ticks(J/36).tickSize(R.length?0:-Q,0);M.select(".nv-y2.nv-axis").style("opacity",K.length?1:0).attr("transform","translate("+Q+",0)");d3.transition(M.select(".nv-y2.nv-axis")).call(i);h.dispatch.on("stateChange",function(S){n=S;D.stateChange(n);t.update()});D.on("tooltipShow",function(S){if(g){l(S,O.parentNode)}});D.on("changeState",function(S){if(typeof S.disabled!=="undefined"){L.forEach(function(U,T){U.disabled=S.disabled[T]});n.disabled=S.disabled}t.update()})});return t}f.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+u.left,x.pos[1]+u.top];D.tooltipShow(x)});f.dispatch.on("elementMouseout.tooltip",function(x){D.tooltipHide(x)});w.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+u.left,x.pos[1]+u.top];D.tooltipShow(x)});w.dispatch.on("elementMouseout.tooltip",function(x){D.tooltipHide(x)});D.on("tooltipHide",function(){if(g){c.tooltip.cleanup()}});t.dispatch=D;t.legend=h;t.lines=f;t.bars=w;t.xAxis=q;t.y1Axis=s;t.y2Axis=i;d3.rebind(t,f,"defined","size","clipVoronoi","interpolate");t.options=c.utils.optionsFunc.bind(t);t.x=function(x){if(!arguments.length){return B}B=x;f.x(x);w.x(x);return t};t.y=function(x){if(!arguments.length){return A}A=x;f.y(x);w.y(x);return t};t.margin=function(x){if(!arguments.length){return u}u.top=typeof x.top!="undefined"?x.top:u.top;u.right=typeof x.right!="undefined"?x.right:u.right;u.bottom=typeof x.bottom!="undefined"?x.bottom:u.bottom;u.left=typeof x.left!="undefined"?x.left:u.left;return t};t.width=function(x){if(!arguments.length){return y}y=x;return t};t.height=function(x){if(!arguments.length){return v}v=x;return t};t.color=function(x){if(!arguments.length){return z}z=c.utils.getColor(x);h.color(z);return t};t.showLegend=function(x){if(!arguments.length){return C}C=x;return t};t.tooltips=function(x){if(!arguments.length){return g}g=x;return t};t.tooltipContent=function(x){if(!arguments.length){return o}o=x;return t};t.state=function(x){if(!arguments.length){return n}n=x;return t};t.defaultState=function(x){if(!arguments.length){return p}p=x;return t};t.noData=function(x){if(!arguments.length){return m}m=x;return t};return t};c.models.lineWithFocusChart=function(){var h=c.models.line(),q=c.models.line(),r=c.models.axis(),f=c.models.axis(),H=c.models.axis(),k=c.models.axis(),i=c.models.legend(),j=d3.svg.brush();var A={top:30,right:30,bottom:30,left:60},u={top:0,right:30,bottom:20,left:60},D=c.utils.defaultColor(),C=null,B=null,o=100,t,s,E,l,F=true,w=null,g=true,p=function(J,I,M,L,K){return"<h3>"+J+"</h3><p>"+M+" at "+I+"</p>"},n="No Data Available.",G=d3.dispatch("tooltipShow","tooltipHide","brush"),v=250;h.clipEdge(true);q.interactive(false);r.orient("bottom").tickPadding(5);f.orient("left");H.orient("bottom").tickPadding(5);k.orient("left");var m=function(N,J){var M=N.pos[0]+(J.offsetLeft||0),L=N.pos[1]+(J.offsetTop||0),I=r.tickFormat()(h.x()(N.point,N.pointIndex)),O=f.tickFormat()(h.y()(N.point,N.pointIndex)),K=p(N.series.key,I,O,N,z);c.tooltip.show([M,L],K,null,null,J)};function z(x){x.each(function(Z){var Q=d3.select(this),M=this;var y=(C||parseInt(Q.style("width"))||960)-A.left-A.right,N=(B||parseInt(Q.style("height"))||400)-A.top-A.bottom-o,L=o-u.top-u.bottom;z.update=function(){Q.transition().duration(v).call(z)};z.container=this;if(!Z||!Z.length||!Z.filter(function(aa){return aa.values.length}).length){var P=Q.selectAll(".nv-noData").data([n]);P.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");P.attr("x",A.left+y/2).attr("y",A.top+N/2).text(function(aa){return aa});return z}else{Q.selectAll(".nv-noData").remove()}t=h.xScale();s=h.yScale();E=q.xScale();l=q.yScale();var O=Q.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([Z]);var T=O.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g");var V=O.select("g");T.append("g").attr("class","nv-legendWrap");var K=T.append("g").attr("class","nv-focus");K.append("g").attr("class","nv-x nv-axis");K.append("g").attr("class","nv-y nv-axis");K.append("g").attr("class","nv-linesWrap");var I=T.append("g").attr("class","nv-context");I.append("g").attr("class","nv-x nv-axis");I.append("g").attr("class","nv-y nv-axis");I.append("g").attr("class","nv-linesWrap");I.append("g").attr("class","nv-brushBackground");I.append("g").attr("class","nv-x nv-brush");if(F){i.width(y);V.select(".nv-legendWrap").datum(Z).call(i);if(A.top!=i.height()){A.top=i.height();N=(B||parseInt(Q.style("height"))||400)-A.top-A.bottom-o}V.select(".nv-legendWrap").attr("transform","translate(0,"+(-A.top)+")")}O.attr("transform","translate("+A.left+","+A.top+")");h.width(y).height(N).color(Z.map(function(ab,aa){return ab.color||D(ab,aa)}).filter(function(ab,aa){return !Z[aa].disabled}));q.defined(h.defined()).width(y).height(L).color(Z.map(function(ab,aa){return ab.color||D(ab,aa)}).filter(function(ab,aa){return !Z[aa].disabled}));V.select(".nv-context").attr("transform","translate(0,"+(N+A.bottom+u.top)+")");var J=V.select(".nv-context .nv-linesWrap").datum(Z.filter(function(aa){return !aa.disabled}));d3.transition(J).call(q);r.scale(t).ticks(y/100).tickSize(-N,0);f.scale(s).ticks(N/36).tickSize(-y,0);V.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+N+")");j.x(E).on("brush",function(){var aa=z.transitionDuration();z.transitionDuration(0);S();z.transitionDuration(aa)});if(w){j.extent(w)}var X=V.select(".nv-brushBackground").selectAll("g").data([w||j.extent()]);var W=X.enter().append("g");W.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",L);W.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",L);var Y=V.select(".nv-x.nv-brush").call(j);Y.selectAll("rect").attr("height",L);Y.selectAll(".resize").append("path").attr("d",R);S();H.scale(E).ticks(y/100).tickSize(-L,0);V.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+l.range()[0]+")");d3.transition(V.select(".nv-context .nv-x.nv-axis")).call(H);k.scale(l).ticks(L/36).tickSize(-y,0);d3.transition(V.select(".nv-context .nv-y.nv-axis")).call(k);V.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+l.range()[0]+")");i.dispatch.on("stateChange",function(aa){z.update()});G.on("tooltipShow",function(aa){if(g){m(aa,M.parentNode)}});function R(ac){var ab=+(ac=="e"),aa=ab?1:-1,ad=L/3;return"M"+(0.5*aa)+","+ad+"A6,6 0 0 "+ab+" "+(6.5*aa)+","+(ad+6)+"V"+(2*ad-6)+"A6,6 0 0 "+ab+" "+(0.5*aa)+","+(2*ad)+"ZM"+(2.5*aa)+","+(ad+8)+"V"+(2*ad-8)+"M"+(4.5*aa)+","+(ad+8)+"V"+(2*ad-8)}function U(){if(!j.empty()){j.extent(w)}X.data([j.empty()?E.domain():w]).each(function(ad,aa){var ab=E(ad[0])-t.range()[0],ac=t.range()[1]-E(ad[1]);d3.select(this).select(".left").attr("width",ab<0?0:ab);d3.select(this).select(".right").attr("x",E(ad[1])).attr("width",ac<0?0:ac)})}function S(){w=j.empty()?null:j.extent();var ab=j.empty()?E.domain():j.extent();if(Math.abs(ab[0]-ab[1])<=1){return}G.brush({extent:ab,brush:j});U();var aa=V.select(".nv-focus .nv-linesWrap").datum(Z.filter(function(ac){return !ac.disabled}).map(function(ad,ac){return{key:ad.key,values:ad.values.filter(function(af,ae){return h.x()(af,ae)>=ab[0]&&h.x()(af,ae)<=ab[1]})}}));aa.transition().duration(v).call(h);V.select(".nv-focus .nv-x.nv-axis").transition().duration(v).call(r);V.select(".nv-focus .nv-y.nv-axis").transition().duration(v).call(f)}});return z}h.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+A.left,x.pos[1]+A.top];G.tooltipShow(x)});h.dispatch.on("elementMouseout.tooltip",function(x){G.tooltipHide(x)});G.on("tooltipHide",function(){if(g){c.tooltip.cleanup()}});z.dispatch=G;z.legend=i;z.lines=h;z.lines2=q;z.xAxis=r;z.yAxis=f;z.x2Axis=H;z.y2Axis=k;d3.rebind(z,h,"defined","isArea","size","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id");z.options=c.utils.optionsFunc.bind(z);z.x=function(x){if(!arguments.length){return h.x}h.x(x);q.x(x);return z};z.y=function(x){if(!arguments.length){return h.y}h.y(x);q.y(x);return z};z.margin=function(x){if(!arguments.length){return A}A.top=typeof x.top!="undefined"?x.top:A.top;A.right=typeof x.right!="undefined"?x.right:A.right;A.bottom=typeof x.bottom!="undefined"?x.bottom:A.bottom;A.left=typeof x.left!="undefined"?x.left:A.left;return z};z.margin2=function(x){if(!arguments.length){return u}u=x;return z};z.width=function(x){if(!arguments.length){return C}C=x;return z};z.height=function(x){if(!arguments.length){return B}B=x;return z};z.height2=function(x){if(!arguments.length){return o}o=x;return z};z.color=function(x){if(!arguments.length){return D}D=c.utils.getColor(x);i.color(D);return z};z.showLegend=function(x){if(!arguments.length){return F}F=x;return z};z.tooltips=function(x){if(!arguments.length){return g}g=x;return z};z.tooltipContent=function(x){if(!arguments.length){return p}p=x;return z};z.interpolate=function(x){if(!arguments.length){return h.interpolate()}h.interpolate(x);q.interpolate(x);return z};z.noData=function(x){if(!arguments.length){return n}n=x;return z};z.xTickFormat=function(x){if(!arguments.length){return r.tickFormat()}r.tickFormat(x);H.tickFormat(x);return z};z.yTickFormat=function(x){if(!arguments.length){return f.tickFormat()}f.tickFormat(x);k.tickFormat(x);return z};z.brushExtent=function(x){if(!arguments.length){return w}w=x;return z};z.transitionDuration=function(x){if(!arguments.length){return v}v=x;return z};return z};c.models.linePlusBarWithFocusChart=function(){var w=c.models.line(),p=c.models.line(),v=c.models.historicalBar(),B=c.models.historicalBar(),q=c.models.axis(),u=c.models.axis(),n=c.models.axis(),h=c.models.axis(),F=c.models.axis(),s=c.models.axis(),A=c.models.legend(),H=d3.svg.brush();var j={top:30,right:30,bottom:30,left:60},I={top:0,right:30,bottom:20,left:60},f=null,g=null,r=100,G=function(x){return x.x},E=function(x){return x.y},t=c.utils.defaultColor(),o=true,i,k=null,D=true,y=function(R,Q,U,T,S){return"<h3>"+R+"</h3><p>"+U+" at "+Q+"</p>"},z,m,P,N,M,L,l="No Data Available.",C=d3.dispatch("tooltipShow","tooltipHide","brush"),J=0;w.clipEdge(true);p.interactive(false);q.orient("bottom").tickPadding(5);n.orient("left");h.orient("right");u.orient("bottom").tickPadding(5);F.orient("left");s.orient("right");var O=function(V,R){if(i){V.pointIndex+=Math.ceil(i[0])}var U=V.pos[0]+(R.offsetLeft||0),T=V.pos[1]+(R.offsetTop||0),Q=q.tickFormat()(w.x()(V.point,V.pointIndex)),W=(V.series.bar?n:h).tickFormat()(w.y()(V.point,V.pointIndex)),S=y(V.series.key,Q,W,V,K);c.tooltip.show([U,T],S,V.value<0?"n":"s",null,R)};function K(x){x.each(function(an){var ab=d3.select(this),V=this;var Q=(f||parseInt(ab.style("width"))||960)-j.left-j.right,W=(g||parseInt(ab.style("height"))||400)-j.top-j.bottom-r,U=r-I.top-I.bottom;K.update=function(){ab.transition().duration(J).call(K)};K.container=this;if(!an||!an.length||!an.filter(function(ao){return ao.values.length}).length){var aa=ab.selectAll(".nv-noData").data([l]);aa.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");aa.attr("x",j.left+Q/2).attr("y",j.top+W/2).text(function(ao){return ao});return K}else{ab.selectAll(".nv-noData").remove()}var R=an.filter(function(ao){return !ao.disabled&&ao.bar});var ah=an.filter(function(ao){return !ao.bar});z=v.xScale();m=u.scale();P=v.yScale();N=w.yScale();M=B.yScale();L=p.yScale();var Y=an.filter(function(ao){return !ao.disabled&&ao.bar}).map(function(ao){return ao.values.map(function(aq,ap){return{x:G(aq,ap),y:E(aq,ap)}})});var X=an.filter(function(ao){return !ao.disabled&&!ao.bar}).map(function(ao){return ao.values.map(function(aq,ap){return{x:G(aq,ap),y:E(aq,ap)}})});z.range([0,Q]);m.domain(d3.extent(d3.merge(Y.concat(X)),function(ao){return ao.x})).range([0,Q]);var Z=ab.selectAll("g.nv-wrap.nv-linePlusBar").data([an]);var ae=Z.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g");var ai=Z.select("g");ae.append("g").attr("class","nv-legendWrap");var T=ae.append("g").attr("class","nv-focus");T.append("g").attr("class","nv-x nv-axis");T.append("g").attr("class","nv-y1 nv-axis");T.append("g").attr("class","nv-y2 nv-axis");T.append("g").attr("class","nv-barsWrap");T.append("g").attr("class","nv-linesWrap");var S=ae.append("g").attr("class","nv-context");S.append("g").attr("class","nv-x nv-axis");S.append("g").attr("class","nv-y1 nv-axis");S.append("g").attr("class","nv-y2 nv-axis");S.append("g").attr("class","nv-barsWrap");S.append("g").attr("class","nv-linesWrap");S.append("g").attr("class","nv-brushBackground");S.append("g").attr("class","nv-x nv-brush");if(o){A.width(Q/2);ai.select(".nv-legendWrap").datum(an.map(function(ao){ao.originalKey=ao.originalKey===undefined?ao.key:ao.originalKey;ao.key=ao.originalKey+(ao.bar?" (left axis)":" (right axis)");return ao})).call(A);if(j.top!=A.height()){j.top=A.height();W=(g||parseInt(ab.style("height"))||400)-j.top-j.bottom-r}ai.select(".nv-legendWrap").attr("transform","translate("+(Q/2)+","+(-j.top)+")")}Z.attr("transform","translate("+j.left+","+j.top+")");B.width(Q).height(U).color(an.map(function(ap,ao){return ap.color||t(ap,ao)}).filter(function(ap,ao){return !an[ao].disabled&&an[ao].bar}));p.width(Q).height(U).color(an.map(function(ap,ao){return ap.color||t(ap,ao)}).filter(function(ap,ao){return !an[ao].disabled&&!an[ao].bar}));var aj=ai.select(".nv-context .nv-barsWrap").datum(R.length?R:[{values:[]}]);var ag=ai.select(".nv-context .nv-linesWrap").datum(!ah[0].disabled?ah:[{values:[]}]);ai.select(".nv-context").attr("transform","translate(0,"+(W+j.bottom+I.top)+")");aj.transition().call(B);ag.transition().call(p);H.x(m).on("brush",ad);if(k){H.extent(k)}var am=ai.select(".nv-brushBackground").selectAll("g").data([k||H.extent()]);var ak=am.enter().append("g");ak.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",U);ak.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",U);var al=ai.select(".nv-x.nv-brush").call(H);al.selectAll("rect").attr("height",U);al.selectAll(".resize").append("path").attr("d",ac);u.ticks(Q/100).tickSize(-U,0);ai.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+M.range()[0]+")");ai.select(".nv-context .nv-x.nv-axis").transition().call(u);F.scale(M).ticks(U/36).tickSize(-Q,0);ai.select(".nv-context .nv-y1.nv-axis").style("opacity",R.length?1:0).attr("transform","translate(0,"+m.range()[0]+")");ai.select(".nv-context .nv-y1.nv-axis").transition().call(F);s.scale(L).ticks(U/36).tickSize(R.length?0:-Q,0);ai.select(".nv-context .nv-y2.nv-axis").style("opacity",ah.length?1:0).attr("transform","translate("+m.range()[1]+",0)");ai.select(".nv-context .nv-y2.nv-axis").transition().call(s);A.dispatch.on("stateChange",function(ao){K.update()});C.on("tooltipShow",function(ao){if(D){O(ao,V.parentNode)}});function ac(aq){var ap=+(aq=="e"),ao=ap?1:-1,ar=U/3;return"M"+(0.5*ao)+","+ar+"A6,6 0 0 "+ap+" "+(6.5*ao)+","+(ar+6)+"V"+(2*ar-6)+"A6,6 0 0 "+ap+" "+(0.5*ao)+","+(2*ar)+"ZM"+(2.5*ao)+","+(ar+8)+"V"+(2*ar-8)+"M"+(4.5*ao)+","+(ar+8)+"V"+(2*ar-8)}function af(){if(!H.empty()){H.extent(k)}am.data([H.empty()?m.domain():k]).each(function(ar,ao){var ap=m(ar[0])-m.range()[0],aq=m.range()[1]-m(ar[1]);d3.select(this).select(".left").attr("width",ap<0?0:ap);d3.select(this).select(".right").attr("x",m(ar[1])).attr("width",aq<0?0:aq)})}function ad(){k=H.empty()?null:H.extent();i=H.empty()?m.domain():H.extent();C.brush({extent:i,brush:H});af();v.width(Q).height(W).color(an.map(function(ar,aq){return ar.color||t(ar,aq)}).filter(function(ar,aq){return !an[aq].disabled&&an[aq].bar}));w.width(Q).height(W).color(an.map(function(ar,aq){return ar.color||t(ar,aq)}).filter(function(ar,aq){return !an[aq].disabled&&!an[aq].bar}));var ap=ai.select(".nv-focus .nv-barsWrap").datum(!R.length?[{values:[]}]:R.map(function(ar,aq){return{key:ar.key,values:ar.values.filter(function(au,at){return v.x()(au,at)>=i[0]&&v.x()(au,at)<=i[1]})}}));var ao=ai.select(".nv-focus .nv-linesWrap").datum(ah[0].disabled?[{values:[]}]:ah.map(function(ar,aq){return{key:ar.key,values:ar.values.filter(function(au,at){return w.x()(au,at)>=i[0]&&w.x()(au,at)<=i[1]})}}));if(R.length){z=v.xScale()}else{z=w.xScale()}q.scale(z).ticks(Q/100).tickSize(-W,0);q.domain([Math.ceil(i[0]),Math.floor(i[1])]);ai.select(".nv-x.nv-axis").transition().duration(J).call(q);ap.transition().duration(J).call(v);ao.transition().duration(J).call(w);ai.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+P.range()[0]+")");n.scale(P).ticks(W/36).tickSize(-Q,0);ai.select(".nv-focus .nv-y1.nv-axis").style("opacity",R.length?1:0);h.scale(N).ticks(W/36).tickSize(R.length?0:-Q,0);ai.select(".nv-focus .nv-y2.nv-axis").style("opacity",ah.length?1:0).attr("transform","translate("+z.range()[1]+",0)");ai.select(".nv-focus .nv-y1.nv-axis").transition().duration(J).call(n);ai.select(".nv-focus .nv-y2.nv-axis").transition().duration(J).call(h)}ad()});return K}w.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+j.left,x.pos[1]+j.top];C.tooltipShow(x)});w.dispatch.on("elementMouseout.tooltip",function(x){C.tooltipHide(x)});v.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+j.left,x.pos[1]+j.top];C.tooltipShow(x)});v.dispatch.on("elementMouseout.tooltip",function(x){C.tooltipHide(x)});C.on("tooltipHide",function(){if(D){c.tooltip.cleanup()}});K.dispatch=C;K.legend=A;K.lines=w;K.lines2=p;K.bars=v;K.bars2=B;K.xAxis=q;K.x2Axis=u;K.y1Axis=n;K.y2Axis=h;K.y3Axis=F;K.y4Axis=s;d3.rebind(K,w,"defined","size","clipVoronoi","interpolate");K.options=c.utils.optionsFunc.bind(K);K.x=function(x){if(!arguments.length){return G}G=x;w.x(x);v.x(x);return K};K.y=function(x){if(!arguments.length){return E}E=x;w.y(x);v.y(x);return K};K.margin=function(x){if(!arguments.length){return j}j.top=typeof x.top!="undefined"?x.top:j.top;j.right=typeof x.right!="undefined"?x.right:j.right;j.bottom=typeof x.bottom!="undefined"?x.bottom:j.bottom;j.left=typeof x.left!="undefined"?x.left:j.left;return K};K.width=function(x){if(!arguments.length){return f}f=x;return K};K.height=function(x){if(!arguments.length){return g}g=x;return K};K.color=function(x){if(!arguments.length){return t}t=c.utils.getColor(x);A.color(t);return K};K.showLegend=function(x){if(!arguments.length){return o}o=x;return K};K.tooltips=function(x){if(!arguments.length){return D}D=x;return K};K.tooltipContent=function(x){if(!arguments.length){return y}y=x;return K};K.noData=function(x){if(!arguments.length){return l}l=x;return K};K.brushExtent=function(x){if(!arguments.length){return k}k=x;return K};return K};c.models.multiBar=function(){var n={top:0,right:0,bottom:0,left:0},s=960,o=500,k=d3.scale.ordinal(),j=d3.scale.linear(),p=Math.floor(Math.random()*10000),A=function(x){return x.x},w=function(x){return x.y},g=[0],C=true,B=false,i="zero",v=c.utils.defaultColor(),E=false,q=null,h,D=1200,u,r,m,t,G=0.1,F=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");var z,f;function l(x){x.each(function(P){var S=s-n.left-n.right,K=o-n.top-n.bottom,H=d3.select(this);if(E&&P.length){E=[{values:P[0].values.map(function(T){return{x:T.x,y:0,series:T.series,size:0.01}})}]}if(B){P=d3.layout.stack().offset(i).values(function(T){return T.values}).y(w)(!P.length&&E?E:P)}P.forEach(function(U,T){U.values.forEach(function(V){V.series=T})});if(B){P[0].values.map(function(V,T){var W=0,U=0;P.map(function(Y){var X=Y.values[T];X.size=Math.abs(X.y);if(X.y<0){X.y1=U;U=U-X.size}else{X.y1=X.size+W;W=W+X.size}})})}var J=(u&&r)?[]:P.map(function(T){return T.values.map(function(V,U){return{x:A(V,U),y:w(V,U),y0:V.y0,y1:V.y1}})});k.domain(u||d3.merge(J).map(function(T){return T.x})).rangeBands(m||[0,S],G);j.domain(r||d3.extent(d3.merge(J).map(function(T){return B?(T.y>0?T.y1:T.y1+T.y):T.y}).concat(g))).range(t||[K,0]);if(k.domain()[0]===k.domain()[1]){k.domain()[0]?k.domain([k.domain()[0]-k.domain()[0]*0.01,k.domain()[1]+k.domain()[1]*0.01]):k.domain([-1,1])}if(j.domain()[0]===j.domain()[1]){j.domain()[0]?j.domain([j.domain()[0]+j.domain()[0]*0.01,j.domain()[1]-j.domain()[1]*0.01]):j.domain([-1,1])}z=z||k;f=f||j;var I=H.selectAll("g.nv-wrap.nv-multibar").data([P]);var N=I.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar");var L=N.append("defs");var y=N.append("g");var Q=I.select("g");y.append("g").attr("class","nv-groups");I.attr("transform","translate("+n.left+","+n.top+")");L.append("clipPath").attr("id","nv-edge-clip-"+p).append("rect");I.select("#nv-edge-clip-"+p+" rect").attr("width",S).attr("height",K);Q.attr("clip-path",C?"url(#nv-edge-clip-"+p+")":"");var M=I.select(".nv-groups").selectAll(".nv-group").data(function(T){return T},function(U,T){return T});M.enter().append("g").style("stroke-opacity",0.000001).style("fill-opacity",0.000001);M.exit().transition().selectAll("rect.nv-bar").delay(function(U,T){return T*D/P[0].values.length}).attr("y",function(T){return B?f(T.y0):f(0)}).attr("height",0).remove();M.attr("class",function(U,T){return"nv-group nv-series-"+T}).classed("hover",function(T){return T.hover}).style("fill",function(U,T){return v(U,T)}).style("stroke",function(U,T){return v(U,T)});M.transition().style("stroke-opacity",1).style("fill-opacity",0.75);var R=M.selectAll("rect.nv-bar").data(function(T){return(E&&!P.length)?E.values:T.values});R.exit().remove();var O=R.enter().append("rect").attr("class",function(U,T){return w(U,T)<0?"nv-bar negative":"nv-bar positive"}).attr("x",function(V,U,T){return B?0:(T*k.rangeBand()/P.length)}).attr("y",function(T){return f(B?T.y0:0)}).attr("height",0).attr("width",k.rangeBand()/(B?1:P.length)).attr("transform",function(U,T){return"translate("+k(A(U,T))+",0)"});R.style("fill",function(V,U,T){return v(V,T,U)}).style("stroke",function(V,U,T){return v(V,T,U)}).on("mouseover",function(U,T){d3.select(this).classed("hover",true);F.elementMouseover({value:w(U,T),point:U,series:P[U.series],pos:[k(A(U,T))+(k.rangeBand()*(B?P.length/2:U.series+0.5)/P.length),j(w(U,T)+(B?U.y0:0))],pointIndex:T,seriesIndex:U.series,e:d3.event})}).on("mouseout",function(U,T){d3.select(this).classed("hover",false);F.elementMouseout({value:w(U,T),point:U,series:P[U.series],pointIndex:T,seriesIndex:U.series,e:d3.event})}).on("click",function(U,T){F.elementClick({value:w(U,T),point:U,series:P[U.series],pos:[k(A(U,T))+(k.rangeBand()*(B?P.length/2:U.series+0.5)/P.length),j(w(U,T)+(B?U.y0:0))],pointIndex:T,seriesIndex:U.series,e:d3.event});d3.event.stopPropagation()}).on("dblclick",function(U,T){F.elementDblClick({value:w(U,T),point:U,series:P[U.series],pos:[k(A(U,T))+(k.rangeBand()*(B?P.length/2:U.series+0.5)/P.length),j(w(U,T)+(B?U.y0:0))],pointIndex:T,seriesIndex:U.series,e:d3.event});d3.event.stopPropagation()});R.attr("class",function(U,T){return w(U,T)<0?"nv-bar negative":"nv-bar positive"}).transition().attr("transform",function(U,T){return"translate("+k(A(U,T))+",0)"});if(q){if(!h){h=P.map(function(){return true})}R.style("fill",function(V,U,T){return d3.rgb(q(V,U)).darker(h.map(function(X,W){return W}).filter(function(X,W){return !h[W]})[T]).toString()}).style("stroke",function(V,U,T){return d3.rgb(q(V,U)).darker(h.map(function(X,W){return W}).filter(function(X,W){return !h[W]})[T]).toString()})}if(B){R.transition().delay(function(U,T){return T*D/P[0].values.length}).attr("y",function(U,T){return j((B?U.y1:0))}).attr("height",function(U,T){return Math.max(Math.abs(j(U.y+(B?U.y0:0))-j((B?U.y0:0))),1)}).attr("x",function(U,T){return B?0:(U.series*k.rangeBand()/P.length)}).attr("width",k.rangeBand()/(B?1:P.length))}else{R.transition().delay(function(U,T){return T*D/P[0].values.length}).attr("x",function(U,T){return U.series*k.rangeBand()/P.length}).attr("width",k.rangeBand()/P.length).attr("y",function(U,T){return w(U,T)<0?j(0):j(0)-j(w(U,T))<1?j(0)-1:j(w(U,T))||0}).attr("height",function(U,T){return Math.max(Math.abs(j(w(U,T))-j(0)),1)||0})}z=k.copy();f=j.copy()});return l}l.dispatch=F;l.options=c.utils.optionsFunc.bind(l);l.x=function(x){if(!arguments.length){return A}A=x;return l};l.y=function(x){if(!arguments.length){return w}w=x;return l};l.margin=function(x){if(!arguments.length){return n}n.top=typeof x.top!="undefined"?x.top:n.top;n.right=typeof x.right!="undefined"?x.right:n.right;n.bottom=typeof x.bottom!="undefined"?x.bottom:n.bottom;n.left=typeof x.left!="undefined"?x.left:n.left;return l};l.width=function(x){if(!arguments.length){return s}s=x;return l};l.height=function(x){if(!arguments.length){return o}o=x;return l};l.xScale=function(x){if(!arguments.length){return k}k=x;return l};l.yScale=function(x){if(!arguments.length){return j}j=x;return l};l.xDomain=function(x){if(!arguments.length){return u}u=x;return l};l.yDomain=function(x){if(!arguments.length){return r}r=x;return l};l.xRange=function(x){if(!arguments.length){return m}m=x;return l};l.yRange=function(x){if(!arguments.length){return t}t=x;return l};l.forceY=function(x){if(!arguments.length){return g}g=x;return l};l.stacked=function(x){if(!arguments.length){return B}B=x;return l};l.stackOffset=function(x){if(!arguments.length){return i}i=x;return l};l.clipEdge=function(x){if(!arguments.length){return C}C=x;return l};l.color=function(x){if(!arguments.length){return v}v=c.utils.getColor(x);return l};l.barColor=function(x){if(!arguments.length){return q}q=c.utils.getColor(x);return l};l.disabled=function(x){if(!arguments.length){return h}h=x;return l};l.id=function(x){if(!arguments.length){return p}p=x;return l};l.hideable=function(x){if(!arguments.length){return E}E=x;return l};l.delay=function(x){if(!arguments.length){return D}D=x;return l};l.groupSpacing=function(x){if(!arguments.length){return G}G=x;return l};return l};c.models.multiBarChart=function(){var k=c.models.multiBar(),s=c.models.axis(),g=c.models.axis(),j=c.models.legend(),A=c.models.legend();var C={top:30,right:20,bottom:50,left:60},E=null,D=null,F=c.utils.defaultColor(),I=true,G=true,H=true,v=true,r=false,z=true,i=false,l=0,h=true,p=function(L,K,O,N,M){return"<h3>"+L+"</h3><p>"+O+" on "+K+"</p>"},u,t,o={stacked:false},q=null,n="No Data Available.",J=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),f=function(){return I?180:0},w=250;k.stacked(false);s.orient("bottom").tickPadding(7).highlightZero(true).showMaxMin(false).tickFormat(function(x){return x});g.orient((r)?"right":"left").tickFormat(d3.format(",.1f"));A.updateState(false);var m=function(P,L){var O=P.pos[0]+(L.offsetLeft||0),N=P.pos[1]+(L.offsetTop||0),K=s.tickFormat()(k.x()(P.point,P.pointIndex)),Q=g.tickFormat()(k.y()(P.point,P.pointIndex)),M=p(P.series.key,K,Q,P,B);c.tooltip.show([O,N],M,P.value<0?"n":"s",null,L)};function B(x){x.each(function(S){var L=d3.select(this),V=this;var Z=(E||parseInt(L.style("width"))||960)-C.left-C.right,O=(D||parseInt(L.style("height"))||400)-C.top-C.bottom;B.update=function(){L.transition().duration(w).call(B)};B.container=this;o.disabled=S.map(function(aa){return !!aa.disabled});if(!q){var Y;q={};for(Y in o){if(o[Y] instanceof Array){q[Y]=o[Y].slice(0)}else{q[Y]=o[Y]}}}if(!S||!S.length||!S.filter(function(aa){return aa.values.length}).length){var M=L.selectAll(".nv-noData").data([n]);M.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");M.attr("x",C.left+Z/2).attr("y",C.top+O/2).text(function(aa){return aa});return B}else{L.selectAll(".nv-noData").remove()}u=k.xScale();t=k.yScale();var N=L.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([S]);var y=N.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g");var T=N.select("g");y.append("g").attr("class","nv-x nv-axis");y.append("g").attr("class","nv-y nv-axis");y.append("g").attr("class","nv-barsWrap");y.append("g").attr("class","nv-legendWrap");y.append("g").attr("class","nv-controlsWrap");if(G){j.width(Z-f());if(k.barColor()){S.forEach(function(ab,aa){ab.color=d3.rgb("#ccc").darker(aa*1.5).toString()})}T.select(".nv-legendWrap").datum(S).call(j);if(C.top!=j.height()){C.top=j.height();O=(D||parseInt(L.style("height"))||400)-C.top-C.bottom}T.select(".nv-legendWrap").attr("transform","translate("+f()+","+(-C.top)+")")}if(I){var W=[{key:"Grouped",disabled:k.stacked()},{key:"Stacked",disabled:!k.stacked()}];A.width(f()).color(["#444","#444","#444"]);T.select(".nv-controlsWrap").datum(W).attr("transform","translate(0,"+(-C.top)+")").call(A)}N.attr("transform","translate("+C.left+","+C.top+")");if(r){T.select(".nv-y.nv-axis").attr("transform","translate("+Z+",0)")}k.disabled(S.map(function(aa){return aa.disabled})).width(Z).height(O).color(S.map(function(ab,aa){return ab.color||F(ab,aa)}).filter(function(ab,aa){return !S[aa].disabled}));var U=T.select(".nv-barsWrap").datum(S.filter(function(aa){return !aa.disabled}));U.transition().call(k);if(H){s.scale(u).ticks(Z/100).tickSize(-O,0);T.select(".nv-x.nv-axis").attr("transform","translate(0,"+t.range()[0]+")");T.select(".nv-x.nv-axis").transition().call(s);var R=T.select(".nv-x.nv-axis > g").selectAll("g");R.selectAll("line, text").style("opacity",1);if(i){var X=function(aa,ab){return"translate("+aa+","+ab+")"};var K=5,Q=17;R.selectAll("text").attr("transform",function(ac,ab,aa){return X(0,(aa%2==0?K:Q))});var P=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;T.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(ab,aa){return X(0,(aa===0||P%2!==0)?Q:K)})}if(z){R.filter(function(ab,aa){return aa%Math.ceil(S[0].values.length/(Z/100))!==0}).selectAll("text, line").style("opacity",0)}if(l){R.selectAll(".tick text").attr("transform","rotate("+l+" 0,0)").style("text-anchor",l>0?"start":"end")}T.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}if(v){g.scale(t).ticks(O/36).tickSize(-Z,0);T.select(".nv-y.nv-axis").transition().call(g)}j.dispatch.on("stateChange",function(aa){o=aa;J.stateChange(o);B.update()});A.dispatch.on("legendClick",function(ab,aa){if(!ab.disabled){return}W=W.map(function(ac){ac.disabled=true;return ac});ab.disabled=false;switch(ab.key){case"Grouped":k.stacked(false);break;case"Stacked":k.stacked(true);break}o.stacked=k.stacked();J.stateChange(o);B.update()});J.on("tooltipShow",function(aa){if(h){m(aa,V.parentNode)}});J.on("changeState",function(aa){if(typeof aa.disabled!=="undefined"){S.forEach(function(ac,ab){ac.disabled=aa.disabled[ab]});o.disabled=aa.disabled}if(typeof aa.stacked!=="undefined"){k.stacked(aa.stacked);o.stacked=aa.stacked}B.update()})});return B}k.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+C.left,x.pos[1]+C.top];J.tooltipShow(x)});k.dispatch.on("elementMouseout.tooltip",function(x){J.tooltipHide(x)});J.on("tooltipHide",function(){if(h){c.tooltip.cleanup()}});B.dispatch=J;B.multibar=k;B.legend=j;B.xAxis=s;B.yAxis=g;d3.rebind(B,k,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","stacked","stackOffset","delay","barColor","groupSpacing");B.options=c.utils.optionsFunc.bind(B);B.margin=function(x){if(!arguments.length){return C}C.top=typeof x.top!="undefined"?x.top:C.top;C.right=typeof x.right!="undefined"?x.right:C.right;C.bottom=typeof x.bottom!="undefined"?x.bottom:C.bottom;C.left=typeof x.left!="undefined"?x.left:C.left;return B};B.width=function(x){if(!arguments.length){return E}E=x;return B};B.height=function(x){if(!arguments.length){return D}D=x;return B};B.color=function(x){if(!arguments.length){return F}F=c.utils.getColor(x);j.color(F);return B};B.showControls=function(x){if(!arguments.length){return I}I=x;return B};B.showLegend=function(x){if(!arguments.length){return G}G=x;return B};B.showXAxis=function(x){if(!arguments.length){return H}H=x;return B};B.showYAxis=function(x){if(!arguments.length){return v}v=x;return B};B.rightAlignYAxis=function(x){if(!arguments.length){return r}r=x;g.orient((x)?"right":"left");return B};B.reduceXTicks=function(x){if(!arguments.length){return z}z=x;return B};B.rotateLabels=function(x){if(!arguments.length){return l}l=x;return B};B.staggerLabels=function(x){if(!arguments.length){return i}i=x;return B};B.tooltip=function(x){if(!arguments.length){return p}p=x;return B};B.tooltips=function(x){if(!arguments.length){return h}h=x;return B};B.tooltipContent=function(x){if(!arguments.length){return p}p=x;return B};B.state=function(x){if(!arguments.length){return o}o=x;return B};B.defaultState=function(x){if(!arguments.length){return q}q=x;return B};B.noData=function(x){if(!arguments.length){return n}n=x;return B};B.transitionDuration=function(x){if(!arguments.length){return w}w=x;return B};return B};c.models.multiBarHorizontal=function(){var o={top:0,right:0,bottom:0,left:0},t=960,p=500,q=Math.floor(Math.random()*10000),k=d3.scale.ordinal(),j=d3.scale.linear(),B=function(x){return x.x},z=function(x){return x.y},g=[0],w=c.utils.defaultColor(),r=null,h,D=false,C=false,E=false,l=60,i=d3.format(",.2f"),F=1200,v,s,n,u,G=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");var A,f;function m(x){x.each(function(P){var S=t-o.left-o.right,K=p-o.top-o.bottom,H=d3.select(this);if(D){P=d3.layout.stack().offset("zero").values(function(T){return T.values}).y(z)(P)}P.forEach(function(U,T){U.values.forEach(function(V){V.series=T})});if(D){P[0].values.map(function(V,T){var W=0,U=0;P.map(function(Y){var X=Y.values[T];X.size=Math.abs(X.y);if(X.y<0){X.y1=U-X.size;U=U-X.size}else{X.y1=W;W=W+X.size}})})}var J=(v&&s)?[]:P.map(function(T){return T.values.map(function(V,U){return{x:B(V,U),y:z(V,U),y0:V.y0,y1:V.y1}})});k.domain(v||d3.merge(J).map(function(T){return T.x})).rangeBands(n||[0,K],0.1);j.domain(s||d3.extent(d3.merge(J).map(function(T){return D?(T.y>0?T.y1+T.y:T.y1):T.y}).concat(g)));if(C&&!D){j.range(u||[(j.domain()[0]<0?l:0),S-(j.domain()[1]>0?l:0)])}else{j.range(u||[0,S])}A=A||k;f=f||d3.scale.linear().domain(j.domain()).range([j(0),j(0)]);var I=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([P]);var N=I.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal");var L=N.append("defs");var y=N.append("g");var Q=I.select("g");y.append("g").attr("class","nv-groups");I.attr("transform","translate("+o.left+","+o.top+")");var M=I.select(".nv-groups").selectAll(".nv-group").data(function(T){return T},function(U,T){return T});M.enter().append("g").style("stroke-opacity",0.000001).style("fill-opacity",0.000001);M.exit().transition().style("stroke-opacity",0.000001).style("fill-opacity",0.000001).remove();M.attr("class",function(U,T){return"nv-group nv-series-"+T}).classed("hover",function(T){return T.hover}).style("fill",function(U,T){return w(U,T)}).style("stroke",function(U,T){return w(U,T)});M.transition().style("stroke-opacity",1).style("fill-opacity",0.75);var R=M.selectAll("g.nv-bar").data(function(T){return T.values});R.exit().remove();var O=R.enter().append("g").attr("transform",function(V,U,T){return"translate("+f(D?V.y0:0)+","+(D?0:(T*k.rangeBand()/P.length)+k(B(V,U)))+")"});O.append("rect").attr("width",0).attr("height",k.rangeBand()/(D?1:P.length));R.on("mouseover",function(U,T){d3.select(this).classed("hover",true);G.elementMouseover({value:z(U,T),point:U,series:P[U.series],pos:[j(z(U,T)+(D?U.y0:0)),k(B(U,T))+(k.rangeBand()*(D?P.length/2:U.series+0.5)/P.length)],pointIndex:T,seriesIndex:U.series,e:d3.event})}).on("mouseout",function(U,T){d3.select(this).classed("hover",false);G.elementMouseout({value:z(U,T),point:U,series:P[U.series],pointIndex:T,seriesIndex:U.series,e:d3.event})}).on("click",function(U,T){G.elementClick({value:z(U,T),point:U,series:P[U.series],pos:[k(B(U,T))+(k.rangeBand()*(D?P.length/2:U.series+0.5)/P.length),j(z(U,T)+(D?U.y0:0))],pointIndex:T,seriesIndex:U.series,e:d3.event});d3.event.stopPropagation()}).on("dblclick",function(U,T){G.elementDblClick({value:z(U,T),point:U,series:P[U.series],pos:[k(B(U,T))+(k.rangeBand()*(D?P.length/2:U.series+0.5)/P.length),j(z(U,T)+(D?U.y0:0))],pointIndex:T,seriesIndex:U.series,e:d3.event});d3.event.stopPropagation()});O.append("text");if(C&&!D){R.select("text").attr("text-anchor",function(U,T){return z(U,T)<0?"end":"start"}).attr("y",k.rangeBand()/(P.length*2)).attr("dy",".32em").text(function(U,T){return i(z(U,T))});R.transition().select("text").attr("x",function(U,T){return z(U,T)<0?-4:j(z(U,T))-j(0)+4})}else{R.selectAll("text").text("")}if(E&&!D){O.append("text").classed("nv-bar-label",true);R.select("text.nv-bar-label").attr("text-anchor",function(U,T){return z(U,T)<0?"start":"end"}).attr("y",k.rangeBand()/(P.length*2)).attr("dy",".32em").text(function(U,T){return B(U,T)});R.transition().select("text.nv-bar-label").attr("x",function(U,T){return z(U,T)<0?j(0)-j(z(U,T))+4:-4})}else{R.selectAll("text.nv-bar-label").text("")}R.attr("class",function(U,T){return z(U,T)<0?"nv-bar negative":"nv-bar positive"});if(r){if(!h){h=P.map(function(){return true})}R.style("fill",function(V,U,T){return d3.rgb(r(V,U)).darker(h.map(function(X,W){return W}).filter(function(X,W){return !h[W]})[T]).toString()}).style("stroke",function(V,U,T){return d3.rgb(r(V,U)).darker(h.map(function(X,W){return W}).filter(function(X,W){return !h[W]})[T]).toString()})}if(D){R.transition().attr("transform",function(U,T){return"translate("+j(U.y1)+","+k(B(U,T))+")"}).select("rect").attr("width",function(U,T){return Math.abs(j(z(U,T)+U.y0)-j(U.y0))}).attr("height",k.rangeBand())}else{R.transition().attr("transform",function(U,T){return"translate("+(z(U,T)<0?j(z(U,T)):j(0))+","+(U.series*k.rangeBand()/P.length+k(B(U,T)))+")"}).select("rect").attr("height",k.rangeBand()/P.length).attr("width",function(U,T){return Math.max(Math.abs(j(z(U,T))-j(0)),1)})}A=k.copy();f=j.copy()});return m}m.dispatch=G;m.options=c.utils.optionsFunc.bind(m);m.x=function(x){if(!arguments.length){return B}B=x;return m};m.y=function(x){if(!arguments.length){return z}z=x;return m};m.margin=function(x){if(!arguments.length){return o}o.top=typeof x.top!="undefined"?x.top:o.top;o.right=typeof x.right!="undefined"?x.right:o.right;o.bottom=typeof x.bottom!="undefined"?x.bottom:o.bottom;o.left=typeof x.left!="undefined"?x.left:o.left;return m};m.width=function(x){if(!arguments.length){return t}t=x;return m};m.height=function(x){if(!arguments.length){return p}p=x;return m};m.xScale=function(x){if(!arguments.length){return k}k=x;return m};m.yScale=function(x){if(!arguments.length){return j}j=x;return m};m.xDomain=function(x){if(!arguments.length){return v}v=x;return m};m.yDomain=function(x){if(!arguments.length){return s}s=x;return m};m.xRange=function(x){if(!arguments.length){return n}n=x;return m};m.yRange=function(x){if(!arguments.length){return u}u=x;return m};m.forceY=function(x){if(!arguments.length){return g}g=x;return m};m.stacked=function(x){if(!arguments.length){return D}D=x;return m};m.color=function(x){if(!arguments.length){return w}w=c.utils.getColor(x);return m};m.barColor=function(x){if(!arguments.length){return r}r=c.utils.getColor(x);return m};m.disabled=function(x){if(!arguments.length){return h}h=x;return m};m.id=function(x){if(!arguments.length){return q}q=x;return m};m.delay=function(x){if(!arguments.length){return F}F=x;return m};m.showValues=function(x){if(!arguments.length){return C}C=x;return m};m.showBarLabels=function(x){if(!arguments.length){return E}E=x;return m};m.valueFormat=function(x){if(!arguments.length){return i}i=x;return m};m.valuePadding=function(x){if(!arguments.length){return l}l=x;return m};return m};c.models.multiBarHorizontalChart=function(){var j=c.models.multiBarHorizontal(),p=c.models.axis(),g=c.models.axis(),i=c.models.legend().height(30),u=c.models.legend().height(30);var w={top:30,right:20,bottom:50,left:60},A=null,z=null,B=c.utils.defaultColor(),F=true,C=true,D=true,s=true,E=false,h=true,n=function(I,H,L,K,J){return"<h3>"+I+" - "+H+"</h3><p>"+L+"</p>"},r,q,m={stacked:E},o=null,l="No Data Available.",G=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),f=function(){return F?180:0},t=250;j.stacked(E);p.orient("left").tickPadding(5).highlightZero(false).showMaxMin(false).tickFormat(function(x){return x});g.orient("bottom").tickFormat(d3.format(",.1f"));u.updateState(false);var k=function(M,I){var L=M.pos[0]+(I.offsetLeft||0),K=M.pos[1]+(I.offsetTop||0),H=p.tickFormat()(j.x()(M.point,M.pointIndex)),N=g.tickFormat()(j.y()(M.point,M.pointIndex)),J=n(M.series.key,H,N,M,v);c.tooltip.show([L,K],J,M.value<0?"e":"w",null,I)};function v(x){x.each(function(M){var H=d3.select(this),P=this;var S=(A||parseInt(H.style("width"))||960)-w.left-w.right,K=(z||parseInt(H.style("height"))||400)-w.top-w.bottom;v.update=function(){H.transition().duration(t).call(v)};v.container=this;m.disabled=M.map(function(T){return !!T.disabled});if(!o){var R;o={};for(R in m){if(m[R] instanceof Array){o[R]=m[R].slice(0)}else{o[R]=m[R]}}}if(!M||!M.length||!M.filter(function(T){return T.values.length}).length){var I=H.selectAll(".nv-noData").data([l]);I.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");I.attr("x",w.left+S/2).attr("y",w.top+K/2).text(function(T){return T});return v}else{H.selectAll(".nv-noData").remove()}r=j.xScale();q=j.yScale();var J=H.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([M]);var y=J.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g");var N=J.select("g");y.append("g").attr("class","nv-x nv-axis");y.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");y.append("g").attr("class","nv-barsWrap");y.append("g").attr("class","nv-legendWrap");y.append("g").attr("class","nv-controlsWrap");if(C){i.width(S-f());if(j.barColor()){M.forEach(function(U,T){U.color=d3.rgb("#ccc").darker(T*1.5).toString()})}N.select(".nv-legendWrap").datum(M).call(i);if(w.top!=i.height()){w.top=i.height();K=(z||parseInt(H.style("height"))||400)-w.top-w.bottom}N.select(".nv-legendWrap").attr("transform","translate("+f()+","+(-w.top)+")")}if(F){var Q=[{key:"Grouped",disabled:j.stacked()},{key:"Stacked",disabled:!j.stacked()}];u.width(f()).color(["#444","#444","#444"]);N.select(".nv-controlsWrap").datum(Q).attr("transform","translate(0,"+(-w.top)+")").call(u)}J.attr("transform","translate("+w.left+","+w.top+")");j.disabled(M.map(function(T){return T.disabled})).width(S).height(K).color(M.map(function(U,T){return U.color||B(U,T)}).filter(function(U,T){return !M[T].disabled}));var O=N.select(".nv-barsWrap").datum(M.filter(function(T){return !T.disabled}));O.transition().call(j);if(D){p.scale(r).ticks(K/24).tickSize(-S,0);N.select(".nv-x.nv-axis").transition().call(p);var L=N.select(".nv-x.nv-axis").selectAll("g");L.selectAll("line, text")}if(s){g.scale(q).ticks(S/100).tickSize(-K,0);N.select(".nv-y.nv-axis").attr("transform","translate(0,"+K+")");N.select(".nv-y.nv-axis").transition().call(g)}N.select(".nv-zeroLine line").attr("x1",q(0)).attr("x2",q(0)).attr("y1",0).attr("y2",-K);i.dispatch.on("stateChange",function(T){m=T;G.stateChange(m);v.update()});u.dispatch.on("legendClick",function(U,T){if(!U.disabled){return}Q=Q.map(function(V){V.disabled=true;return V});U.disabled=false;switch(U.key){case"Grouped":j.stacked(false);break;case"Stacked":j.stacked(true);break}m.stacked=j.stacked();G.stateChange(m);v.update()});G.on("tooltipShow",function(T){if(h){k(T,P.parentNode)}});G.on("changeState",function(T){if(typeof T.disabled!=="undefined"){M.forEach(function(V,U){V.disabled=T.disabled[U]});m.disabled=T.disabled}if(typeof T.stacked!=="undefined"){j.stacked(T.stacked);m.stacked=T.stacked}v.update()})});return v}j.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+w.left,x.pos[1]+w.top];G.tooltipShow(x)});j.dispatch.on("elementMouseout.tooltip",function(x){G.tooltipHide(x)});G.on("tooltipHide",function(){if(h){c.tooltip.cleanup()}});v.dispatch=G;v.multibar=j;v.legend=i;v.xAxis=p;v.yAxis=g;d3.rebind(v,j,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","delay","showValues","showBarLabels","valueFormat","stacked","barColor");v.options=c.utils.optionsFunc.bind(v);v.margin=function(x){if(!arguments.length){return w}w.top=typeof x.top!="undefined"?x.top:w.top;w.right=typeof x.right!="undefined"?x.right:w.right;w.bottom=typeof x.bottom!="undefined"?x.bottom:w.bottom;w.left=typeof x.left!="undefined"?x.left:w.left;return v};v.width=function(x){if(!arguments.length){return A}A=x;return v};v.height=function(x){if(!arguments.length){return z}z=x;return v};v.color=function(x){if(!arguments.length){return B}B=c.utils.getColor(x);i.color(B);return v};v.showControls=function(x){if(!arguments.length){return F}F=x;return v};v.showLegend=function(x){if(!arguments.length){return C}C=x;return v};v.showXAxis=function(x){if(!arguments.length){return D}D=x;return v};v.showYAxis=function(x){if(!arguments.length){return s}s=x;return v};v.tooltip=function(x){if(!arguments.length){return n}n=x;return v};v.tooltips=function(x){if(!arguments.length){return h}h=x;return v};v.tooltipContent=function(x){if(!arguments.length){return n}n=x;return v};v.state=function(x){if(!arguments.length){return m}m=x;return v};v.defaultState=function(x){if(!arguments.length){return o}o=x;return v};v.noData=function(x){if(!arguments.length){return l}l=x;return v};v.transitionDuration=function(x){if(!arguments.length){return t}t=x;return v};return v};c.models.multiChart=function(){var z={top:30,right:20,bottom:50,left:60},C=d3.scale.category20().range(),B=null,A=null,D=true,i=true,m=function(I,H,L,K,J){return"<h3>"+I+"</h3><p>"+L+" at "+H+"</p>"},v,u,q,p;var v=d3.scale.linear(),F=d3.scale.linear(),E=d3.scale.linear(),s=c.models.line().yScale(F),r=c.models.line().yScale(E),k=c.models.multiBar().stacked(false).yScale(F),h=c.models.multiBar().stacked(false).yScale(E),o=c.models.stackedArea().yScale(F),n=c.models.stackedArea().yScale(E),t=c.models.axis().scale(v).orient("bottom").tickPadding(5),g=c.models.axis().scale(F).orient("left"),f=c.models.axis().scale(E).orient("right"),j=c.models.legend().height(30),G=d3.dispatch("tooltipShow","tooltipHide");var l=function(M,I){var L=M.pos[0]+(I.offsetLeft||0),K=M.pos[1]+(I.offsetTop||0),H=t.tickFormat()(s.x()(M.point,M.pointIndex)),N=((M.series.yAxis==2)?f:g).tickFormat()(s.y()(M.point,M.pointIndex)),J=m(M.series.key,H,N,M,w);c.tooltip.show([L,K],J,undefined,undefined,I.offsetParent)};function w(x){x.each(function(ad){var S=d3.select(this),K=this;w.update=function(){S.transition().call(w)};w.container=this;var y=(B||parseInt(S.style("width"))||960)-z.left-z.right,I=(A||parseInt(S.style("height"))||400)-z.top-z.bottom;var V=ad.filter(function(ae){return !ae.disabled&&ae.type=="line"&&ae.yAxis==1});var U=ad.filter(function(ae){return !ae.disabled&&ae.type=="line"&&ae.yAxis==2});var Z=ad.filter(function(ae){return !ae.disabled&&ae.type=="bar"&&ae.yAxis==1});var Y=ad.filter(function(ae){return !ae.disabled&&ae.type=="bar"&&ae.yAxis==2});var R=ad.filter(function(ae){return !ae.disabled&&ae.type=="area"&&ae.yAxis==1});var P=ad.filter(function(ae){return !ae.disabled&&ae.type=="area"&&ae.yAxis==2});var M=ad.filter(function(ae){return !ae.disabled&&ae.yAxis==1}).map(function(ae){return ae.values.map(function(ag,af){return{x:ag.x,y:ag.y}})});var L=ad.filter(function(ae){return !ae.disabled&&ae.yAxis==2}).map(function(ae){return ae.values.map(function(ag,af){return{x:ag.x,y:ag.y}})});v.domain(d3.extent(d3.merge(M.concat(L)),function(ae){return ae.x})).range([0,y]);var N=S.selectAll("g.wrap.multiChart").data([ad]);var W=N.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");W.append("g").attr("class","x axis");W.append("g").attr("class","y1 axis");W.append("g").attr("class","y2 axis");W.append("g").attr("class","lines1Wrap");W.append("g").attr("class","lines2Wrap");W.append("g").attr("class","bars1Wrap");W.append("g").attr("class","bars2Wrap");W.append("g").attr("class","stack1Wrap");W.append("g").attr("class","stack2Wrap");W.append("g").attr("class","legendWrap");var aa=N.select("g");if(D){j.width(y/2);aa.select(".legendWrap").datum(ad.map(function(ae){ae.originalKey=ae.originalKey===undefined?ae.key:ae.originalKey;ae.key=ae.originalKey+(ae.yAxis==1?"":" (right axis)");return ae})).call(j);if(z.top!=j.height()){z.top=j.height();I=(A||parseInt(S.style("height"))||400)-z.top-z.bottom}aa.select(".legendWrap").attr("transform","translate("+(y/2)+","+(-z.top)+")")}s.width(y).height(I).interpolate("monotone").color(ad.map(function(af,ae){return af.color||C[ae%C.length]}).filter(function(af,ae){return !ad[ae].disabled&&ad[ae].yAxis==1&&ad[ae].type=="line"}));r.width(y).height(I).interpolate("monotone").color(ad.map(function(af,ae){return af.color||C[ae%C.length]}).filter(function(af,ae){return !ad[ae].disabled&&ad[ae].yAxis==2&&ad[ae].type=="line"}));k.width(y).height(I).color(ad.map(function(af,ae){return af.color||C[ae%C.length]}).filter(function(af,ae){return !ad[ae].disabled&&ad[ae].yAxis==1&&ad[ae].type=="bar"}));h.width(y).height(I).color(ad.map(function(af,ae){return af.color||C[ae%C.length]}).filter(function(af,ae){return !ad[ae].disabled&&ad[ae].yAxis==2&&ad[ae].type=="bar"}));o.width(y).height(I).color(ad.map(function(af,ae){return af.color||C[ae%C.length]}).filter(function(af,ae){return !ad[ae].disabled&&ad[ae].yAxis==1&&ad[ae].type=="area"}));n.width(y).height(I).color(ad.map(function(af,ae){return af.color||C[ae%C.length]}).filter(function(af,ae){return !ad[ae].disabled&&ad[ae].yAxis==2&&ad[ae].type=="area"}));aa.attr("transform","translate("+z.left+","+z.top+")");var H=aa.select(".lines1Wrap").datum(V);var J=aa.select(".bars1Wrap").datum(Z);var ac=aa.select(".stack1Wrap").datum(R);var X=aa.select(".lines2Wrap").datum(U);var ab=aa.select(".bars2Wrap").datum(Y);var T=aa.select(".stack2Wrap").datum(P);var Q=R.length?R.map(function(ae){return ae.values}).reduce(function(af,ae){return af.map(function(ag,ah){return{x:ag.x,y:ag.y+ae[ah].y}})}).concat([{x:0,y:0}]):[];var O=P.length?P.map(function(ae){return ae.values}).reduce(function(af,ae){return af.map(function(ag,ah){return{x:ag.x,y:ag.y+ae[ah].y}})}).concat([{x:0,y:0}]):[];F.domain(q||d3.extent(d3.merge(M).concat(Q),function(ae){return ae.y})).range([0,I]);E.domain(p||d3.extent(d3.merge(L).concat(O),function(ae){return ae.y})).range([0,I]);s.yDomain(F.domain());k.yDomain(F.domain());o.yDomain(F.domain());r.yDomain(E.domain());h.yDomain(E.domain());n.yDomain(E.domain());if(R.length){d3.transition(ac).call(o)}if(P.length){d3.transition(T).call(n)}if(Z.length){d3.transition(J).call(k)}if(Y.length){d3.transition(ab).call(h)}if(V.length){d3.transition(H).call(s)}if(U.length){d3.transition(X).call(r)}t.ticks(y/100).tickSize(-I,0);aa.select(".x.axis").attr("transform","translate(0,"+I+")");d3.transition(aa.select(".x.axis")).call(t);g.ticks(I/36).tickSize(-y,0);d3.transition(aa.select(".y1.axis")).call(g);f.ticks(I/36).tickSize(-y,0);d3.transition(aa.select(".y2.axis")).call(f);aa.select(".y2.axis").style("opacity",L.length?1:0).attr("transform","translate("+v.range()[1]+",0)");j.dispatch.on("stateChange",function(ae){w.update()});G.on("tooltipShow",function(ae){if(i){l(ae,K.parentNode)}})});return w}s.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+z.left,x.pos[1]+z.top];G.tooltipShow(x)});s.dispatch.on("elementMouseout.tooltip",function(x){G.tooltipHide(x)});r.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+z.left,x.pos[1]+z.top];G.tooltipShow(x)});r.dispatch.on("elementMouseout.tooltip",function(x){G.tooltipHide(x)});k.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+z.left,x.pos[1]+z.top];G.tooltipShow(x)});k.dispatch.on("elementMouseout.tooltip",function(x){G.tooltipHide(x)});h.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+z.left,x.pos[1]+z.top];G.tooltipShow(x)});h.dispatch.on("elementMouseout.tooltip",function(x){G.tooltipHide(x)});o.dispatch.on("tooltipShow",function(x){if(!Math.round(o.y()(x.point)*100)){setTimeout(function(){d3.selectAll(".point.hover").classed("hover",false)},0);return false}x.pos=[x.pos[0]+z.left,x.pos[1]+z.top],G.tooltipShow(x)});o.dispatch.on("tooltipHide",function(x){G.tooltipHide(x)});n.dispatch.on("tooltipShow",function(x){if(!Math.round(n.y()(x.point)*100)){setTimeout(function(){d3.selectAll(".point.hover").classed("hover",false)},0);return false}x.pos=[x.pos[0]+z.left,x.pos[1]+z.top],G.tooltipShow(x)});n.dispatch.on("tooltipHide",function(x){G.tooltipHide(x)});s.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+z.left,x.pos[1]+z.top];G.tooltipShow(x)});s.dispatch.on("elementMouseout.tooltip",function(x){G.tooltipHide(x)});r.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+z.left,x.pos[1]+z.top];G.tooltipShow(x)});r.dispatch.on("elementMouseout.tooltip",function(x){G.tooltipHide(x)});G.on("tooltipHide",function(){if(i){c.tooltip.cleanup()}});w.dispatch=G;w.lines1=s;w.lines2=r;w.bars1=k;w.bars2=h;w.stack1=o;w.stack2=n;w.xAxis=t;w.yAxis1=g;w.yAxis2=f;w.options=c.utils.optionsFunc.bind(w);w.x=function(x){if(!arguments.length){return getX}getX=x;s.x(x);k.x(x);return w};w.y=function(x){if(!arguments.length){return getY}getY=x;s.y(x);k.y(x);return w};w.yDomain1=function(x){if(!arguments.length){return q}q=x;return w};w.yDomain2=function(x){if(!arguments.length){return p}p=x;return w};w.margin=function(x){if(!arguments.length){return z}z=x;return w};w.width=function(x){if(!arguments.length){return B}B=x;return w};w.height=function(x){if(!arguments.length){return A}A=x;return w};w.color=function(x){if(!arguments.length){return C}C=x;j.color(x);return w};w.showLegend=function(x){if(!arguments.length){return D}D=x;return w};w.tooltips=function(x){if(!arguments.length){return i}i=x;return w};w.tooltipContent=function(x){if(!arguments.length){return m}m=x;return w};return w};c.models.ohlcBar=function(){var p={top:0,right:0,bottom:0,left:0},t=960,q=500,r=Math.floor(Math.random()*10000),k=d3.scale.linear(),j=d3.scale.linear(),A=function(x){return x.x},z=function(x){return x.y},g=function(x){return x.open},f=function(x){return x.close},C=function(x){return x.high},l=function(x){return x.low},i=[],h=[],m=false,B=true,w=c.utils.defaultColor(),v,s,o,u,D=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");function n(x){x.each(function(K){var N=t-p.left-p.right,H=q-p.top-p.bottom,E=d3.select(this);k.domain(v||d3.extent(K[0].values.map(A).concat(i)));if(m){k.range(o||[N*0.5/K[0].values.length,N*(K[0].values.length-0.5)/K[0].values.length])}else{k.range(o||[0,N])}j.domain(s||[d3.min(K[0].values.map(l).concat(h)),d3.max(K[0].values.map(C).concat(h))]).range(u||[H,0]);if(k.domain()[0]===k.domain()[1]){k.domain()[0]?k.domain([k.domain()[0]-k.domain()[0]*0.01,k.domain()[1]+k.domain()[1]*0.01]):k.domain([-1,1])}if(j.domain()[0]===j.domain()[1]){j.domain()[0]?j.domain([j.domain()[0]+j.domain()[0]*0.01,j.domain()[1]-j.domain()[1]*0.01]):j.domain([-1,1])}var F=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([K[0].values]);var J=F.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar");var I=J.append("defs");var y=J.append("g");var L=F.select("g");y.append("g").attr("class","nv-ticks");F.attr("transform","translate("+p.left+","+p.top+")");E.on("click",function(P,O){D.chartClick({data:P,index:O,pos:d3.event,id:r})});I.append("clipPath").attr("id","nv-chart-clip-path-"+r).append("rect");F.select("#nv-chart-clip-path-"+r+" rect").attr("width",N).attr("height",H);L.attr("clip-path",B?"url(#nv-chart-clip-path-"+r+")":"");var M=F.select(".nv-ticks").selectAll(".nv-tick").data(function(O){return O});M.exit().remove();var G=M.enter().append("path").attr("class",function(Q,P,O){return(g(Q,P)>f(Q,P)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+O+"-"+P}).attr("d",function(Q,P){var O=(N/K[0].values.length)*0.9;return"m0,0l0,"+(j(g(Q,P))-j(C(Q,P)))+"l"+(-O/2)+",0l"+(O/2)+",0l0,"+(j(l(Q,P))-j(g(Q,P)))+"l0,"+(j(f(Q,P))-j(l(Q,P)))+"l"+(O/2)+",0l"+(-O/2)+",0z"}).attr("transform",function(P,O){return"translate("+k(A(P,O))+","+j(C(P,O))+")"}).on("mouseover",function(P,O){d3.select(this).classed("hover",true);D.elementMouseover({point:P,series:K[0],pos:[k(A(P,O)),j(z(P,O))],pointIndex:O,seriesIndex:0,e:d3.event})}).on("mouseout",function(P,O){d3.select(this).classed("hover",false);D.elementMouseout({point:P,series:K[0],pointIndex:O,seriesIndex:0,e:d3.event})}).on("click",function(P,O){D.elementClick({value:z(P,O),data:P,index:O,pos:[k(A(P,O)),j(z(P,O))],e:d3.event,id:r});d3.event.stopPropagation()}).on("dblclick",function(P,O){D.elementDblClick({value:z(P,O),data:P,index:O,pos:[k(A(P,O)),j(z(P,O))],e:d3.event,id:r});d3.event.stopPropagation()});M.attr("class",function(Q,P,O){return(g(Q,P)>f(Q,P)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+O+"-"+P});d3.transition(M).attr("transform",function(P,O){return"translate("+k(A(P,O))+","+j(C(P,O))+")"}).attr("d",function(Q,P){var O=(N/K[0].values.length)*0.9;return"m0,0l0,"+(j(g(Q,P))-j(C(Q,P)))+"l"+(-O/2)+",0l"+(O/2)+",0l0,"+(j(l(Q,P))-j(g(Q,P)))+"l0,"+(j(f(Q,P))-j(l(Q,P)))+"l"+(O/2)+",0l"+(-O/2)+",0z"})});return n}n.dispatch=D;n.options=c.utils.optionsFunc.bind(n);n.x=function(x){if(!arguments.length){return A}A=x;return n};n.y=function(x){if(!arguments.length){return z}z=x;return n};n.open=function(x){if(!arguments.length){return g}g=x;return n};n.close=function(x){if(!arguments.length){return f}f=x;return n};n.high=function(x){if(!arguments.length){return C}C=x;return n};n.low=function(x){if(!arguments.length){return l}l=x;return n};n.margin=function(x){if(!arguments.length){return p}p.top=typeof x.top!="undefined"?x.top:p.top;p.right=typeof x.right!="undefined"?x.right:p.right;p.bottom=typeof x.bottom!="undefined"?x.bottom:p.bottom;p.left=typeof x.left!="undefined"?x.left:p.left;return n};n.width=function(x){if(!arguments.length){return t}t=x;return n};n.height=function(x){if(!arguments.length){return q}q=x;return n};n.xScale=function(x){if(!arguments.length){return k}k=x;return n};n.yScale=function(x){if(!arguments.length){return j}j=x;return n};n.xDomain=function(x){if(!arguments.length){return v}v=x;return n};n.yDomain=function(x){if(!arguments.length){return s}s=x;return n};n.xRange=function(x){if(!arguments.length){return o}o=x;return n};n.yRange=function(x){if(!arguments.length){return u}u=x;return n};n.forceX=function(x){if(!arguments.length){return i}i=x;return n};n.forceY=function(x){if(!arguments.length){return h}h=x;return n};n.padData=function(x){if(!arguments.length){return m}m=x;return n};n.clipEdge=function(x){if(!arguments.length){return B}B=x;return n};n.color=function(x){if(!arguments.length){return w}w=c.utils.getColor(x);return n};n.id=function(x){if(!arguments.length){return r}r=x;return n};return n};c.models.pie=function(){var m={top:0,right:0,bottom:0,left:0},r=500,n=500,x=function(A){return A.x},w=function(A){return A.y},i=function(A){return A.description},p=Math.floor(Math.random()*10000),t=c.utils.defaultColor(),g=d3.format(",.2f"),o=true,h=true,s=false,z="key",u=0.02,j=false,f=false,v=false,q=false,k=0.5,y=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");function l(A){A.each(function(Y){var B=r-m.left-m.right,F=n-m.top-m.bottom,G=Math.min(B,F)/2,K=G-(G/5),O=d3.select(this);var N=O.selectAll(".nv-wrap.nv-pie").data(Y);var H=N.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+p);var S=H.append("g");var T=N.select("g");S.append("g").attr("class","nv-pie");S.append("g").attr("class","nv-pieLabels");N.attr("transform","translate("+m.left+","+m.top+")");T.select(".nv-pie").attr("transform","translate("+B/2+","+F/2+")");T.select(".nv-pieLabels").attr("transform","translate("+B/2+","+F/2+")");O.on("click",function(aa,Z){y.chartClick({data:aa,index:Z,pos:d3.event,id:p})});var L=d3.svg.arc().outerRadius(K);if(v){L.startAngle(v)}if(q){L.endAngle(q)}if(j){L.innerRadius(G*k)}var P=d3.layout.pie().sort(null).value(function(Z){return Z.disabled?0:w(Z)});var D=N.select(".nv-pie").selectAll(".nv-slice").data(P);var C=N.select(".nv-pieLabels").selectAll(".nv-label").data(P);D.exit().remove();C.exit().remove();var V=D.enter().append("g").attr("class","nv-slice").on("mouseover",function(aa,Z){d3.select(this).classed("hover",true);y.elementMouseover({label:x(aa.data),value:w(aa.data),point:aa.data,pointIndex:Z,pos:[d3.event.pageX,d3.event.pageY],id:p})}).on("mouseout",function(aa,Z){d3.select(this).classed("hover",false);y.elementMouseout({label:x(aa.data),value:w(aa.data),point:aa.data,index:Z,id:p})}).on("click",function(aa,Z){y.elementClick({label:x(aa.data),value:w(aa.data),point:aa.data,index:Z,pos:d3.event,id:p});d3.event.stopPropagation()}).on("dblclick",function(aa,Z){y.elementDblClick({label:x(aa.data),value:w(aa.data),point:aa.data,index:Z,pos:d3.event,id:p});d3.event.stopPropagation()});D.attr("fill",function(aa,Z){return t(aa,Z)}).attr("stroke",function(aa,Z){return t(aa,Z)});var R=V.append("path").each(function(Z){this._current=Z});D.select("path").transition().attr("d",L).attrTween("d",E);if(o){var I=d3.svg.arc().innerRadius(0);if(h){I=L}if(s){I=d3.svg.arc().outerRadius(L.outerRadius())}C.enter().append("g").classed("nv-label",true).each(function(ab,Z){var aa=d3.select(this);aa.attr("transform",function(ad){if(f){ad.outerRadius=K+10;ad.innerRadius=K+15;var ac=(ad.startAngle+ad.endAngle)/2*(180/Math.PI);if((ad.startAngle+ad.endAngle)/2<Math.PI){ac-=90}else{ac+=90}return"translate("+I.centroid(ad)+") rotate("+ac+")"}else{ad.outerRadius=G+10;ad.innerRadius=G+15;return"translate("+I.centroid(ad)+")"}});aa.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3);aa.append("text").style("text-anchor",f?((ab.startAngle+ab.endAngle)/2<Math.PI?"start":"end"):"middle").style("fill","#000")});var M={};var X=14;var J=140;var W=function(Z){return Math.floor(Z[0]/J)*J+","+Math.floor(Z[1]/X)*X};C.transition().attr("transform",function(ac){if(f){ac.outerRadius=K+10;ac.innerRadius=K+15;var aa=(ac.startAngle+ac.endAngle)/2*(180/Math.PI);if((ac.startAngle+ac.endAngle)/2<Math.PI){aa-=90}else{aa+=90}return"translate("+I.centroid(ac)+") rotate("+aa+")"}else{ac.outerRadius=G+10;ac.innerRadius=G+15;var Z=I.centroid(ac);var ab=W(Z);if(M[ab]){Z[1]-=X}M[W(Z)]=true;return"translate("+Z+")"}});C.select(".nv-label text").style("text-anchor",f?((d.startAngle+d.endAngle)/2<Math.PI?"start":"end"):"middle").text(function(ab,Z){var aa=(ab.endAngle-ab.startAngle)/(2*Math.PI);var ac={key:x(ab.data),value:w(ab.data),percent:d3.format("%")(aa)};return(ab.value&&aa>u)?ac[z]:""})}function U(aa){var Z=(aa.startAngle+aa.endAngle)*90/Math.PI-90;return Z>90?Z-180:Z}function E(Z){Z.endAngle=isNaN(Z.endAngle)?0:Z.endAngle;Z.startAngle=isNaN(Z.startAngle)?0:Z.startAngle;if(!j){Z.innerRadius=0}var aa=d3.interpolate(this._current,Z);this._current=aa(0);return function(ab){return L(aa(ab))}}function Q(Z){Z.innerRadius=0;var aa=d3.interpolate({startAngle:0,endAngle:0},Z);return function(ab){return L(aa(ab))}}});return l}l.dispatch=y;l.options=c.utils.optionsFunc.bind(l);l.margin=function(A){if(!arguments.length){return m}m.top=typeof A.top!="undefined"?A.top:m.top;m.right=typeof A.right!="undefined"?A.right:m.right;m.bottom=typeof A.bottom!="undefined"?A.bottom:m.bottom;m.left=typeof A.left!="undefined"?A.left:m.left;return l};l.width=function(A){if(!arguments.length){return r}r=A;return l};l.height=function(A){if(!arguments.length){return n}n=A;return l};l.values=function(A){c.log("pie.values() is no longer supported.");return l};l.x=function(A){if(!arguments.length){return x}x=A;return l};l.y=function(A){if(!arguments.length){return w}w=d3.functor(A);return l};l.description=function(A){if(!arguments.length){return i}i=A;return l};l.showLabels=function(A){if(!arguments.length){return o}o=A;return l};l.labelSunbeamLayout=function(A){if(!arguments.length){return f}f=A;return l};l.donutLabelsOutside=function(A){if(!arguments.length){return s}s=A;return l};l.pieLabelsOutside=function(A){if(!arguments.length){return h}h=A;return l};l.labelType=function(A){if(!arguments.length){return z}z=A;z=z||"key";return l};l.donut=function(A){if(!arguments.length){return j}j=A;return l};l.donutRatio=function(A){if(!arguments.length){return k}k=A;return l};l.startAngle=function(A){if(!arguments.length){return v}v=A;return l};l.endAngle=function(A){if(!arguments.length){return q}q=A;return l};l.id=function(A){if(!arguments.length){return p}p=A;return l};l.color=function(A){if(!arguments.length){return t}t=c.utils.getColor(A);return l};l.valueFormat=function(A){if(!arguments.length){return g}g=A;return l};l.labelThreshold=function(A){if(!arguments.length){return u}u=A;return l};return l};c.models.pieChart=function(){var j=c.models.pie(),n=c.models.legend();var h={top:30,right:20,bottom:20,left:20},g=null,r=null,q=true,i=c.utils.defaultColor(),m=true,t=function(u,x,w,v){return"<h3>"+u+"</h3><p>"+x+"</p>"},f={},s=null,p="No Data Available.",k=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState");var o=function(A,u){var v=j.description()(A.point)||j.x()(A.point);var z=A.pos[0]+((u&&u.offsetLeft)||0),x=A.pos[1]+((u&&u.offsetTop)||0),B=j.valueFormat()(j.y()(A.point)),w=t(v,B,A,l);c.tooltip.show([z,x],w,A.value<0?"n":"s",null,u)};function l(u){u.each(function(A){var w=d3.select(this),C=this;var F=(g||parseInt(w.style("width"))||960)-h.left-h.right,z=(r||parseInt(w.style("height"))||400)-h.top-h.bottom;l.update=function(){w.transition().call(l)};l.container=this;f.disabled=A.map(function(G){return !!G.disabled});if(!s){var E;s={};for(E in f){if(f[E] instanceof Array){s[E]=f[E].slice(0)}else{s[E]=f[E]}}}if(!A||!A.length){var x=w.selectAll(".nv-noData").data([p]);x.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");x.attr("x",h.left+F/2).attr("y",h.top+z/2).text(function(G){return G});return l}else{w.selectAll(".nv-noData").remove()}var y=w.selectAll("g.nv-wrap.nv-pieChart").data([A]);var v=y.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g");var B=y.select("g");v.append("g").attr("class","nv-pieWrap");v.append("g").attr("class","nv-legendWrap");if(q){n.width(F).key(j.x());y.select(".nv-legendWrap").datum(A).call(n);if(h.top!=n.height()){h.top=n.height();z=(r||parseInt(w.style("height"))||400)-h.top-h.bottom}y.select(".nv-legendWrap").attr("transform","translate(0,"+(-h.top)+")")}y.attr("transform","translate("+h.left+","+h.top+")");j.width(F).height(z);var D=B.select(".nv-pieWrap").datum([A]);d3.transition(D).call(j);n.dispatch.on("stateChange",function(G){f=G;k.stateChange(f);l.update()});j.dispatch.on("elementMouseout.tooltip",function(G){k.tooltipHide(G)});k.on("changeState",function(G){if(typeof G.disabled!=="undefined"){A.forEach(function(I,H){I.disabled=G.disabled[H]});f.disabled=G.disabled}l.update()})});return l}j.dispatch.on("elementMouseover.tooltip",function(u){u.pos=[u.pos[0]+h.left,u.pos[1]+h.top];k.tooltipShow(u)});k.on("tooltipShow",function(u){if(m){o(u)}});k.on("tooltipHide",function(){if(m){c.tooltip.cleanup()}});l.legend=n;l.dispatch=k;l.pie=j;d3.rebind(l,j,"valueFormat","values","x","y","description","id","showLabels","donutLabelsOutside","pieLabelsOutside","labelType","donut","donutRatio","labelThreshold");l.options=c.utils.optionsFunc.bind(l);l.margin=function(u){if(!arguments.length){return h}h.top=typeof u.top!="undefined"?u.top:h.top;h.right=typeof u.right!="undefined"?u.right:h.right;h.bottom=typeof u.bottom!="undefined"?u.bottom:h.bottom;h.left=typeof u.left!="undefined"?u.left:h.left;return l};l.width=function(u){if(!arguments.length){return g}g=u;return l};l.height=function(u){if(!arguments.length){return r}r=u;return l};l.color=function(u){if(!arguments.length){return i}i=c.utils.getColor(u);n.color(i);j.color(i);return l};l.showLegend=function(u){if(!arguments.length){return q}q=u;return l};l.tooltips=function(u){if(!arguments.length){return m}m=u;return l};l.tooltipContent=function(u){if(!arguments.length){return t}t=u;return l};l.state=function(u){if(!arguments.length){return f}f=u;return l};l.defaultState=function(u){if(!arguments.length){return s}s=u;return l};l.noData=function(u){if(!arguments.length){return p}p=u;return l};return l};c.models.scatter=function(){var l={top:0,right:0,bottom:0,left:0},f=960,h=500,t=c.utils.defaultColor(),B=Math.floor(Math.random()*100000),H=d3.scale.linear(),F=d3.scale.linear(),D=d3.scale.linear(),M=function(x){return x.x},L=function(x){return x.y},w=function(x){return x.size||1},p=function(x){return x.shape||"circle"},Q=true,E=[],C=[],P=[],k=true,N=null,R=function(x){return !x.notActive},J=false,n=0.1,v=false,T=true,r=function(){return 25},j=null,i=null,O=null,s=null,m=null,u=null,I=false,K=d3.dispatch("elementClick","elementMouseover","elementMouseout"),U=true;var q,g,A,G,o=false;function S(x){x.each(function(ab){var af=f-l.left-l.right,X=h-l.top-l.bottom,z=d3.select(this);ab.forEach(function(ah,ag){ah.values.forEach(function(ai){ai.series=ag})});var W=(j&&i&&m)?[]:d3.merge(ab.map(function(ag){return ag.values.map(function(ai,ah){return{x:M(ai,ah),y:L(ai,ah),size:w(ai,ah)}})}));H.domain(j||d3.extent(W.map(function(ag){return ag.x}).concat(E)));if(J&&ab[0]){H.range(O||[(af*n+af)/(2*ab[0].values.length),af-af*(1+n)/(2*ab[0].values.length)])}else{H.range(O||[0,af])}F.domain(i||d3.extent(W.map(function(ag){return ag.y}).concat(C))).range(s||[X,0]);D.domain(m||d3.extent(W.map(function(ag){return ag.size}).concat(P))).range(u||[16,256]);if(H.domain()[0]===H.domain()[1]||F.domain()[0]===F.domain()[1]){I=true}if(H.domain()[0]===H.domain()[1]){H.domain()[0]?H.domain([H.domain()[0]-H.domain()[0]*0.01,H.domain()[1]+H.domain()[1]*0.01]):H.domain([-1,1])}if(F.domain()[0]===F.domain()[1]){F.domain()[0]?F.domain([F.domain()[0]-F.domain()[0]*0.01,F.domain()[1]+F.domain()[1]*0.01]):F.domain([-1,1])}if(isNaN(H.domain()[0])){H.domain([-1,1])}if(isNaN(F.domain()[0])){F.domain([-1,1])}q=q||H;g=g||F;A=A||D;var V=z.selectAll("g.nv-wrap.nv-scatter").data([ab]);var aa=V.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+B+(I?" nv-single-point":""));var Y=aa.append("defs");var y=aa.append("g");var ac=V.select("g");y.append("g").attr("class","nv-groups");y.append("g").attr("class","nv-point-paths");V.attr("transform","translate("+l.left+","+l.top+")");Y.append("clipPath").attr("id","nv-edge-clip-"+B).append("rect");V.select("#nv-edge-clip-"+B+" rect").attr("width",af).attr("height",(X>0)?X:0);ac.attr("clip-path",v?"url(#nv-edge-clip-"+B+")":"");function ad(){if(!k){return false}var aj;var ah=d3.merge(ab.map(function(ap,ao){return ap.values.map(function(aq,au){var at=M(aq,au);var ar=L(aq,au);return[H(at)+Math.random()*1e-7,F(ar)+Math.random()*1e-7,ao,au,aq]}).filter(function(aq,ar){return R(aq[4],ar)})}));if(U===true){if(T){var am=V.select("defs").selectAll(".nv-point-clips").data([B]).enter();am.append("clipPath").attr("class","nv-point-clips").attr("id","nv-points-clip-"+B);var ak=V.select("#nv-points-clip-"+B).selectAll("circle").data(ah);ak.enter().append("circle").attr("r",r);ak.exit().remove();ak.attr("cx",function(ao){return ao[0]}).attr("cy",function(ao){return ao[1]});V.select(".nv-point-paths").attr("clip-path","url(#nv-points-clip-"+B+")")}if(ah.length){ah.push([H.range()[0]-20,F.range()[0]-20,null,null]);ah.push([H.range()[1]+20,F.range()[1]+20,null,null]);ah.push([H.range()[0]-20,F.range()[0]+20,null,null]);ah.push([H.range()[1]+20,F.range()[1]-20,null,null])}var al=d3.geom.polygon([[-10,-10],[-10,h+10],[f+10,h+10],[f+10,-10]]);var an=d3.geom.voronoi(ah).map(function(ap,ao){return{data:al.clip(ap),series:ah[ao][2],point:ah[ao][3]}});var ag=V.select(".nv-point-paths").selectAll("path").data(an);ag.enter().append("path").attr("class",function(ap,ao){return"nv-path-"+ao});ag.exit().remove();ag.attr("d",function(ao){if(ao.data.length===0){return"M 0 0"}else{return"M"+ao.data.join("L")+"Z"}});var ai=function(ar,aq){if(o){return 0}var ap=ab[ar.series];if(typeof ap==="undefined"){return}var ao=ap.values[ar.point];aq({point:ao,series:ap,pos:[H(M(ao,ar.point))+l.left,F(L(ao,ar.point))+l.top],seriesIndex:ar.series,pointIndex:ar.point})};ag.on("click",function(ao){ai(ao,K.elementClick)}).on("mouseover",function(ao){ai(ao,K.elementMouseover)}).on("mouseout",function(ap,ao){ai(ap,K.elementMouseout)})}else{V.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(ar,aq){if(o||!ab[ar.series]){return 0}var ap=ab[ar.series],ao=ap.values[aq];K.elementClick({point:ao,series:ap,pos:[H(M(ao,aq))+l.left,F(L(ao,aq))+l.top],seriesIndex:ar.series,pointIndex:aq})}).on("mouseover",function(ar,aq){if(o||!ab[ar.series]){return 0}var ap=ab[ar.series],ao=ap.values[aq];K.elementMouseover({point:ao,series:ap,pos:[H(M(ao,aq))+l.left,F(L(ao,aq))+l.top],seriesIndex:ar.series,pointIndex:aq})}).on("mouseout",function(ar,aq){if(o||!ab[ar.series]){return 0}var ap=ab[ar.series],ao=ap.values[aq];K.elementMouseout({point:ao,series:ap,seriesIndex:ar.series,pointIndex:aq})})}o=false}o=true;var Z=V.select(".nv-groups").selectAll(".nv-group").data(function(ag){return ag},function(ag){return ag.key});Z.enter().append("g").style("stroke-opacity",0.000001).style("fill-opacity",0.000001);Z.exit().remove();Z.attr("class",function(ah,ag){return"nv-group nv-series-"+ag}).classed("hover",function(ag){return ag.hover});Z.transition().style("fill",function(ah,ag){return t(ah,ag)}).style("stroke",function(ah,ag){return t(ah,ag)}).style("stroke-opacity",1).style("fill-opacity",0.5);if(Q){var ae=Z.selectAll("circle.nv-point").data(function(ag){return ag.values},N);ae.enter().append("circle").style("fill",function(ah,ag){return ah.color}).style("stroke",function(ah,ag){return ah.color}).attr("cx",function(ah,ag){return c.utils.NaNtoZero(q(M(ah,ag)))}).attr("cy",function(ah,ag){return c.utils.NaNtoZero(g(L(ah,ag)))}).attr("r",function(ah,ag){return Math.sqrt(D(w(ah,ag))/Math.PI)});ae.exit().remove();Z.exit().selectAll("path.nv-point").transition().attr("cx",function(ah,ag){return c.utils.NaNtoZero(H(M(ah,ag)))}).attr("cy",function(ah,ag){return c.utils.NaNtoZero(F(L(ah,ag)))}).remove();ae.each(function(ah,ag){d3.select(this).classed("nv-point",true).classed("nv-point-"+ag,true).classed("hover",false)});ae.transition().attr("cx",function(ah,ag){return c.utils.NaNtoZero(H(M(ah,ag)))}).attr("cy",function(ah,ag){return c.utils.NaNtoZero(F(L(ah,ag)))}).attr("r",function(ah,ag){return Math.sqrt(D(w(ah,ag))/Math.PI)})}else{var ae=Z.selectAll("path.nv-point").data(function(ag){return ag.values});ae.enter().append("path").style("fill",function(ah,ag){return ah.color}).style("stroke",function(ah,ag){return ah.color}).attr("transform",function(ah,ag){return"translate("+q(M(ah,ag))+","+g(L(ah,ag))+")"}).attr("d",d3.svg.symbol().type(p).size(function(ah,ag){return D(w(ah,ag))}));ae.exit().remove();Z.exit().selectAll("path.nv-point").transition().attr("transform",function(ah,ag){return"translate("+H(M(ah,ag))+","+F(L(ah,ag))+")"}).remove();ae.each(function(ah,ag){d3.select(this).classed("nv-point",true).classed("nv-point-"+ag,true).classed("hover",false)});ae.transition().attr("transform",function(ah,ag){return"translate("+H(M(ah,ag))+","+F(L(ah,ag))+")"}).attr("d",d3.svg.symbol().type(p).size(function(ah,ag){return D(w(ah,ag))}))}clearTimeout(G);G=setTimeout(ad,300);q=H.copy();g=F.copy();A=D.copy()});return S}S.clearHighlights=function(){d3.selectAll(".nv-chart-"+B+" .nv-point.hover").classed("hover",false)};S.highlightPoint=function(y,z,x){d3.select(".nv-chart-"+B+" .nv-series-"+y+" .nv-point-"+z).classed("hover",x)};K.on("elementMouseover.point",function(x){if(k){S.highlightPoint(x.seriesIndex,x.pointIndex,true)}});K.on("elementMouseout.point",function(x){if(k){S.highlightPoint(x.seriesIndex,x.pointIndex,false)}});S.dispatch=K;S.options=c.utils.optionsFunc.bind(S);S.x=function(x){if(!arguments.length){return M}M=d3.functor(x);return S};S.y=function(x){if(!arguments.length){return L}L=d3.functor(x);return S};S.size=function(x){if(!arguments.length){return w}w=d3.functor(x);return S};S.margin=function(x){if(!arguments.length){return l}l.top=typeof x.top!="undefined"?x.top:l.top;l.right=typeof x.right!="undefined"?x.right:l.right;l.bottom=typeof x.bottom!="undefined"?x.bottom:l.bottom;l.left=typeof x.left!="undefined"?x.left:l.left;return S};S.width=function(x){if(!arguments.length){return f}f=x;return S};S.height=function(x){if(!arguments.length){return h}h=x;return S};S.xScale=function(x){if(!arguments.length){return H}H=x;return S};S.yScale=function(x){if(!arguments.length){return F}F=x;return S};S.zScale=function(x){if(!arguments.length){return D}D=x;return S};S.xDomain=function(x){if(!arguments.length){return j}j=x;return S};S.yDomain=function(x){if(!arguments.length){return i}i=x;return S};S.sizeDomain=function(x){if(!arguments.length){return m}m=x;return S};S.xRange=function(x){if(!arguments.length){return O}O=x;return S};S.yRange=function(x){if(!arguments.length){return s}s=x;return S};S.sizeRange=function(x){if(!arguments.length){return u}u=x;return S};S.forceX=function(x){if(!arguments.length){return E}E=x;return S};S.forceY=function(x){if(!arguments.length){return C}C=x;return S};S.forceSize=function(x){if(!arguments.length){return P}P=x;return S};S.interactive=function(x){if(!arguments.length){return k}k=x;return S};S.pointKey=function(x){if(!arguments.length){return N}N=x;return S};S.pointActive=function(x){if(!arguments.length){return R}R=x;return S};S.padData=function(x){if(!arguments.length){return J}J=x;return S};S.padDataOuter=function(x){if(!arguments.length){return n}n=x;return S};S.clipEdge=function(x){if(!arguments.length){return v}v=x;return S};S.clipVoronoi=function(x){if(!arguments.length){return T}T=x;return S};S.useVoronoi=function(x){if(!arguments.length){return U}U=x;if(U===false){T=false}return S};S.clipRadius=function(x){if(!arguments.length){return r}r=x;return S};S.color=function(x){if(!arguments.length){return t}t=c.utils.getColor(x);return S};S.shape=function(x){if(!arguments.length){return p}p=x;return S};S.onlyCircles=function(x){if(!arguments.length){return Q}Q=x;return S};S.id=function(x){if(!arguments.length){return B}B=x;return S};S.singlePoint=function(x){if(!arguments.length){return I}I=x;return S};return S};c.models.scatterChart=function(){var N=c.models.scatter(),A=c.models.axis(),p=c.models.axis(),J=c.models.legend(),B=c.models.legend(),F=c.models.distribution(),E=c.models.distribution();var l={top:30,right:20,bottom:50,left:75},f=null,h=null,D=c.utils.defaultColor(),I=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):N.xScale(),H=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):N.yScale(),n=0,t=0,s=false,q=false,w=true,j=true,M=true,P=false,m=!!d3.fisheye,z=0,r=false,L=true,k=function(U,T,V){return"<strong>"+T+"</strong>"},i=function(U,T,V){return"<strong>"+V+"</strong>"},G=null,S={},C=null,K=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),o="No Data Available.",O=250;N.xScale(I).yScale(H);A.orient("bottom").tickPadding(10);p.orient((P)?"right":"left").tickPadding(10);F.axis("x");E.axis("y");B.updateState(false);var u,g;var R=function(W,Z){var U=W.pos[0]+(Z.offsetLeft||0),Y=W.pos[1]+(Z.offsetTop||0),V=W.pos[0]+(Z.offsetLeft||0),y=H.range()[0]+l.top+(Z.offsetTop||0),T=I.range()[0]+l.left+(Z.offsetLeft||0),x=W.pos[1]+(Z.offsetTop||0),aa=A.tickFormat()(N.x()(W.point,W.pointIndex)),X=p.tickFormat()(N.y()(W.point,W.pointIndex));if(k!=null){c.tooltip.show([V,y],k(W.series.key,aa,X,W,Q),"n",1,Z,"x-nvtooltip")}if(i!=null){c.tooltip.show([T,x],i(W.series.key,aa,X,W,Q),"e",1,Z,"y-nvtooltip")}if(G!=null){c.tooltip.show([U,Y],G(W.series.key,aa,X,W,Q),W.value<0?"n":"s",null,Z)}};var v=[{key:"Magnify",disabled:true}];function Q(x){x.each(function(ab){var V=d3.select(this),ad=this;var ag=(f||parseInt(V.style("width"))||960)-l.left-l.right,Y=(h||parseInt(V.style("height"))||400)-l.top-l.bottom;Q.update=function(){V.transition().duration(O).call(Q)};Q.container=this;S.disabled=ab.map(function(ah){return !!ah.disabled});if(!C){var ae;C={};for(ae in S){if(S[ae] instanceof Array){C[ae]=S[ae].slice(0)}else{C[ae]=S[ae]}}}if(!ab||!ab.length||!ab.filter(function(ah){return ah.values.length}).length){var W=V.selectAll(".nv-noData").data([o]);W.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");W.attr("x",l.left+ag/2).attr("y",l.top+Y/2).text(function(ah){return ah});return Q}else{V.selectAll(".nv-noData").remove()}u=u||I;g=g||H;var X=V.selectAll("g.nv-wrap.nv-scatterChart").data([ab]);var Z=X.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+N.id());var T=Z.append("g");var ac=X.select("g");T.append("rect").attr("class","nvd3 nv-background");T.append("g").attr("class","nv-x nv-axis");T.append("g").attr("class","nv-y nv-axis");T.append("g").attr("class","nv-scatterWrap");T.append("g").attr("class","nv-distWrap");T.append("g").attr("class","nv-legendWrap");T.append("g").attr("class","nv-controlsWrap");if(w){var af=(m)?ag/2:ag;J.width(af);X.select(".nv-legendWrap").datum(ab).call(J);if(l.top!=J.height()){l.top=J.height();Y=(h||parseInt(V.style("height"))||400)-l.top-l.bottom}X.select(".nv-legendWrap").attr("transform","translate("+(ag-af)+","+(-l.top)+")")}if(m){B.width(180).color(["#444"]);ac.select(".nv-controlsWrap").datum(v).attr("transform","translate(0,"+(-l.top)+")").call(B)}X.attr("transform","translate("+l.left+","+l.top+")");if(P){ac.select(".nv-y.nv-axis").attr("transform","translate("+ag+",0)")}N.width(ag).height(Y).color(ab.map(function(ai,ah){return ai.color||D(ai,ah)}).filter(function(ai,ah){return !ab[ah].disabled}));if(n!==0){N.xDomain(null)}if(t!==0){N.yDomain(null)}X.select(".nv-scatterWrap").datum(ab.filter(function(ah){return !ah.disabled})).call(N);if(n!==0){var y=I.domain()[1]-I.domain()[0];N.xDomain([I.domain()[0]-(n*y),I.domain()[1]+(n*y)])}if(t!==0){var aa=H.domain()[1]-H.domain()[0];N.yDomain([H.domain()[0]-(t*aa),H.domain()[1]+(t*aa)])}if(t!==0||n!==0){X.select(".nv-scatterWrap").datum(ab.filter(function(ah){return !ah.disabled})).call(N)}if(j){A.scale(I).ticks(A.ticks()&&A.ticks().length?A.ticks():ag/100).tickSize(-Y,0);ac.select(".nv-x.nv-axis").attr("transform","translate(0,"+H.range()[0]+")").call(A)}if(M){p.scale(H).ticks(p.ticks()&&p.ticks().length?p.ticks():Y/36).tickSize(-ag,0);ac.select(".nv-y.nv-axis").call(p)}if(s){F.getData(N.x()).scale(I).width(ag).color(ab.map(function(ai,ah){return ai.color||D(ai,ah)}).filter(function(ai,ah){return !ab[ah].disabled}));T.select(".nv-distWrap").append("g").attr("class","nv-distributionX");ac.select(".nv-distributionX").attr("transform","translate(0,"+H.range()[0]+")").datum(ab.filter(function(ah){return !ah.disabled})).call(F)}if(q){E.getData(N.y()).scale(H).width(Y).color(ab.map(function(ai,ah){return ai.color||D(ai,ah)}).filter(function(ai,ah){return !ab[ah].disabled}));T.select(".nv-distWrap").append("g").attr("class","nv-distributionY");ac.select(".nv-distributionY").attr("transform","translate("+(P?ag:-E.size())+",0)").datum(ab.filter(function(ah){return !ah.disabled})).call(E)}if(d3.fisheye){ac.select(".nv-background").attr("width",ag).attr("height",Y);ac.select(".nv-background").on("mousemove",U);ac.select(".nv-background").on("click",function(){r=!r});N.dispatch.on("elementClick.freezeFisheye",function(){r=!r})}function U(){if(r){ac.select(".nv-point-paths").style("pointer-events","all");return false}ac.select(".nv-point-paths").style("pointer-events","none");var ah=d3.mouse(this);I.distortion(z).focus(ah[0]);H.distortion(z).focus(ah[1]);ac.select(".nv-scatterWrap").call(N);if(j){ac.select(".nv-x.nv-axis").call(A)}if(M){ac.select(".nv-y.nv-axis").call(p)}ac.select(".nv-distributionX").datum(ab.filter(function(ai){return !ai.disabled})).call(F);ac.select(".nv-distributionY").datum(ab.filter(function(ai){return !ai.disabled})).call(E)}B.dispatch.on("legendClick",function(ai,ah){ai.disabled=!ai.disabled;z=ai.disabled?0:2.5;ac.select(".nv-background").style("pointer-events",ai.disabled?"none":"all");ac.select(".nv-point-paths").style("pointer-events",ai.disabled?"all":"none");if(ai.disabled){I.distortion(z).focus(0);H.distortion(z).focus(0);ac.select(".nv-scatterWrap").call(N);ac.select(".nv-x.nv-axis").call(A);ac.select(".nv-y.nv-axis").call(p)}else{r=false}Q.update()});J.dispatch.on("stateChange",function(ah){S.disabled=ah.disabled;K.stateChange(S);Q.update()});N.dispatch.on("elementMouseover.tooltip",function(ah){d3.select(".nv-chart-"+N.id()+" .nv-series-"+ah.seriesIndex+" .nv-distx-"+ah.pointIndex).attr("y1",function(aj,ai){return ah.pos[1]-Y});d3.select(".nv-chart-"+N.id()+" .nv-series-"+ah.seriesIndex+" .nv-disty-"+ah.pointIndex).attr("x2",ah.pos[0]+F.size());ah.pos=[ah.pos[0]+l.left,ah.pos[1]+l.top];K.tooltipShow(ah)});K.on("tooltipShow",function(ah){if(L){R(ah,ad.parentNode)}});K.on("changeState",function(ah){if(typeof ah.disabled!=="undefined"){ab.forEach(function(aj,ai){aj.disabled=ah.disabled[ai]});S.disabled=ah.disabled}Q.update()});u=I.copy();g=H.copy()});return Q}N.dispatch.on("elementMouseout.tooltip",function(x){K.tooltipHide(x);d3.select(".nv-chart-"+N.id()+" .nv-series-"+x.seriesIndex+" .nv-distx-"+x.pointIndex).attr("y1",0);d3.select(".nv-chart-"+N.id()+" .nv-series-"+x.seriesIndex+" .nv-disty-"+x.pointIndex).attr("x2",E.size())});K.on("tooltipHide",function(){if(L){c.tooltip.cleanup()}});Q.dispatch=K;Q.scatter=N;Q.legend=J;Q.controls=B;Q.xAxis=A;Q.yAxis=p;Q.distX=F;Q.distY=E;d3.rebind(Q,N,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi");Q.options=c.utils.optionsFunc.bind(Q);Q.margin=function(x){if(!arguments.length){return l}l.top=typeof x.top!="undefined"?x.top:l.top;l.right=typeof x.right!="undefined"?x.right:l.right;l.bottom=typeof x.bottom!="undefined"?x.bottom:l.bottom;l.left=typeof x.left!="undefined"?x.left:l.left;return Q};Q.width=function(x){if(!arguments.length){return f}f=x;return Q};Q.height=function(x){if(!arguments.length){return h}h=x;return Q};Q.color=function(x){if(!arguments.length){return D}D=c.utils.getColor(x);J.color(D);F.color(D);E.color(D);return Q};Q.showDistX=function(x){if(!arguments.length){return s}s=x;return Q};Q.showDistY=function(x){if(!arguments.length){return q}q=x;return Q};Q.showControls=function(x){if(!arguments.length){return m}m=x;return Q};Q.showLegend=function(x){if(!arguments.length){return w}w=x;return Q};Q.showXAxis=function(x){if(!arguments.length){return j}j=x;return Q};Q.showYAxis=function(x){if(!arguments.length){return M}M=x;return Q};Q.rightAlignYAxis=function(x){if(!arguments.length){return P}P=x;p.orient((x)?"right":"left");return Q};Q.fisheye=function(x){if(!arguments.length){return z}z=x;return Q};Q.xPadding=function(x){if(!arguments.length){return n}n=x;return Q};Q.yPadding=function(x){if(!arguments.length){return t}t=x;return Q};Q.tooltips=function(x){if(!arguments.length){return L}L=x;return Q};Q.tooltipContent=function(x){if(!arguments.length){return G}G=x;return Q};Q.tooltipXContent=function(x){if(!arguments.length){return k}k=x;return Q};Q.tooltipYContent=function(x){if(!arguments.length){return i}i=x;return Q};Q.state=function(x){if(!arguments.length){return S}S=x;return Q};Q.defaultState=function(x){if(!arguments.length){return C}C=x;return Q};Q.noData=function(x){if(!arguments.length){return o}o=x;return Q};Q.transitionDuration=function(x){if(!arguments.length){return O}O=x;return Q};return Q};c.models.scatterPlusLineChart=function(){var L=c.models.scatter(),w=c.models.axis(),o=c.models.axis(),H=c.models.legend(),z=c.models.legend(),D=c.models.distribution(),C=c.models.distribution();var l={top:30,right:20,bottom:50,left:75},f=null,h=null,B=c.utils.defaultColor(),G=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):L.xScale(),F=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):L.yScale(),r=false,p=false,u=true,j=true,K=true,N=false,m=!!d3.fisheye,v=0,q=false,J=true,k=function(S,R,T){return"<strong>"+R+"</strong>"},i=function(S,R,T){return"<strong>"+T+"</strong>"},E=function(T,R,U,S){return"<h3>"+T+"</h3><p>"+S+"</p>"},P={},A=null,I=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),n="No Data Available.",M=250;L.xScale(G).yScale(F);w.orient("bottom").tickPadding(10);o.orient((N)?"right":"left").tickPadding(10);D.axis("x");C.axis("y");z.updateState(false);var s,g;var Q=function(U,X){var S=U.pos[0]+(X.offsetLeft||0),W=U.pos[1]+(X.offsetTop||0),T=U.pos[0]+(X.offsetLeft||0),y=F.range()[0]+l.top+(X.offsetTop||0),R=G.range()[0]+l.left+(X.offsetLeft||0),x=U.pos[1]+(X.offsetTop||0),Y=w.tickFormat()(L.x()(U.point,U.pointIndex)),V=o.tickFormat()(L.y()(U.point,U.pointIndex));if(k!=null){c.tooltip.show([T,y],k(U.series.key,Y,V,U,O),"n",1,X,"x-nvtooltip")}if(i!=null){c.tooltip.show([R,x],i(U.series.key,Y,V,U,O),"e",1,X,"y-nvtooltip")}if(E!=null){c.tooltip.show([S,W],E(U.series.key,Y,V,U.point.tooltip,U,O),U.value<0?"n":"s",null,X)}};var t=[{key:"Magnify",disabled:true}];function O(x){x.each(function(Z){var S=d3.select(this),ab=this;var ae=(f||parseInt(S.style("width"))||960)-l.left-l.right,V=(h||parseInt(S.style("height"))||400)-l.top-l.bottom;O.update=function(){S.transition().duration(M).call(O)};O.container=this;P.disabled=Z.map(function(af){return !!af.disabled});if(!A){var ad;A={};for(ad in P){if(P[ad] instanceof Array){A[ad]=P[ad].slice(0)}else{A[ad]=P[ad]}}}if(!Z||!Z.length||!Z.filter(function(af){return af.values.length}).length){var T=S.selectAll(".nv-noData").data([n]);T.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");T.attr("x",l.left+ae/2).attr("y",l.top+V/2).text(function(af){return af});return O}else{S.selectAll(".nv-noData").remove()}G=L.xScale();F=L.yScale();s=s||G;g=g||F;var U=S.selectAll("g.nv-wrap.nv-scatterChart").data([Z]);var X=U.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+L.id());var y=X.append("g");var aa=U.select("g");y.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none");y.append("g").attr("class","nv-x nv-axis");y.append("g").attr("class","nv-y nv-axis");y.append("g").attr("class","nv-scatterWrap");y.append("g").attr("class","nv-regressionLinesWrap");y.append("g").attr("class","nv-distWrap");y.append("g").attr("class","nv-legendWrap");y.append("g").attr("class","nv-controlsWrap");U.attr("transform","translate("+l.left+","+l.top+")");if(N){aa.select(".nv-y.nv-axis").attr("transform","translate("+ae+",0)")}if(u){H.width(ae/2);U.select(".nv-legendWrap").datum(Z).call(H);if(l.top!=H.height()){l.top=H.height();V=(h||parseInt(S.style("height"))||400)-l.top-l.bottom}U.select(".nv-legendWrap").attr("transform","translate("+(ae/2)+","+(-l.top)+")")}if(m){z.width(180).color(["#444"]);aa.select(".nv-controlsWrap").datum(t).attr("transform","translate(0,"+(-l.top)+")").call(z)}L.width(ae).height(V).color(Z.map(function(ag,af){return ag.color||B(ag,af)}).filter(function(ag,af){return !Z[af].disabled}));U.select(".nv-scatterWrap").datum(Z.filter(function(af){return !af.disabled})).call(L);U.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+L.id()+")");var Y=U.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(af){return af});Y.enter().append("g").attr("class","nv-regLines");var W=Y.selectAll(".nv-regLine").data(function(af){return[af]});var ac=W.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0);W.transition().attr("x1",G.range()[0]).attr("x2",G.range()[1]).attr("y1",function(ag,af){return F(G.domain()[0]*ag.slope+ag.intercept)}).attr("y2",function(ag,af){return F(G.domain()[1]*ag.slope+ag.intercept)}).style("stroke",function(ah,ag,af){return B(ah,af)}).style("stroke-opacity",function(ag,af){return(ag.disabled||typeof ag.slope==="undefined"||typeof ag.intercept==="undefined")?0:1});if(j){w.scale(G).ticks(w.ticks()?w.ticks():ae/100).tickSize(-V,0);aa.select(".nv-x.nv-axis").attr("transform","translate(0,"+F.range()[0]+")").call(w)}if(K){o.scale(F).ticks(o.ticks()?o.ticks():V/36).tickSize(-ae,0);aa.select(".nv-y.nv-axis").call(o)}if(r){D.getData(L.x()).scale(G).width(ae).color(Z.map(function(ag,af){return ag.color||B(ag,af)}).filter(function(ag,af){return !Z[af].disabled}));y.select(".nv-distWrap").append("g").attr("class","nv-distributionX");aa.select(".nv-distributionX").attr("transform","translate(0,"+F.range()[0]+")").datum(Z.filter(function(af){return !af.disabled})).call(D)}if(p){C.getData(L.y()).scale(F).width(V).color(Z.map(function(ag,af){return ag.color||B(ag,af)}).filter(function(ag,af){return !Z[af].disabled}));y.select(".nv-distWrap").append("g").attr("class","nv-distributionY");aa.select(".nv-distributionY").attr("transform","translate("+(N?ae:-C.size())+",0)").datum(Z.filter(function(af){return !af.disabled})).call(C)}if(d3.fisheye){aa.select(".nv-background").attr("width",ae).attr("height",V);aa.select(".nv-background").on("mousemove",R);aa.select(".nv-background").on("click",function(){q=!q});L.dispatch.on("elementClick.freezeFisheye",function(){q=!q})}function R(){if(q){aa.select(".nv-point-paths").style("pointer-events","all");return false}aa.select(".nv-point-paths").style("pointer-events","none");var af=d3.mouse(this);G.distortion(v).focus(af[0]);F.distortion(v).focus(af[1]);aa.select(".nv-scatterWrap").datum(Z.filter(function(ag){return !ag.disabled})).call(L);if(j){aa.select(".nv-x.nv-axis").call(w)}if(K){aa.select(".nv-y.nv-axis").call(o)}aa.select(".nv-distributionX").datum(Z.filter(function(ag){return !ag.disabled})).call(D);aa.select(".nv-distributionY").datum(Z.filter(function(ag){return !ag.disabled})).call(C)}z.dispatch.on("legendClick",function(ag,af){ag.disabled=!ag.disabled;v=ag.disabled?0:2.5;aa.select(".nv-background").style("pointer-events",ag.disabled?"none":"all");aa.select(".nv-point-paths").style("pointer-events",ag.disabled?"all":"none");if(ag.disabled){G.distortion(v).focus(0);F.distortion(v).focus(0);aa.select(".nv-scatterWrap").call(L);aa.select(".nv-x.nv-axis").call(w);aa.select(".nv-y.nv-axis").call(o)}else{q=false}O.update()});H.dispatch.on("stateChange",function(af){P=af;I.stateChange(P);O.update()});L.dispatch.on("elementMouseover.tooltip",function(af){d3.select(".nv-chart-"+L.id()+" .nv-series-"+af.seriesIndex+" .nv-distx-"+af.pointIndex).attr("y1",af.pos[1]-V);d3.select(".nv-chart-"+L.id()+" .nv-series-"+af.seriesIndex+" .nv-disty-"+af.pointIndex).attr("x2",af.pos[0]+D.size());af.pos=[af.pos[0]+l.left,af.pos[1]+l.top];I.tooltipShow(af)});I.on("tooltipShow",function(af){if(J){Q(af,ab.parentNode)}});I.on("changeState",function(af){if(typeof af.disabled!=="undefined"){Z.forEach(function(ah,ag){ah.disabled=af.disabled[ag]});P.disabled=af.disabled}O.update()});s=G.copy();g=F.copy()});return O}L.dispatch.on("elementMouseout.tooltip",function(x){I.tooltipHide(x);d3.select(".nv-chart-"+L.id()+" .nv-series-"+x.seriesIndex+" .nv-distx-"+x.pointIndex).attr("y1",0);d3.select(".nv-chart-"+L.id()+" .nv-series-"+x.seriesIndex+" .nv-disty-"+x.pointIndex).attr("x2",C.size())});I.on("tooltipHide",function(){if(J){c.tooltip.cleanup()}});O.dispatch=I;O.scatter=L;O.legend=H;O.controls=z;O.xAxis=w;O.yAxis=o;O.distX=D;O.distY=C;d3.rebind(O,L,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi");O.options=c.utils.optionsFunc.bind(O);O.margin=function(x){if(!arguments.length){return l}l.top=typeof x.top!="undefined"?x.top:l.top;l.right=typeof x.right!="undefined"?x.right:l.right;l.bottom=typeof x.bottom!="undefined"?x.bottom:l.bottom;l.left=typeof x.left!="undefined"?x.left:l.left;return O};O.width=function(x){if(!arguments.length){return f}f=x;return O};O.height=function(x){if(!arguments.length){return h}h=x;return O};O.color=function(x){if(!arguments.length){return B}B=c.utils.getColor(x);H.color(B);D.color(B);C.color(B);return O};O.showDistX=function(x){if(!arguments.length){return r}r=x;return O};O.showDistY=function(x){if(!arguments.length){return p}p=x;return O};O.showControls=function(x){if(!arguments.length){return m}m=x;return O};O.showLegend=function(x){if(!arguments.length){return u}u=x;return O};O.showXAxis=function(x){if(!arguments.length){return j}j=x;return O};O.showYAxis=function(x){if(!arguments.length){return K}K=x;return O};O.rightAlignYAxis=function(x){if(!arguments.length){return N}N=x;o.orient((x)?"right":"left");return O};O.fisheye=function(x){if(!arguments.length){return v}v=x;return O};O.tooltips=function(x){if(!arguments.length){return J}J=x;return O};O.tooltipContent=function(x){if(!arguments.length){return E}E=x;return O};O.tooltipXContent=function(x){if(!arguments.length){return k}k=x;return O};O.tooltipYContent=function(x){if(!arguments.length){return i}i=x;return O};O.state=function(x){if(!arguments.length){return P}P=x;return O};O.defaultState=function(x){if(!arguments.length){return A}A=x;return O};O.noData=function(x){if(!arguments.length){return n}n=x;return O};O.transitionDuration=function(x){if(!arguments.length){return M}M=x;return O};return O};c.models.sparkline=function(){var l={top:2,right:0,bottom:2,left:0},h=400,s=32,i=true,p=d3.scale.linear(),o=d3.scale.linear(),r=function(t){return t.x},q=function(t){return t.y},k=c.utils.getColor(["#000"]),m,g,f,j;function n(t){t.each(function(z){var C=h-l.left-l.right,x=s-l.top-l.bottom,v=d3.select(this);p.domain(m||d3.extent(z,r)).range(f||[0,C]);o.domain(g||d3.extent(z,q)).range(j||[x,0]);var w=v.selectAll("g.nv-wrap.nv-sparkline").data([z]);var y=w.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline");var u=y.append("g");var A=w.select("g");w.attr("transform","translate("+l.left+","+l.top+")");var D=w.selectAll("path").data(function(E){return[E]});D.enter().append("path");D.exit().remove();D.style("stroke",function(F,E){return F.color||k(F,E)}).attr("d",d3.svg.line().x(function(F,E){return p(r(F,E))}).y(function(F,E){return o(q(F,E))}));var B=w.selectAll("circle.nv-point").data(function(I){var G=I.map(function(L,K){return q(L,K)});function H(L){if(L!=-1){var K=I[L];K.pointIndex=L;return K}else{return null}}var F=H(G.lastIndexOf(o.domain()[1])),E=H(G.indexOf(o.domain()[0])),J=H(G.length-1);return[E,F,J].filter(function(K){return K!=null})});B.enter().append("circle");B.exit().remove();B.attr("cx",function(F,E){return p(r(F,F.pointIndex))}).attr("cy",function(F,E){return o(q(F,F.pointIndex))}).attr("r",2).attr("class",function(F,E){return r(F,F.pointIndex)==p.domain()[1]?"nv-point nv-currentValue":q(F,F.pointIndex)==o.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})});return n}n.options=c.utils.optionsFunc.bind(n);n.margin=function(t){if(!arguments.length){return l}l.top=typeof t.top!="undefined"?t.top:l.top;l.right=typeof t.right!="undefined"?t.right:l.right;l.bottom=typeof t.bottom!="undefined"?t.bottom:l.bottom;l.left=typeof t.left!="undefined"?t.left:l.left;return n};n.width=function(t){if(!arguments.length){return h}h=t;return n};n.height=function(t){if(!arguments.length){return s}s=t;return n};n.x=function(t){if(!arguments.length){return r}r=d3.functor(t);return n};n.y=function(t){if(!arguments.length){return q}q=d3.functor(t);return n};n.xScale=function(t){if(!arguments.length){return p}p=t;return n};n.yScale=function(t){if(!arguments.length){return o}o=t;return n};n.xDomain=function(t){if(!arguments.length){return m}m=t;return n};n.yDomain=function(t){if(!arguments.length){return g}g=t;return n};n.xRange=function(t){if(!arguments.length){return f}f=t;return n};n.yRange=function(t){if(!arguments.length){return j}j=t;return n};n.animate=function(t){if(!arguments.length){return i}i=t;return n};n.color=function(t){if(!arguments.length){return k}k=c.utils.getColor(t);return n};return n};c.models.sparklinePlus=function(){var q=c.models.sparkline();var g={top:15,right:100,bottom:10,left:50},f=null,s=null,n,m,k=[],r=false,p=d3.format(",r"),j=d3.format(",.2f"),i=true,t=true,h=false,o="No Data Available.";function l(u){u.each(function(C){var w=d3.select(this);var J=(f||parseInt(w.style("width"))||960)-g.left-g.right,z=(s||parseInt(w.style("height"))||400)-g.top-g.bottom;l.update=function(){l(u)};l.container=this;if(!C||!C.length){var x=w.selectAll(".nv-noData").data([o]);x.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");x.attr("x",g.left+J/2).attr("y",g.top+z/2).text(function(K){return K});return l}else{w.selectAll(".nv-noData").remove()}var I=q.y()(C[C.length-1],C.length-1);n=q.xScale();m=q.yScale();var y=w.selectAll("g.nv-wrap.nv-sparklineplus").data([C]);var A=y.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus");var v=A.append("g");var D=y.select("g");v.append("g").attr("class","nv-sparklineWrap");v.append("g").attr("class","nv-valueWrap");v.append("g").attr("class","nv-hoverArea");y.attr("transform","translate("+g.left+","+g.top+")");var E=D.select(".nv-sparklineWrap");q.width(J).height(z);E.call(q);var G=D.select(".nv-valueWrap");var H=G.selectAll(".nv-currentValue").data([I]);H.enter().append("text").attr("class","nv-currentValue").attr("dx",h?-8:8).attr("dy",".9em").style("text-anchor",h?"end":"start");H.attr("x",J+(h?g.right:0)).attr("y",t?function(K){return m(K)}:0).style("fill",q.color()(C[C.length-1],C.length-1)).text(j(I));v.select(".nv-hoverArea").append("rect").on("mousemove",B).on("click",function(){r=!r}).on("mouseout",function(){k=[];F()});D.select(".nv-hoverArea rect").attr("transform",function(K){return"translate("+-g.left+","+-g.top+")"}).attr("width",J+g.left+g.right).attr("height",z+g.top);function F(){if(r){return}var L=D.selectAll(".nv-hoverValue").data(k);var K=L.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);L.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove();L.attr("transform",function(M){return"translate("+n(q.x()(C[M],M))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1);if(!k.length){return}K.append("line").attr("x1",0).attr("y1",-g.top).attr("x2",0).attr("y2",z);K.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-g.top).attr("text-anchor","end").attr("dy",".9em");D.select(".nv-hoverValue .nv-xValue").text(p(q.x()(C[k[0]],k[0])));K.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-g.top).attr("text-anchor","start").attr("dy",".9em");D.select(".nv-hoverValue .nv-yValue").text(j(q.y()(C[k[0]],k[0])))}function B(){if(r){return}var L=d3.mouse(this)[0]-g.left;function K(P,M){var Q=Math.abs(q.x()(P[0],0)-M);var O=0;for(var N=0;N<P.length;N++){if(Math.abs(q.x()(P[N],N)-M)<Q){Q=Math.abs(q.x()(P[N],N)-M);O=N}}return O}k=[K(C,Math.round(n.invert(L)))];F()}});return l}l.sparkline=q;d3.rebind(l,q,"x","y","xScale","yScale","color");l.options=c.utils.optionsFunc.bind(l);l.margin=function(u){if(!arguments.length){return g}g.top=typeof u.top!="undefined"?u.top:g.top;g.right=typeof u.right!="undefined"?u.right:g.right;g.bottom=typeof u.bottom!="undefined"?u.bottom:g.bottom;g.left=typeof u.left!="undefined"?u.left:g.left;return l};l.width=function(u){if(!arguments.length){return f}f=u;return l};l.height=function(u){if(!arguments.length){return s}s=u;return l};l.xTickFormat=function(u){if(!arguments.length){return p}p=u;return l};l.yTickFormat=function(u){if(!arguments.length){return j}j=u;return l};l.showValue=function(u){if(!arguments.length){return i}i=u;return l};l.alignValue=function(u){if(!arguments.length){return t}t=u;return l};l.rightAlignValue=function(u){if(!arguments.length){return h}h=u;return l};l.noData=function(u){if(!arguments.length){return o}o=u;return l};return l};c.models.stackedArea=function(){var k={top:0,right:0,bottom:0,left:0},i=960,v=500,l=c.utils.defaultColor(),h=Math.floor(Math.random()*100000),u=function(w){return w.x},t=function(w){return w.y},g="stack",m="zero",j="default",o="linear",s=false,r,q,f=c.models.scatter(),n=d3.dispatch("tooltipShow","tooltipHide","areaClick","areaMouseover","areaMouseout");f.size(2.2).sizeDomain([2.2,2.2]);function p(w){w.each(function(G){var K=i-k.left-k.right,D=v-k.top-k.bottom,y=d3.select(this);r=f.xScale();q=f.yScale();var H=G;G.forEach(function(M,N){M.seriesIndex=N;M.values=M.values.map(function(P,O){P.index=O;P.seriesIndex=N;return P})});var E=G.filter(function(M){return !M.disabled});G=d3.layout.stack().order(j).offset(m).values(function(M){return M.values}).x(u).y(t).out(function(O,N,P){var M=(t(O)===0)?0:P;O.display={y:M,y0:N}})(E);var A=y.selectAll("g.nv-wrap.nv-stackedarea").data([G]);var F=A.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea");var C=F.append("defs");var x=F.append("g");var I=A.select("g");x.append("g").attr("class","nv-areaWrap");x.append("g").attr("class","nv-scatterWrap");A.attr("transform","translate("+k.left+","+k.top+")");f.width(K).height(D).x(u).y(function(M){return M.display.y+M.display.y0}).forceY([0]).color(G.map(function(N,M){return N.color||l(N,N.seriesIndex)}));var B=I.select(".nv-scatterWrap").datum(G);B.call(f);C.append("clipPath").attr("id","nv-edge-clip-"+h).append("rect");A.select("#nv-edge-clip-"+h+" rect").attr("width",K).attr("height",D);I.attr("clip-path",s?"url(#nv-edge-clip-"+h+")":"");var z=d3.svg.area().x(function(N,M){return r(u(N,M))}).y0(function(M){return q(M.display.y0)}).y1(function(M){return q(M.display.y+M.display.y0)}).interpolate(o);var J=d3.svg.area().x(function(N,M){return r(u(N,M))}).y0(function(M){return q(M.display.y0)}).y1(function(M){return q(M.display.y0)});var L=I.select(".nv-areaWrap").selectAll("path.nv-area").data(function(M){return M});L.enter().append("path").attr("class",function(N,M){return"nv-area nv-area-"+M}).attr("d",function(N,M){return J(N.values,N.seriesIndex)}).on("mouseover",function(N,M){d3.select(this).classed("hover",true);n.areaMouseover({point:N,series:N.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:N.seriesIndex})}).on("mouseout",function(N,M){d3.select(this).classed("hover",false);n.areaMouseout({point:N,series:N.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:N.seriesIndex})}).on("click",function(N,M){d3.select(this).classed("hover",false);n.areaClick({point:N,series:N.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:N.seriesIndex})});L.exit().remove();L.style("fill",function(N,M){return N.color||l(N,N.seriesIndex)}).style("stroke",function(N,M){return N.color||l(N,N.seriesIndex)});L.transition().attr("d",function(N,M){return z(N.values,M)});f.dispatch.on("elementMouseover.area",function(M){I.select(".nv-chart-"+h+" .nv-area-"+M.seriesIndex).classed("hover",true)});f.dispatch.on("elementMouseout.area",function(M){I.select(".nv-chart-"+h+" .nv-area-"+M.seriesIndex).classed("hover",false)});p.d3_stackedOffset_stackPercent=function(R){var T=R.length,M=R[0].length,N=1/T,P,O,S,Q=[];for(O=0;O<M;++O){for(P=0,S=0;P<H.length;P++){S+=t(H[P].values[O])}if(S){for(P=0;P<T;P++){R[P][O][1]/=S}}else{for(P=0;P<T;P++){R[P][O][1]=N}}}for(O=0;O<M;++O){Q[O]=0}return Q}});return p}f.dispatch.on("elementClick.area",function(w){n.areaClick(w)});f.dispatch.on("elementMouseover.tooltip",function(w){w.pos=[w.pos[0]+k.left,w.pos[1]+k.top],n.tooltipShow(w)});f.dispatch.on("elementMouseout.tooltip",function(w){n.tooltipHide(w)});p.dispatch=n;p.scatter=f;d3.rebind(p,f,"interactive","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","forceX","forceY","forceSize","clipVoronoi","useVoronoi","clipRadius","highlightPoint","clearHighlights");p.options=c.utils.optionsFunc.bind(p);p.x=function(w){if(!arguments.length){return u}u=d3.functor(w);return p};p.y=function(w){if(!arguments.length){return t}t=d3.functor(w);return p};p.margin=function(w){if(!arguments.length){return k}k.top=typeof w.top!="undefined"?w.top:k.top;k.right=typeof w.right!="undefined"?w.right:k.right;k.bottom=typeof w.bottom!="undefined"?w.bottom:k.bottom;k.left=typeof w.left!="undefined"?w.left:k.left;return p};p.width=function(w){if(!arguments.length){return i}i=w;return p};p.height=function(w){if(!arguments.length){return v}v=w;return p};p.clipEdge=function(w){if(!arguments.length){return s}s=w;return p};p.color=function(w){if(!arguments.length){return l}l=c.utils.getColor(w);return p};p.offset=function(w){if(!arguments.length){return m}m=w;return p};p.order=function(w){if(!arguments.length){return j}j=w;return p};p.style=function(w){if(!arguments.length){return g}g=w;switch(g){case"stack":p.offset("zero");p.order("default");break;case"stream":p.offset("wiggle");p.order("inside-out");break;case"stream-center":p.offset("silhouette");p.order("inside-out");break;case"expand":p.offset("expand");p.order("default");break;case"stack_percent":p.offset(p.d3_stackedOffset_stackPercent);p.order("default");break}return p};p.interpolate=function(w){if(!arguments.length){return o}o=w;return p};return p};c.models.stackedAreaChart=function(){var J=c.models.stackedArea(),r=c.models.axis(),g=c.models.axis(),i=c.models.legend(),z=c.models.legend(),D=c.interactiveGuideline();var B={top:30,right:25,bottom:50,left:60},E=null,C=null,F=c.utils.defaultColor(),K=true,H=true,I=true,v=true,q=false,u=false,h=true,n=function(N,M,Q,P,O){return"<h3>"+N+"</h3><p>"+Q+" on "+M+"</p>"},t,s,l=d3.format(",.2f"),m={style:J.style()},o=null,k="No Data Available.",L=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),f=250,p=["Stacked","Stream","Expanded"],G={},w=250;r.orient("bottom").tickPadding(7);g.orient((q)?"right":"left");z.updateState(false);var j=function(R,N){var Q=R.pos[0]+(N.offsetLeft||0),P=R.pos[1]+(N.offsetTop||0),M=r.tickFormat()(J.x()(R.point,R.pointIndex)),S=g.tickFormat()(J.y()(R.point,R.pointIndex)),O=n(R.series.key,M,S,R,A);c.tooltip.show([Q,P],O,R.value<0?"n":"s",null,N)};function A(x){x.each(function(Q){var M=d3.select(this),T=this;var X=(E||parseInt(M.style("width"))||960)-B.left-B.right,P=(C||parseInt(M.style("height"))||400)-B.top-B.bottom;A.update=function(){M.transition().duration(w).call(A)};A.container=this;m.disabled=Q.map(function(Y){return !!Y.disabled});if(!o){var V;o={};for(V in m){if(m[V] instanceof Array){o[V]=m[V].slice(0)}else{o[V]=m[V]}}}if(!Q||!Q.length||!Q.filter(function(Y){return Y.values.length}).length){var N=M.selectAll(".nv-noData").data([k]);N.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");N.attr("x",B.left+X/2).attr("y",B.top+P/2).text(function(Y){return Y});return A}else{M.selectAll(".nv-noData").remove()}t=J.xScale();s=J.yScale();var O=M.selectAll("g.nv-wrap.nv-stackedAreaChart").data([Q]);var y=O.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g");var R=O.select("g");y.append("rect").style("opacity",0);y.append("g").attr("class","nv-x nv-axis");y.append("g").attr("class","nv-y nv-axis");y.append("g").attr("class","nv-stackedWrap");y.append("g").attr("class","nv-legendWrap");y.append("g").attr("class","nv-controlsWrap");y.append("g").attr("class","nv-interactive");R.select("rect").attr("width",X).attr("height",P);if(H){var W=(K)?X-f:X;i.width(W);R.select(".nv-legendWrap").datum(Q).call(i);if(B.top!=i.height()){B.top=i.height();P=(C||parseInt(M.style("height"))||400)-B.top-B.bottom}R.select(".nv-legendWrap").attr("transform","translate("+(X-W)+","+(-B.top)+")")}if(K){var U=[{key:G.stacked||"Stacked",metaKey:"Stacked",disabled:J.style()!="stack",style:"stack"},{key:G.stream||"Stream",metaKey:"Stream",disabled:J.style()!="stream",style:"stream"},{key:G.expanded||"Expanded",metaKey:"Expanded",disabled:J.style()!="expand",style:"expand"},{key:G.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:J.style()!="stack_percent",style:"stack_percent"}];f=(p.length/3)*260;U=U.filter(function(Y){return p.indexOf(Y.metaKey)!==-1});z.width(f).color(["#444","#444","#444"]);R.select(".nv-controlsWrap").datum(U).call(z);if(B.top!=Math.max(z.height(),i.height())){B.top=Math.max(z.height(),i.height());P=(C||parseInt(M.style("height"))||400)-B.top-B.bottom}R.select(".nv-controlsWrap").attr("transform","translate(0,"+(-B.top)+")")}O.attr("transform","translate("+B.left+","+B.top+")");if(q){R.select(".nv-y.nv-axis").attr("transform","translate("+X+",0)")}if(u){D.width(X).height(P).margin({left:B.left,top:B.top}).svgContainer(M).xScale(t);O.select(".nv-interactive").call(D)}J.width(X).height(P);var S=R.select(".nv-stackedWrap").datum(Q);S.transition().call(J);if(I){r.scale(t).ticks(X/100).tickSize(-P,0);R.select(".nv-x.nv-axis").attr("transform","translate(0,"+P+")");R.select(".nv-x.nv-axis").transition().duration(0).call(r)}if(v){g.scale(s).ticks(J.offset()=="wiggle"?0:P/36).tickSize(-X,0).setTickFormat((J.style()=="expand"||J.style()=="stack_percent")?d3.format("%"):l);R.select(".nv-y.nv-axis").transition().duration(0).call(g)}J.dispatch.on("areaClick.toggle",function(Y){if(Q.filter(function(Z){return !Z.disabled}).length===1){Q.forEach(function(Z){Z.disabled=false})}else{Q.forEach(function(aa,Z){aa.disabled=(Z!=Y.seriesIndex)})}m.disabled=Q.map(function(Z){return !!Z.disabled});L.stateChange(m);A.update()});i.dispatch.on("stateChange",function(Y){m.disabled=Y.disabled;L.stateChange(m);A.update()});z.dispatch.on("legendClick",function(Z,Y){if(!Z.disabled){return}U=U.map(function(aa){aa.disabled=true;return aa});Z.disabled=false;J.style(Z.style);m.style=J.style();L.stateChange(m);A.update()});D.dispatch.on("elementMousemove",function(ac){J.clearHighlights();var ab,ag,Z,Y=[];Q.filter(function(aj,ai){aj.seriesIndex=ai;return !aj.disabled}).forEach(function(ak,aj){ag=c.interactiveBisect(ak.values,ac.pointXValue,A.x());J.highlightPoint(aj,ag,true);var ai=ak.values[ag];if(typeof ai==="undefined"){return}if(typeof ab==="undefined"){ab=ai}if(typeof Z==="undefined"){Z=A.xScale()(A.x()(ai,ag))}var al=(J.style()=="expand")?ai.display.y:A.y()(ai,ag);Y.push({key:ak.key,value:al,color:F(ak,ak.seriesIndex),stackedValue:ai.display})});Y.reverse();if(Y.length>2){var af=A.yScale().invert(ac.mouseY);var ah=Infinity,ad=null;Y.forEach(function(al,ak){af=Math.abs(af);var ai=Math.abs(al.stackedValue.y0);var aj=Math.abs(al.stackedValue.y);if(af>=ai&&af<=(aj+ai)){ad=ak;return}});if(ad!=null){Y[ad].highlight=true}}var aa=r.tickFormat()(A.x()(ab,ag));var ae=(J.style()=="expand")?function(aj,ai){return d3.format(".1%")(aj)}:function(aj,ai){return g.tickFormat()(aj)};D.tooltip.position({left:Z+B.left,top:ac.mouseY+B.top}).chartContainer(T.parentNode).enabled(h).valueFormatter(ae).data({value:aa,series:Y})();D.renderGuideLine(Z)});D.dispatch.on("elementMouseout",function(Y){L.tooltipHide();J.clearHighlights()});L.on("tooltipShow",function(Y){if(h){j(Y,T.parentNode)}});L.on("changeState",function(Y){if(typeof Y.disabled!=="undefined"&&Q.length===Y.disabled.length){Q.forEach(function(aa,Z){aa.disabled=Y.disabled[Z]});m.disabled=Y.disabled}if(typeof Y.style!=="undefined"){J.style(Y.style)}A.update()})});return A}J.dispatch.on("tooltipShow",function(x){x.pos=[x.pos[0]+B.left,x.pos[1]+B.top],L.tooltipShow(x)});J.dispatch.on("tooltipHide",function(x){L.tooltipHide(x)});L.on("tooltipHide",function(){if(h){c.tooltip.cleanup()}});A.dispatch=L;A.stacked=J;A.legend=i;A.controls=z;A.xAxis=r;A.yAxis=g;A.interactiveLayer=D;d3.rebind(A,J,"x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","sizeDomain","interactive","useVoronoi","offset","order","style","clipEdge","forceX","forceY","forceSize","interpolate");A.options=c.utils.optionsFunc.bind(A);A.margin=function(x){if(!arguments.length){return B}B.top=typeof x.top!="undefined"?x.top:B.top;B.right=typeof x.right!="undefined"?x.right:B.right;B.bottom=typeof x.bottom!="undefined"?x.bottom:B.bottom;B.left=typeof x.left!="undefined"?x.left:B.left;return A};A.width=function(x){if(!arguments.length){return E}E=x;return A};A.height=function(x){if(!arguments.length){return C}C=x;return A};A.color=function(x){if(!arguments.length){return F}F=c.utils.getColor(x);i.color(F);J.color(F);return A};A.showControls=function(x){if(!arguments.length){return K}K=x;return A};A.showLegend=function(x){if(!arguments.length){return H}H=x;return A};A.showXAxis=function(x){if(!arguments.length){return I}I=x;return A};A.showYAxis=function(x){if(!arguments.length){return v}v=x;return A};A.rightAlignYAxis=function(x){if(!arguments.length){return q}q=x;g.orient((x)?"right":"left");return A};A.useInteractiveGuideline=function(x){if(!arguments.length){return u}u=x;if(x===true){A.interactive(false);A.useVoronoi(false)}return A};A.tooltip=function(x){if(!arguments.length){return n}n=x;return A};A.tooltips=function(x){if(!arguments.length){return h}h=x;return A};A.tooltipContent=function(x){if(!arguments.length){return n}n=x;return A};A.state=function(x){if(!arguments.length){return m}m=x;return A};A.defaultState=function(x){if(!arguments.length){return o}o=x;return A};A.noData=function(x){if(!arguments.length){return k}k=x;return A};A.transitionDuration=function(x){if(!arguments.length){return w}w=x;return A};A.controlsData=function(x){if(!arguments.length){return p}p=x;return A};A.controlLabels=function(x){if(!arguments.length){return G}if(typeof x!=="object"){return G}G=x;return A};g.setTickFormat=g.tickFormat;g.tickFormat=function(x){if(!arguments.length){return l}l=x;return g};return A}})();